(this.$WP=this.$WP||[]).push(["XFvNeg",(e,l)=>{"use strict";var t,i,r,n,a,d,o,s,u,c,m,v,p,h,T,y,g,k,f,C,_,G,b,x=e=>{var l;return!(null!=(l=e.startTimes)&&l.length||!e.available)},E=e=>{var l;return!(null==(l=e.startTimes)||!l.some((e=>"AvailableTimedEntryOption"===(null==e?void 0:e.entryType))))},N=e=>{var l;return null==(l=e.startTimes)?void 0:l.find((e=>"AvailableTimedEntryOption"===(null==e?void 0:e.entryType)))},V=e=>e.some((e=>"AvailableTimedEntryOption"===(null==e?void 0:e.entryType))),B="xVjbx A",P="Uqxmg",w="xNxLi",S=e=>e.filter(Boolean).filter((e=>null!=e.startTime)).map((e=>{var l=e.startTime||"",t="UnavailableTimedEntryOption"===e.entryType;return{chipContent:k("div",{className:T({YYwTO:t}),children:l}),disabled:t,keyValue:l}})),$=({model:e,variant:l="standard",currentTourGrade:n})=>{var a,{trackClick:d}=o(),{selectedTourGrade:s,onSelectTourGrade:v}=u(),h=(null==s?void 0:s.tourGrade)===n?null==s||null==(a=s.timedEntry)?void 0:a.startTime:null,y="standard"===l,g=e.length>6?5:6,C=t((()=>y?g:12),[y,g,12]),_=t((()=>S(e.slice(0,C))),[C,e]),G=e.length>C?e.length-C:0,b=t((()=>G>0?S(e):[]),[G,e]),x=t((()=>(e=>{var l=new Map;return e.filter(Boolean).filter((e=>null!=e.startTime)).forEach((e=>{var t=e.startTime||"";l.set(t,e)})),l})(e)),[e]),E=i(((e,l,t)=>{var i;t.stopPropagation(),v({tourGrade:n,timedEntry:x.get(e)}),d({clientContext:"selectTour",clientParameter:`${(null==(i=n.title)?void 0:i.text)||""} ${e}`})}),[n,x,v,d]),N=_.map((e=>k(p,{selected:e.keyValue===h,disabled:e.disabled,onClick:e.keyValue===h?void 0:l=>E(e.keyValue,e.keyValue===h,l),widthVariant:"full",children:e.chipContent},e.keyValue))),$=b.map((e=>k(p,{selected:e.keyValue===h,disabled:e.disabled,onClick:l=>{E(e.keyValue,e.keyValue===h,l)},widthVariant:"full",children:e.chipContent},e.keyValue))),M=!V(e.slice(0,C))&&V(e),[F,A]=r(M),R=e=>{var l;e.stopPropagation(),d({clientContext:F?"collapseTimedEntries":"expandTimedEntries",clientParameter:`${(null==(l=n.title)?void 0:l.text)||""}`}),A((e=>!e))},Y=k(m,y?{variant:"primary",onClick:R,children:k(c,{id:"fusion_poi_commerce_plus_more_times_plural",args:{0:G}})}:{variant:"primary",onClick:R,children:k(c,{id:"filters_show_more"})}),j=k(m,{variant:"primary",onClick:R,children:k(c,{id:"filters_show_less"})});return f("div",{className:"Mk",children:[!F&&f("div",{className:T(B,{[P]:y,[w]:!y}),children:[N,G>0&&Y]}),F&&f("div",{className:T(B,{[P]:y,[w]:!y}),children:[$,j]})]})},M="JrgeC _S G_",F=(e,l)=>{var t,i;return null!=l?`${(null==(t=e.title)?void 0:t.text)||""} ${l.startTime||""}`:null==(i=e.title)?void 0:i.text},A=({model:e})=>{var l,r,{trackClick:n}=o(),{selectedTourGrade:a,onSelectTourGrade:d}=u(),{startTimes:s}=e,m=t((()=>N(e)),[e]),C=t((()=>null!=s&&s.length>0&&k(_,{model:s,currentTourGrade:e})),[s,e]),G=(null==(l=e.rnplEligibility)?void 0:l.isEligible)||m&&"rnplEligibility"in m&&(null==(r=m.rnplEligibility)?void 0:r.isEligible)||!1,b=t((()=>x(e)||E(e)),[e]),V=(null==a?void 0:a.tourGrade)===e,B=i((()=>{b&&(V&&null!=a&&a.timedEntry||(d({tourGrade:e,timedEntry:m}),n({clientContext:"selectTour",clientParameter:F(e,m)})))}),[e,m,V,b,a,d,n]);return k("div",{onClick:B,className:T("bnmSS z",{eWGjp:b}),children:k("div",{className:"f k",children:f("div",{className:"w",children:[G&&k(h,{variant:"secondary",marginBottom:"spacing-02",children:k(c,{id:"attractions_rnpl_eligible"})}),k("div",{className:"f k Nj MI",children:e.title&&k(y,{variant:"title-04",children:k(g,{model:e.title})})}),b&&null!=e.description&&e.description&&k(v,{cta:k("button",{className:T(M,"BYEDu"),children:k(y,{variant:"supporting-02",elementType:"span",children:k(c,{id:"common_Read_more"})})}),collapsible:!0,ctaCollapse:k("button",{className:M,children:k(y,{variant:"supporting-02",elementType:"span",children:k(c,{id:"common_Readless"})})}),collapsed:!0,numLinesToShow:2,contentClickCanCollapseContent:!1,children:k(y,{variant:"supporting-02",children:k("span",{dangerouslySetInnerHTML:{__html:e.description}})})}),!C&&k("div",{className:"Mk",children:k(p,{selected:V,disabled:!b,onClick:B,children:k(c,{id:"experiences_select_tour"})})}),C&&k("div",{className:"Mk",children:C})]})})})},R=({model:e,condensed:l=!1})=>{var t,i,{onSelectTourGrade:r,selectedTourGrade:d}=u(),{trackClick:s}=o();n((()=>{var l;if(null==d||!d.tourGrade||null==(l=e.tourGrades)||!l.includes(d.tourGrade)){var t=(e=>{var l;return null==(l=e.tourGrades)?void 0:l[0]})(e);if(null!=t&&(x(t)||E(t))){var i,n,a=N(t);r({tourGrade:t,timedEntry:a});var o=null!=a?`${(null==(i=t.title)?void 0:i.text)||""} ${a.startTime||""}`:null==(n=t.title)?void 0:n.text;s({clientContext:"selectTour",clientParameter:o})}else null!=d&&d.tourGrade&&r(null)}}),[e,d,r,s]),a((()=>{var l;0===(null==(l=e.tourGrades)?void 0:l.length)&&s({clientContext:"noAvailableTourGrades"})}),[e,s]);var v=null!=(t=null==(i=e.tourGrades)?void 0:i.filter(Boolean))?t:[],p=v.length,h=l?v.slice(0,2):v,T=l&&h.length<p,y=T&&k(c,{id:"fusion_poi_commerce_see_all_tours_plural",args:{0:p}});return h.length?f(C,{children:[h.map(((e,l)=>k(G,{model:e},l))),T&&k(m,{marginTop:"spacing-04",children:y})]}):null};return[()=>{_=d($),G=s(A),b=d(R),e("default",b)},[e=>(t=e.useMemo,i=e.useCallback,r=e.useState,n=e.useLayoutEffect,a=e.useEffect),e=>(d=e.fused,o=e.useTracking,s=e.FusionComponent),e=>u=e.useBookingFlowContext,e=>c=e.default,e=>m=e.BorderlessButton,e=>v=e.ReadMore,e=>p=e.ChipButton,e=>h=e.default,e=>T=e.default,e=>y=e.default,e=>g=e.default,e=>(k=e.jsx,f=e.jsxs,C=e.Fragment)]]},["cDcdfi","PEYes_","RfdFNG","0DsHEV","7yGKf-","miRpRf","QLckY2","DCBGY9","iekllc","VP50Wc","2dxA8m","F5FCuN"]]);
