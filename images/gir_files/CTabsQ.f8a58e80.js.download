(this.$WP=this.$WP||[]).push(["CTabsQ",(e,t)=>{"use strict";var n,r,a,l,u,i,o,s,c,d,f,h,D,v,p,g,m,k,y,P,B,A,b,R,S,w,C,O,x,I,M,V,E,T,F,_,N,H,W,j,$,z,L,K,U,Y;function Z(e,t){return{selected:!t.isDimmed,onClick:t.onClick,key:e.name,ref:e.ref}}function G({picker:e,inputField:t,onClose:n,inline:a,alignEdge:l,onReset:u,autoAdvance:i=!0,showResetOnDesktop:o=!1,renderApplyButton:s,fullWidthDatePicker:D=!1,pickerFooter:v=null,sticky:p=!0,overlayPosition:g="below"}){var m=w(),[P,A]=r(!1),b=e&&"renderPicker"in e&&(null==e.renderPicker?void 0:e.renderPicker({setValue:e.setValue,onApply:e.onApply,value:e.value})),R=(t=!1)=>{var r=()=>{null==e||e.onApply(),i||n()};return s?s({onClick:r,disabled:t}):T(d,{disabled:t,size:"small",onClick:r,children:T(O,{id:"phoenix_picker_apply"})})},S=u?T(f,{onClick:u,variant:"accent",children:T(O,{id:"sng_fusion_list_filters_modal_reset"})}):null;return"MOBILE"===m?e?T(k,{header:t,stickyHeader:!0,slideFrom:a?"right":"bottom",onClose:n,heightOption:"full",closeButtonPosition:a?"left":void 0,closeButtonIcon:a?y:void 0,footer:_("div",{className:"ZVcWm O",children:[e.showFooterDescription&&v,S,R(e.isApplyButtonDisabled)]}),children:T("div",{className:"VBIgR F1",children:b||""})}):null:_(F,{children:[a&&e&&T("div",{className:"vXbge",children:b}),T(M,{children:!a&&null!=e&&e.ref.current?_(F,{children:[T(C,{unstyled:!0,position:g,shiftY:12,arrowType:"none",alignEdge:"center"!==l?l:void 0,target:e.ref.current,autoFocus:!0,fixed:P,children:_("div",{className:c("SBfDE Gi B2 Z BC Ra",{VCoZP:D}),children:[b,(e.showApplyButton||e.showFooterDescription)&&_("div",{className:"phddl",children:[v&&e.showFooterDescription&&T("div",{className:"yDrFn",children:T(h,{variant:"supporting-01",children:v})}),_("div",{className:"jxRew",children:[R(e.isApplyButtonDisabled),o&&S]})]})]})}),T(B,{event:"click",callback:n}),"DESKTOP"===m&&p&&T(B,{event:"scroll",callback:()=>{var t,n=(null==e||null==(t=e.ref.current)?void 0:t.getBoundingClientRect().top)||Number.MAX_VALUE;A(n<=16)}})]}):null})]})}function X({pickers:e,autoAdvance:t=!0,onBeforeAdvance:n=(()=>!0),onOpen:d,onClose:f,onComplete:h=(()=>{}),autoOpen:p=!1,autoOpenDelay:g=2e3,inputFieldVariant:m,inline:k=!1,children:y,alignEdge:B="left",mapSurface:b,renderApplyButton:R,showResetOnDesktop:S=!1,fullWidthDatePicker:w=!1,pickerFooter:C=null,sticky:O=!0,overlayPosition:x="below",renderButtonsWithInlinePicker:I=!1}){var M,N,H=a(null),W=a(null),j=a(null),{trackClick:$}=A(),z=V(),L=l((()=>{z&&null!=W.current&&W.current.ref.current.focus()}),[z]),K=l((e=>{e&&j.current?j.current(e):t&&H.current&&W.current&&n(W.current)&&null==H.current()&&(L(),h())}),[t,n,h,L]),U=u((()=>Array.from({length:e.length},(()=>i()))),[e.length]),Y=l((e=>{var n=e.onApply?e.onApply():null;t||n?K(n):(L(),h())}),[K,t,L,h]),X=u((()=>e.map(((e,t)=>({...e,setValue:t=>{var n=e.setValue?e.setValue(t):null;K(n)},onApply:()=>Y(e),ref:U[t]})))),[e,Y,U,K]),q=p&&0===g,{openPicker:J,nextPicker:Q,closePicker:ee,currentPicker:te,getPickerValues:ne}=function(e,t=!1){var n,[u,i]=r(t?null==(n=e[0])?void 0:n.name:null),o=a(null);o.current=e.find((e=>e.name===u));var s=l((()=>{var t;if(!u)return null;var n=e.findIndex((e=>e===o.current)),r=null==(t=e[n+1])?void 0:t.name;return i(r),r}),[u,e]),c=l((()=>{i(null)}),[i]),d=l((t=>{var n=t||e[0].name;i(n)}),[e]),{trackClick:f}=A();return{isOpen:!!u,nextPicker:s,closePicker:c,openPicker:d,getPickerValues:e=>{var t=o.current;return{isOpen:e.name===(null==t?void 0:t.name),isDimmed:null==t||e!==t,onClick:()=>{f({clientContext:`click${e.name[0].toUpperCase()}${e.name.substring(1)}PickerButton`}),e.name===(null==t?void 0:t.name)?i(null):i(e.name)}}},currentPicker:o.current}}(X,q);!t&&null!=te&&te.name&&null!=(M=W.current)&&M.value&&null!=(N=W.current)&&N.name&&W.current.name!==te.name&&(null==W.current.setValue||W.current.setValue(W.current.value)),H.current=Q,W.current=te,j.current=J,o((()=>{var e=p&&!q&&j.current?setTimeout(j.current,g):null;return()=>clearTimeout(e)}),[p,g,q]),o((()=>{te&&($({clientContext:b?"mapDatepicker":"pickerOpened",clientParameter:te.name}),null==d||d(te))}),[te,$,d,b]);var re=()=>{L(),ee(),te&&(null==f||f(te))},ae=e=>_("div",{children:[T(v,{variant:m,children:T((({children:t})=>I?T("div",{className:c("hkSqg w",e&&"klaeV"),children:t}):T(F,{children:t})),{children:X.filter((t=>!e||"renderPicker"in t)).map((e=>T(s,{children:e.renderButton(null==te?void 0:te.name,Z(e,ne(e)))},e.name)))})}),e&&T("div",{className:"qhbsC",children:T(D,{marginY:"spacing-05"})})]}),le=null==te?void 0:te.onReset,ue=le?()=>{le(),K("startDate")}:void 0,ie=()=>_(P,{events:["onClick","onTouchStart"],children:[ae(!1),T(G,{picker:te,inputField:ae(!0),onClose:re,inline:k,alignEdge:B,onReset:ue,autoAdvance:t,showResetOnDesktop:S,renderApplyButton:R,fullWidthDatePicker:"date"===(null==te?void 0:te.name)&&w,pickerFooter:C,sticky:O,overlayPosition:x})]});return E("Escape",re),y?T(F,{children:y({renderPickerFlow:ie,currentPicker:te,closePicker:ee})}):ie()}var q=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,J=e=>{if(null!=e&&q.test(e)){var t=new Date(`${e}T00:00`);if(!isNaN(t.getTime()))return t}return null},Q=(e,t)=>{var n=J(e);if(null!==n)return n;var r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate()+t)},ee=({fromMonth:e,monthRange:t,maxRangeDays:r,startDate:a,endDate:l,onDateSelect:u,onDateReset:i,onDateRangeSelect:o,numberOfMonths:s,layoutStyle:c,fullHeight:d,fullWidth:f,isEndDate:h=!1,disableBefore:D=new Date,heatMapData:v,testVariant:p="default"})=>{var g=n.useRef(a||new Date),[m,k]=n.useState(h?a:null);n.useEffect((()=>{k(h?a:null)}),[a,h]);var y=n.useCallback(((e,t)=>{t||(!m||!h&&m>=e?(k(e),u&&u(e,!1)):e>m?(u&&u(e,!0),o&&o(m,e),k(null)):e<m&&(u&&u(e,!1),k(e)))}),[m,h,o,u]),P=m?null:l,B=!m&&!a||P?null:r;return T(N,{onDateReset:i,month:g.current,fromMonth:e,monthRange:t,numberOfMonths:s,layoutStyle:c,startDate:m||a,endDate:P,onDateSelect:y,fullWidth:f,fullHeight:d,maxRangeDays:B,disableBefore:D,heatMapData:v,testVariant:p})};function te(e,t,n,r,a,l,u,i,o=!1,s=!1){if(n||s){var{ref:c,...d}=u;return T(p,{ref:c,date:l?e:t,disabled:l&&o,...d})}return l?T(g,{from:r?null:e,to:r?null:t,disabled:i,...u}):null}function ne({startDate:e,endDate:t,isDefaultDates:n,setDates:r,resetDates:a,maxRangeDays:l,disableBefore:i,fromMonth:o,disabled:s=!1,startDisabled:c=!1,separatePickers:d=!1}){var f=w(),h="MOBILE"===f,D="DESKTOP"===f;return u((()=>{var u=r=>({setValue:u})=>T(K,{fromMonth:o||new Date,monthRange:h?13:12,numberOfMonths:D?2:1,maxRangeDays:null==l?30:l,onDateReset:n?void 0:a,startDate:e,endDate:t,layoutStyle:h?"infiniteVerticalScroll":"paginated",onDateSelect:u,isEndDate:r,disableBefore:i||new Date,fullWidth:!0});return[{name:"startDate",value:e,setValue:e=>{r(e,!0)},onApply:()=>{n&&r(e,!0)},renderButton:(r,a)=>te(e,t,r,n,0,!0,a,s,c,d),renderPicker:u()},{name:"endDate",value:t,setValue:t=>t<e?(r(t,!0),"endDate"):(r(t,!1),null),renderButton:(r,a)=>te(e,t,r,n,0,!1,a,s,c,d),renderPicker:u(!0)}]}),[d,c,s,t,n,D,h,a,r,e,l,i,o])}function re({startDate:e,endDate:t,isDefaultDates:n,setDates:r,resetDates:a,maxRangeDays:l,disableBefore:i,fromMonth:o,disabled:s=!1,useHeatMapData:c=(()=>null),onReset:d}){var f=w(),h="MOBILE"===f,D="DESKTOP"===f;return u((()=>{var u=({setValue:r})=>{var u=c();return T(K,{fromMonth:o||new Date,monthRange:h?13:12,numberOfMonths:D?2:1,maxRangeDays:null==l?30:l,onDateReset:n?void 0:a,startDate:e,endDate:t,layoutStyle:h?"infiniteVerticalScroll":"paginated",onDateSelect:r,disableBefore:i||new Date,fullWidth:!0,heatMapData:u})};return{name:"dateRange",value:e,setValue:e=>r(e)?null:"dateRange",renderButton:(r,a)=>function(e,t,n,r,a,l,u,i){return T(g,{from:r?null:e,to:r?null:t,disabled:i,...u})}(e,t,0,n,0,0,a,s),renderPicker:({setValue:e})=>T(u,{setValue:e}),onReset:d}}),[s,t,n,D,h,a,r,e,l,i,o,c,d])}function ae({date:e,setDate:t,availableDates:n,isDefaultDates:r,showApplyButton:a,showFooterDescription:i,onReset:s,priceMap:c,withIcon:d=!0}){var f=w(),h="MOBILE"===f,D="DESKTOP"===f,v=l((e=>{if(!n)return!1;var t=`${e.getDate()}`.padStart(2,"0"),r=`${e.getMonth()+1}`.padStart(2,"0"),a=`${e.getFullYear()}-${r}-${t}`;return!n.has(a)}),[n]),g=e;return v(e)&&n&&(g=((e,t)=>{if(!t)return null;for(var n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=null,l=t.values(),u=l.next();!u.done;){var i=J(u.value);if(i&&i>=r)if(null===a)a=i;else{var o=Math.abs(a-e);if(!(Math.abs(i-e)<o))return a;a=i}u=l.next()}return a})(e,n)),o((()=>{g&&g.getTime()!==e.getTime()&&t(g,!1,!1)}),[e,g,t]),u((()=>({name:"date",value:g,showApplyButton:a,showFooterDescription:i,setValue:e=>{t(e,!0)},onApply:()=>(r&&t(e,!0),null),onReset:s,renderButton:function(e,t){return T(p,{date:g,onClick:t.onClick,selected:t.selected,disabled:t.disabled,ref:t.ref,withIcon:d})},renderPicker:function({setValue:e}){return T(H,{fromMonth:new Date,monthRange:24,numberOfMonths:D?2:1,selectedDate:g,layoutStyle:h?"infiniteVerticalScroll":"paginated",onDateSelect:e,fullWidth:!0,disabledDates:v,priceMap:c})}})),[D,h,t,v,a,i,g,r,e,s,c,d])}function le({direction:e,currentDate:t,setDate:n,availableDates:r}){var{localize:a}=x(),l=I(),i=u((()=>"forward"===e?((e,t)=>{if(!t)return null;for(var n=t.values(),r=n.next();!r.done;){var a=J(r.value);if(a&&a>e)return a;r=n.next()}return null})(t,r):((e,t)=>{if(!t)return null;for(var n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=t.values(),l=a.next(),u=null;!l.done;){var i=J(l.value);if(i&&i<e&&i>=r&&(u=i),i&&i>=e)return u;l=a.next()}return null})(t,r)),[e,t,r]),o=i?l.formatDate("week_date_long",i):"",s=a.string("accessibility_attraction_date_picker_set_date",{0:o});return u((()=>({name:`${e}DateChanger`,value:t,renderButton:function(){return T("button",{disabled:!i,"aria-label":s,onClick:()=>{i&&n(i,!0)},className:"AVNaN z B2 Z BC _S",children:T("forward"===e?j:W,{size:24})})}})),[n,t,e,i,s])}function ue(e,t,n){var{state:{commerce:r}}=b(),{update:{attractions:{setDates:a}}}=$(),{trackClick:u}=A(),{startDate:i,endDate:o}=(null==r?void 0:r.attractionCommerce)||{},s=J(i),c=J(o),d=l(((e,t,r)=>{u({clientContext:n?"mapDatepicker":"setAttractionsDates",clientParameter:JSON.stringify({startDate:R(e),endDate:R(t),setByUser:r})})}),[u,n]),f=l(((t,n,r)=>{d(t,n,r),a(t,n),e({startDate:t,endDate:n}),z()}),[e,a,d]),h=l(((t,n,r=!0)=>{d(t,t,n),r&&a(t,t),e({startDate:t,endDate:t})}),[a,e,d]),D=l((()=>{a(null,null),u({clientContext:"resetAttractionsDates"}),e(null)}),[e,a,u]),v=Q(null==t?void 0:t.startDate,0),p=Q(null==t?void 0:t.endDate,1);return{singleDate:s||v,startDate:s||v,endDate:c||p,isDefaultDates:!(s&&c||null!=t&&t.setByUser),setDateRange:f,setSingleDate:h,resetDates:D}}function ie(){var e,{state:{commerce:t},dispatch:n}=b(),{update:{attractions:{setPassengers:r}}}=$(),{trackClick:a}=A({clientContext:"setAttractionsPax"}),i=null==t||null==(e=t.attractionCommerce)?void 0:e.pax;return{pax:u((()=>{var e=new Map;return i&&i.filter(Boolean).forEach((t=>{e.set(t.ageBand,t.count)})),e}),[i]),setPax:l(((e,t)=>{var l=[];e.forEach(((e,t)=>l.push({ageBand:t,count:e}))),a({clientParameter:JSON.stringify({pax:l,setByUser:t})});var u=e.get("ADULT")||0,i=e.get("CHILD")||0;r(u,i),n({type:"setAttractionsPax",pax:l})}),[n,a,r])}}function oe(e){var t,n,r,{hotels:a,update:{hotels:{setStayDates:u}}}=$(),i=l((({checkIn:e,checkOut:t})=>{u(e,t)}),[u]);return null===a||a.defaultDates?(t=Q(null==e?void 0:e.checkIn,0),n=Q(null==e?void 0:e.checkOut,1),r=(null==e?void 0:e.setByUser)||null):(t=a.checkInDate,n=a.checkOutDate,r=!a.defaultDates),{dates:{checkIn:t,checkOut:n},setByUser:r,setDates:i}}function se(e){var t,{hotels:n,update:{hotels:{setGuestInfo:r,setTravelInfo:a}}}=$(),{defaultRooms:i,defaultAdults:o,defaultChildrenAges:s,checkIn:c,checkOut:d}=u((()=>(e=>{if(null==(null==e?void 0:e.rooms))return U;var t=0,n=[],{rooms:r}=e;return r.filter(Boolean).forEach((e=>{t+=null==e.adults?0:e.adults,null!=e.childrenAges&&n.push(...e.childrenAges.filter(Boolean))})),{defaultRooms:r.length,defaultAdults:t,defaultChildrenAges:n,checkIn:e.checkIn,checkOut:e.checkOut}})(e)),[e]),f=l((({rooms:e,adults:t,childrenAges:l})=>((e,t,n,r,a)=>(l,u,i)=>{var o=S(i,l);null!=n?e(u,l,o):t(r,a,u,l,o)})(r,a,n,c,d)(e,t,l)),[r,a,n,c,d]);return[{rooms:(null==n?void 0:n.rooms)||i,adults:(null==n?void 0:n.adults)||o,childrenAges:(null==n||null==(t=n.childAgesPerRoom)?void 0:t.flat())||s},f]}function ce(){var{update:{hotels:{setTravelInfo:e}}}=$();return{setTravelInfo:l((({dates:{checkIn:t,checkOut:n},guests:{rooms:r,adults:a,childrenAges:l}})=>{e(t,n,a,r,S(l,r))}),[e])}}var de=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,l;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(a of t.entries())if(!n.has(a[0]))return!1;for(a of t.entries())if(!e(a[1],n.get(a[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(a of t.entries())if(!n.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(t[a]!==n[a])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(l=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,l[a]))return!1;for(a=r;0!=a--;){var u=l[a];if(!e(t[u],n[u]))return!1}return!0}return t!=t&&n!=n},fe=e=>Array.from(e.values()).reduce(((e,t)=>e+t),0);function he({passengerInfo:e,currentPax:t,setPax:n,showApplyButton:a,queueSelections:i=!0,onReset:s}){var[c,d]=r(t),[f,h]=r(null),{localize:D}=x(),v=i?c:t;o((()=>{i&&d(t)}),[i,t,d]),o((()=>{var r;if(e){var a=!1,l=new Map(t),u=null==(r=e.ageBands)?void 0:r.filter(Boolean);u&&u.length&&(u.forEach((e=>{var n=null!=e.minTravelersPerBooking?e.minTravelersPerBooking:0,r=null!=e.maxTravelersPerBooking?e.maxTravelersPerBooking:10,u=t.get(e.ageBand)||0;u<n?(l.set(e.ageBand,n),a=!0):u>r&&(l.set(e.ageBand,r),a=!0)})),t.forEach(((e,t)=>{u.find((e=>e.ageBand===t))||(l.delete(t),a=!0)}))),a&&n(l,!1)}}),[t,e,n]);var p=l(((e,t)=>{h(null),d((n=>new Map([...n.entries(),[e,t]])))}),[]),g=u((()=>fe(t)),[t]),k=l((t=>{return n=t,!1!==(null==e?void 0:e.requiresAdultForBooking)&&0===n.get("ADULT")&&0===n.get("SENIOR")?(h(D.string("attractions.booking.errors.no_travelers")),!1):0===fe(t)?(h(D.string("attractions.booking.select_travelers_to_see_availability")),!1):!!(e=>{var t=!0;return e.forEach(((e,n)=>{"INFANT"!==n&&e>0&&(t=!1)})),!t})(t)||(h(D.string("exp_booking_no_only_infants")),!1);var n}),[D,e]),y=l((e=>{k(e)&&(h(null),Y(e,t)||n(e,!0))}),[t,n,k]),P=l(((e,n)=>{var r=new Map([...t,[e,n]]);y(r)}),[t,y]),B=l((()=>k(v)?(Y(v,t)||n(v,!0),null):"pax"),[v,n,k,t]);return u((()=>({name:"pax",showApplyButton:a,value:v,onApply:B,onReset:s,setValue:y,renderButton:function(e,t){return T(m,{guests:g,...t})},renderPicker:function(){return e?T(L,{passengerInfo:e,selections:v,onAgeBandChange:i?p:P,errorMessage:f}):null}})),[f,B,s,e,i,v,P,y,p,a,g])}return e({default:X,useAttractionDates:ue,useAttractionPax:ie,useDateRangePicker:re,useDateRangePickers:ne,useHotelDates:oe,useHotelGuests:se,useHotelTravelInfo:ce,usePaxPicker:he,useSingleDateChanger:le,useSingleDatePicker:ae}),[()=>{K=ee,U={defaultRooms:1,defaultAdults:2,defaultChildrenAges:[],checkIn:new Date,checkOut:new Date},Y=de,e({default:X,parseIsoDate:J,useAttractionDates:ue,useAttractionPax:ie,useDateRangePicker:re,useDateRangePickers:ne,useHotelDates:oe,useHotelGuests:se,useHotelTravelInfo:ce,usePaxPicker:he,useSingleDateChanger:le,useSingleDatePicker:ae})},[e=>(n=e,r=e.useState,a=e.useRef,l=e.useCallback,u=e.useMemo,i=e.createRef,o=e.useEffect,s=e.Fragment),e=>c=e.default,e=>(d=e.default,f=e.BorderlessButton),e=>h=e.default,e=>D=e.default,e=>(v=e.InputField,p=e.DateInputFieldItem,g=e.DateRangeInputFieldItem,m=e.GuestsInputFieldItem),e=>k=e.SlideInModal,e=>y=e.default,e=>P=e.default,e=>B=e.default,e=>(A=e.useTracking,b=e.useEntrypointContext,R=e.ISODateString,S=e.assignHotelChildrenToRooms),e=>w=e.useViewportCategory,e=>C=e.default,e=>(O=e.default,x=e.useLocalize,I=e.useIntlFormatter),e=>M=e.AfterConsent,e=>V=e.useKeyboardNavigationMode,e=>E=e.useKeyboardEvent,e=>(T=e.jsx,F=e.Fragment,_=e.jsxs),e=>N=e.BaseCalendarPicker,e=>H=e.default,e=>W=e.default,e=>j=e.default,e=>$=e.useTravelInfo,e=>z=e.scrollToTop,e=>L=e.default]]},["cDcdfi","jSLlaY","7yGKf-","VP50Wc","jPSRY1","pyjSAG","E1X9WP","AhTrXA","_cZwhS","Dg5_-9","PEYes_","oVKaZR","MHKLZN","0DsHEV","lMO0v3","W3_c4H","8xs-IB","F5FCuN","-ZZ9nz","x1tMKy","j6P7_e","9wf81N","9rUrE8","9XISbE","JTnVyf"]]);
