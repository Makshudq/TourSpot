(this.$WP=this.$WP||[]).push(["f98D2q/mk62Lp",(n,t)=>{"use strict";var e,r,i,l,a,u,o,d,s,c,v,p,g,f,m,y,I,_,h,D,T,b="en",P=(n,t,e)=>{if(!n)return null;var r=Math.floor(n/60),i=n%60;if(r>24){var l=Math.floor(r/24);return t.string("attraction_product_duration_days_round_v1",{num:l})}if(r>0&&i>0){var a={hours:r,minutes:i};return e?t.string("nsp.duration.hoursminutes.v2",a):t.string("flight_search_results_duration_hour_and_minute",a)}return r>0?e?t.string("nsp.duration.hours.v2",{hours:r}):t.string("flight_search_results_duration_hour_only",{hours:r}):i>0?e?t.string("nsp.duration.minutes.v2",{minutes:i}):t.string("flights_app_minutes_and_class_ffffdca8",{minutes:i}):null},x=(n,t)=>{switch(n){case"MOBILE_ONLY":return t.string("my_bookings_a_mobile_ticket_accepted_short");case"PAPER":return t.string("my_bookings_a_paper_ticket_required_short");default:return null}},C=(n,t)=>{switch(n){case"PICKUP_EVERYONE":case"PICKUP_AND_MEET_AT_START_POINT":return t.string("attraction_booking_pickup");default:return""}},A=(n,t)=>n===b||t===n,N=(n,t)=>n.filter(Boolean).sort((n=>(t,e)=>{if(t===e)return 0;if(!t)return 1;if(!e)return-1;if(t.language===e.language)return 0;if(t.language===n)return-1;if(e.language===n)return 1;if(t.language===b)return-1;if(e.language===b)return 1;var r=t.displayLanguage||"",i=e.displayLanguage||"";return r<i?-1:r>i?1:0})(t)).map((n=>n.displayLanguage)).filter(Boolean).join(", "),k={__key:80040750000323,id:"48cbf078a8c3e5683396b57fdd779573",loc:{},definitions:[]},S=()=>{var n=v(),t=o(),r=d(),i={query:k,pause:!0};if("AttractionProductReview"===n.page){var l=n.params.detailId;l&&(i={query:k,variables:{activityId:l,currency:t,language:r||"en"}})}var[a]=c(i);return e((()=>{var n,t,e,r,i=null==(n=a.data)?void 0:n.fullProduct,l=i&&i.length>0&&i[0]||null,u=null==(t=a.data)?void 0:t.locations,o=u&&u.length>0&&u[0]||null,d=null==(e=a.data)?void 0:e.travelersChoice,s=d&&d.length>0&&d[0]||{},c=null==(r=a.data)?void 0:r.legacyFullProduct,v=c&&c.length>0&&c[0]||null,{regionId:p,category:g,campaignType:f,ranking:m,year:y}=s,I=y&&p&&g&&f&&m?{regionId:p,category:g,campaignType:f,ranking:m,year:y}:null;if(l&&v){var _={currency:v.currencyCode,maxTravelersPerUnit:null,isTieredPricing:null,comparisonPrice:null,specialsDescription:null,...l.pricingInfo||null,fromPrice:v.priceFromNoRounding};l={...l,pricingInfo:_}}return{fetching:a.fetching,fullProduct:l,travelersChoice:I,location:o}}),[a.fetching,a.data])},U={GOOGLE:{machineTranslation:!0,providerName:"Google",providerImageUrl:"/img2/google/powered_by_google_translate.png"}},w=()=>{var{fullProduct:n}=y(),t=d(),r=u(),{localize:i}=s(),o=l();return e((()=>{var e,l;if(!n)return null;var u,d=null==(e=n.uniqueContent)?void 0:e.briefDescription,s=null==(l=d)?void 0:l.text,c=!1;if(!s)if(null!=(u=n.fallbackUniqueContent)&&u.briefDescription){var v,p;o&&(d=null==(v=n.fallbackUniqueContent)?void 0:v.briefDescription,s=a((null==(p=d)?void 0:p.text)||"")),c=!0}else{var g;s=(null==(g=n.description)?void 0:g.text)||""}var f=((n,t)=>{var{source:e,vendor:r}=(null==n?void 0:n.translationInfo)||{},i="MACHINE_TRANSLATION"===e?{...U[r]}:null;return i&&i.providerImageUrl&&(i.providerImageUrl=t+i.providerImageUrl),i})(d,r),m=((n,t,e,r)=>{var i,l,a,u,o,d=((n,t)=>(n=>{switch(n){case"INSTANT":case"INSTANT_THEN_MANUAL":return!0;default:return!1}})(n)?t.string("shopping_cart_instant_confirmation"):"")(null==(i=n.bookingConfirmationSettings)?void 0:i.confirmationType,r),s=((n,t)=>{if(!n||n.length<1)return"";var e=n[0];if(!e)return"";var{feePercentage:r,fromDays:i,toDays:l}=e;return 0===r&&l&&l>1?-1===i&&2===l?t.string("attractions.booking.cancellation.short.free_cancellation_standard"):t.string("attractions.booking.cancellation.short.free_cancellation_up_to_2",{nNumDays:l}):""})(null==(l=n.cancellationConditions)?void 0:l.cancelConditions,r),c=((n,t)=>{var e=((n,t)=>((n,t)=>{if(!n||!n.from||!n.to)return null;var e={numFrom:n.from,numTo:n.to};switch(n.timeUnit){case"DAYS":return t.string("attraction_product_duration_days_range_v1",e);case"HOURS":return t.string("attraction_product_duration_hours_range_v1",e);case"MINUTES":return t.string("attraction_product_duration_minutes_range_v1",e);default:return null}})(null==n?void 0:n.flexibleDuration,t)||P(null==n?void 0:n.durationInMinutes,t)||"")(n,t);return e?t.string("attractions.merchandising.duration",{sDuration:e}):""})(n.detailedItineraryDto,r),v=(null==(a=n.languageServices)?void 0:a.languageInfoMap)||[],p=v.filter((n=>A(null==n?void 0:n.language,e))),g=v.filter((n=>!A(null==n?void 0:n.language,e))),f=N(p,e),m=g.length,y=N(g,e),I=(n=>{var t={supplierUrlIsObfuscated:!1},e=null==n?void 0:n.name;if(e){t.supplierName=e;var r=null==n?void 0:n.url;r&&(t.supplierUrl=r)}return t})(n.taSupplierInfo);return{voucher:x(null==(u=n.ticket)?void 0:u.ticketType,r),instantConfirmation:d,freeCancellation:s,primaryLanguages:f,additionalLanguages:y,additionalLanguagesCount:m,duration:c,hotelPickup:C(null==(o=n.travelerPickupData)?void 0:o.pickupOptionType,r),locale:n.locale||"",translationAttribution:t,supplierName:I.supplierName||"",supplierUrl:I.supplierUrl||"",supplierUrlisObfuscated:I.supplierUrlIsObfuscated}})(n,f,t,i);return{locale:n.locale,productText:s,productTextIsVUC:c,translationAttribution:f,amenities:m}}),[r,n,t,i,o])},E=({fullProduct:n})=>{var t,e,r,i,l,u,o,d,s,c,v,p=(null==(t=n.fallbackUniqueContent)||null==(e=t.longDescription)?void 0:e.text)||(null==(r=n.detailedItineraryDto)||null==(i=r.legacyItineraryDto)||null==(l=i.longDescription)?void 0:l.text)||"",m=a(p);if(m)return g(f,{children:m});var y=null==(u=n.detailedItineraryDto)||null==(o=u.activityItineraryDto)||null==(d=o.activityItem)||null==(s=d.description)?void 0:s.text;if(y)return g(h,{text:y});var I=null==(c=n.detailedItineraryDto)||null==(v=c.standardItineraryDto)?void 0:v.itineraryItems;return null!=I&&I.length?g(_,{items:I}):null},M=n=>{var t,e,r,i,l,a,u,o,d,s,c,v,p,g,f;return null!=(null==(t=n.uniqueContent)||null==(e=t.longDescription)?void 0:e.text)||null!=(null==(r=n.fallbackUniqueContent)||null==(i=r.longDescription)?void 0:i.text)||null!=(null==(l=n.detailedItineraryDto)||null==(a=l.legacyItineraryDto)||null==(u=a.longDescription)?void 0:u.text)||null!=(null==(o=n.detailedItineraryDto)||null==(d=o.activityItineraryDto)||null==(s=d.activityItem)||null==(c=s.description)?void 0:c.text)||(null!=(v=null==(p=n.detailedItineraryDto)||null==(g=p.standardItineraryDto)||null==(f=g.itineraryItems)?void 0:f.length)?v:0)>0},O=()=>{var{fullProduct:n}=y(),t=l();return e((()=>{var e,r,i,l;if(!n)return null;var a=null==(e=n.uniqueContent)||null==(r=e.longDescription)?void 0:r.text;return{introductionText:a,itineraryText:!a&&t&&g(E,{fullProduct:n}),itineraryTextIsVUC:!a&&null!=(null==(i=n.fallbackUniqueContent)||null==(l=i.longDescription)?void 0:l.text),isTextAvailable:M(n)}}),[n,t])},R=[11878,11921,11922,11934,12004,12005,12006,12007,12008,12083],L=[11875,11910,11916,11937,11958,11972,11983,11984,11985,11986,11987,11988,11989,12044,12045,12059,12060,20238,20248,20256],q=n=>{var t=n.startEndPoints;return t?t.flatMap((n=>{var t,e,r,i;if(!n)return[];var{location:l}=n;return l?"START"!==n.type&&"END"!==n.type&&"START_AND_END"!==n.type?[]:[{name:l.name,instruction:null==(t=n.locationInstructions)?void 0:t.text,address:null==(e=l.address)?void 0:e.readableFormat,startEndPointTypeEnum:n.type,latitude:null==(r=l.centre)?void 0:r.latitude,longitude:null==(i=l.centre)?void 0:i.longitude}]:[]})):null},F=()=>{var n=r(m),{fullProduct:t}=y();return e((()=>{if(!t)return null;var e=(n=>{if(!(n=>{var t,e,{tagIds:r}=n;if(r&&r.filter((n=>n&&T.has(n))).length>0)return!1;var i=null==n||null==(t=n.detailedItineraryDto)||null==(e=t.standardItineraryDto)?void 0:e.itineraryItems;if(!i)return!1;var l=i.filter((n=>!!n)).filter((n=>"NO_STOP"!==n.admissionInclusionType));return 0===l.length||l.filter((n=>!!n.durationInMinutes)).length>0})(n))return null;var t=q(n);if(!t)return null;var e=(n=>{var t,e,r=null==n||null==(t=n.detailedItineraryDto)||null==(e=t.standardItineraryDto)?void 0:e.itineraryItems;return r?r.flatMap((n=>{var t;if(!n)return[];var e=n.poiLocation;return e&&n.admissionInclusionType&&("NO"!==n.admissionInclusionType||n.durationInMinutes)&&n.description&&e.name&&e.centre&&"number"==typeof e.centre.latitude&&"number"==typeof e.centre.longitude?[{taLocationId:e.tALocationId,admissionInclusionTypeEnum:n.admissionInclusionType,durationInMinutes:n.durationInMinutes,name:e.name,description:null==(t=n.description)?void 0:t.text,latitude:e.centre.latitude,longitude:e.centre.longitude,serviceProvider:e.serviceProvider}]:[]})):null})(n);if(!e||!e.length)return null;var r=null==n?void 0:n.travelerPickupData;if(!r)return null;var{pickupOptionType:i,additionalInfo:l,endsAtStartPoint:a}=r;return i?{productItineraryItems:e,pickupTypeEnum:i,pickupAdditionalInfo:null==l?void 0:l.text,startEndPoints:t,endsAtStartPoint:!!a}:null})(t);if(e){n("Itinerary:eligible");var r=e.productItineraryItems.filter((n=>"NO_STOP"!==n.admissionInclusionTypeEnum)).length;n(r<=1?"itinerary_stops:one":r<=10?"itinerary_stops:two_to_ten":"itinerary_stops:ten_plus")}else n("Itinerary:ineligible");return e}),[t,n])},V=()=>{var n=r(m),{fullProduct:t}=y(),l=e((()=>t?(n=>{var t=q(n);if(!t)return null;var e=(n=>{var t,e,r=null==n||null==(t=n.detailedItineraryDto)||null==(e=t.mdtItinerary)?void 0:e.days;return r?r.flatMap((n=>{var t;if(!n)return[];var e=(n=>{var t=null==n?void 0:n.accommodations;return t?t.flatMap((n=>n&&n.description?[{description:n.description.text}]:[])):null})(n);if(!e)return[];var r=(n=>{var t=null==n?void 0:n.foodAndDrinks;return t?t.flatMap((n=>{if(!n)return[];var{inclusion:t}=n;return t&&t.description&&t.type?[{inclusion:{description:t.description.text,inclusionTypeEnum:t.type}}]:[]})):null})(n);if(!r)return[];var i=(n=>{var t=null==n?void 0:n.pois;return t?t.flatMap((n=>{var t;if(!n)return[];var{location:e}=n;return e&&n.admissionInclusionType&&n.description&&e.name&&e.centre&&"number"==typeof e.centre.latitude&&"number"==typeof e.centre.longitude?[{taLocationId:e.TALocationId,admissionInclusionTypeEnum:n.admissionInclusionType,durationInMinutes:n.durationInMinutes,name:e.name,description:null==(t=n.description)?void 0:t.text,latitude:e.centre.latitude,longitude:e.centre.longitude}]:[]})):null})(n);return i?[{groupNumber:n.groupNumber,title:null==(t=n.title)?void 0:t.text,accommodations:e,foodAndDrinks:r,productItineraryItems:i}]:[]})):null})(n);if(!e||!e.length)return null;var r=null==n?void 0:n.travelerPickupData;if(!r)return null;var{pickupOptionType:i,additionalInfo:l,endsAtStartPoint:a}=r;return i?{mdtProductItineraryDays:e,pickupTypeEnum:i,pickupAdditionalInfo:null==l?void 0:l.text,startEndPoints:t,endsAtStartPoint:!!a}:null})(t):null),[t]);return i((()=>{l?(n("MDTItinerary:eligible"),l.mdtProductItineraryDays.length<=5?n("itinerary_days:two_to_five"):n("itinerary_days:five_plus")):n("MDTItinerary:ineligible")}),[l,n]),l},B={__key:0xc75e97f721ac,id:"c75e97f721ac5ecd967bb64b279e066f",loc:{},definitions:[]},j=(n,t)=>n.map(((n,e)=>{var r,i,l,a,u,o,d,s,c,v,p=null==t||null==(r=t.reviews)||null==(i=r[e])?void 0:i.userProfile,g=new Date((null==n||null==(l=n.tripInfo)?void 0:l.stayDate)||"").toDateString().split(" "),f=`${g[1]} ${g[3]}`,m=((null==n?void 0:n.photos)||[]).map((n=>{var t,e,r;return(null==n||null==(t=n.photo)||null==(e=t.photoSizes)||null==(r=e[0])?void 0:r.url)||""}));return{reviewId:(null==n?void 0:n.id)||0,rating:(null==n?void 0:n.rating)||0,relativePublishedDate:"",dateText:new Date((null==n?void 0:n.publishedDate)||"").toDateString().split(" ").slice(1).join(" ")||"",mobile:"MOBILE"===(null==n?void 0:n.publishPlatform),experienceDate:f||"",displayTitle:(null==n?void 0:n.title)||"",displayText:(null==n?void 0:n.text)||"",location:(null==p||null==(a=p.hometown)||null==(u=a.location)||null==(o=u.additionalNames)?void 0:o.long)||"",screenName:(null==n?void 0:n.username)||"",helpfulVotes:(null==p||null==(d=p.contributionCounts)?void 0:d.helpfulVote)||0,publishedReviews:(null==p||null==(s=p.contributionCounts)?void 0:s.sumReview)||0,productName:(null==n?void 0:n.productName)||"",avatarUrl:(null==(c=((null==p||null==(v=p.avatar)?void 0:v.photoSizes)||[]).slice().shift())?void 0:c.url)||"",photoUrls:m}})),G=[],W=()=>{var n,{fullProduct:t}=y(),r=(null==t?void 0:t.taSupplierInfo)||null,i=(null==t?void 0:t.reviewSummary)||null,l=(null==i?void 0:i.tripAdvisorRatingCount)||0,a=(null==i?void 0:i.viatorRatingCount)||0,u=(null==t||null==(n=t.supplierReviews)?void 0:n.reviews)||G,o={query:B,variables:{reviewId:u.map((n=>(null==n?void 0:n.id)||0))||[]}},[d]=c(o),s=null==d?void 0:d.data;return e((()=>{var n,e;return{supplierId:(null==t?void 0:t.taSupplierLocationId)||0,supplierName:(null==r?void 0:r.name)||"",supplierUrl:(null==r?void 0:r.url)||"",totalReviewCount:(null==r||null==(n=r.reviewSummary)?void 0:n.count)||0,overallRating:(null==r||null==(e=r.reviewSummary)?void 0:e.rating)||0,productReviewCount:l+a,hasOnlyViatorReviews:0===l&&0!==a,hasCertificateOfExcellence:!1,supplierReviews:j(u,s)}}),[t,u,s,r,l,a])},z=()=>{var{fullProduct:n}=y();return e((()=>{var t,e;return{numberOfReviews:null==n||null==(t=n.reviewSummary)?void 0:t.tripAdvisorRatingCount,averageRating:null==n||null==(e=n.reviewSummary)?void 0:e.tripAdvisorAvgRating}}),[n])};return[()=>{y=S,I=w,_=p.onComponentUsage((()=>t("f98D2q/WIG8jU")),"ItineraryText"),h=p.onComponentUsage((()=>t("f98D2q/WIG8jU")),"ActivityItineraryText"),D=O,T=new Set([...R,...L]),n({a:D,b:F,c:V,d:W,e:z,g:P,u:I})},[n=>(e=n.useMemo,r=n.useContext,i=n.useEffect),n=>l=n.useIsMounted,n=>a=n.decodeStringWithJSBase64,n=>u=n.useCdnPrefix,n=>(o=n.useCurrency,d=n.useLanguage,s=n.useLocalize),n=>c=n.useQuery,n=>v=n.useRoute,n=>p=n,n=>(g=n.jsx,f=n.Fragment),n=>m=n.AddPageProperty]]},["cDcdfi","4Z07E2","ZrBilN","XBOpq0","0DsHEV","5X2em-","F8raOV","pLbCP4","F5FCuN","30t50h"]]);
