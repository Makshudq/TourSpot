(this.$WP=this.$WP||[]).push(["dX3eZQ",(e,i)=>{"use strict";var n,l,a,r,t,o,s,c,u,d,m,p,h,g,v,f,_,b,k,N,C,y,S,T,P,O,A,R,w,I,x,U,M,E,L,D,H,z,F,B,G,W,V,K,j,Y,J,X,q,Z,Q,$,ee,ie,ne,le,ae,re,te,oe,se,ce,ue,de,me,pe,he,ge,ve,fe,_e,be,ke,Ne,Ce,ye,Se,Te,Pe,Oe,Ae,Re,we,Ie,xe,Ue,Me,Ee,Le,De,He,ze,Fe,Be,Ge,We,Ve,Ke,je,Ye,Je,Xe,qe,Ze,Qe,$e,ei,ii,ni,li,ai,ri,ti,oi,si,ci,ui,di,mi,pi,hi,gi,vi=({href:e,onClick:i,children:n})=>{var l=null!=e?"a":"button",a="button"===l;return E(l,{type:a?"button":void 0,href:e,onClick:i,className:s("iAuDs u R4 b S5 H3 _S",{"PScXm G_ Wh w":a}),children:n})},fi=()=>E("hr",{className:"hpCDp"}),_i="fXjYP w f u G Pd PP Pq PC B- G_",bi="vZTaG",ki=({type:e,text:i,href:n,onClick:l,expandable:a=!1,isExpanded:r=!1})=>L(D,{children:["link"===e&&E("a",{className:_i,href:n,onClick:l,children:E("span",{className:bi,children:i})}),"button"===e&&L("button",{type:"button",className:_i,"aria-expanded":r,onClick:l,children:[E("span",{className:bi,children:i}),a&&E("span",{className:s("WWSFa S4",{KunuG:r}),children:E(w,{})})]})]}),Ni=()=>{var e=new URLSearchParams;e.set("screen","membership"),e.set("action","editSubscription");var i=`/DiningClubHome?${e.toString()}`;return E("div",{className:"IymcE Ph PV Pu PH NK R4",children:E(O,{variant:"accent",href:i,children:E(j,{variant:"supporting-03",elementType:"span",children:E(N,{id:"gemini.b2c.dining.club.payment_failed.update_payment"})})})})},Ci=({menuItems:e,menuTrigger:i,onOpen:a})=>{var[r,t]=n(!1),o=l((()=>{t((e=>!e)),a&&r&&a()}),[a,r]);return L(D,{children:[i(r,o),r&&E(K,{events:["onClick","onTouchStart"],children:E("div",{className:"Ma Ne MC NF",children:e.map((({displayName:e,href:i,onClick:n,hasDiningClubPaymentFailedLabel:l},a)=>L(Ge,{href:i,onClick:n,children:[e,!0===l&&E(Ve,{})]},String(a))))})})]})},yi={__key:0xcdc93d17169e,id:"cdc93d17169e7ddf9ae776dd79b3a867",loc:{},definitions:[]},Si={__key:88961442738813,id:"50e8f331727d31a006bbe1a2272e420e",loc:{},definitions:[]},Ti=e=>{var i,n=m(),r=p(),t=I(),{localize:o}=C(),[{data:s}]=Y({query:Si,variables:{userId:t||""},pause:null==t});"detailId"in n.params?({detailId:i}=n.params):null!=(null==e?void 0:e.detailId)&&({detailId:i}=e);var[{data:c}]=Y({query:yi,variables:{detailId:null!=i?i:0}}),u=H(),d=l((e=>{u({GlobalNav:{postContentCtaClick:{action:e,entrypoint:"GLOBAL_NAV",locationId:i,uid:r}}})}),[i,r,u]),h=a((()=>{var e,l,a,r="/UserReview";return"UserReviewEdit"===n.page&&i?r:null!=(e=null==c||null==(l=c.locations)||null==(a=l[0])?void 0:a.writeUserReviewUrl)?e:r}),[c,i,n.page]);return{options:a((()=>{var e,i,n=[];if((null==t||null!=s&&null!=(e=s.authzInfo)&&e.canWriteReview)&&n.push({displayName:o.string("homepage_war_button"),href:h,onClick:()=>{d("WRITE_REVIEW")}}),null==t||null!=s&&null!=(i=s.authzInfo)&&i.canPostPhoto){var l,a,r=null!=(null==c||null==(l=c.locations)||null==(a=l[0])?void 0:a.postPhotosUrl)?c.locations[0].postPhotosUrl:"/PostPhotos";n.push({displayName:o.string("ugc_uploader_photo_v3"),href:r,onClick:()=>d("POST_PHOTOS")})}return n}),[c,s,t,d,o,h]),userReviewProps:a((()=>{var e;return{visible:null==t||!(null==s||null==(e=s.authzInfo)||!e.canWriteReview),href:h,onClick:()=>d("WRITE_REVIEW")}}),[s,t,d,h]),isActiveOwner:a((()=>{var e,i,n;return null==c||null==(e=c.locations)||null==(i=e[0])||null==(n=i.currentUserOwnerStatus)?void 0:n.isValid}),[c])}},Pi=({isPaymentFailed:e})=>{var{localize:i}=C(),n=J(),r=l((({actionSubType:e,eventName:i})=>{n({actionType:"click",actionSubType:e,itemName:"GlobalNavDiningClub",mixpanel:{eventName:i}})}),[n]);return a((()=>[{displayName:i.string("gemini.t4b.dining.club.navigation.item_discover"),href:"/DiningClubHome",onClick:()=>r({actionSubType:"discover",eventName:"b2c_dc_member_global_nav_discover_click"})},{displayName:i.string("gemini.t4b.dining.club.navigation.my_card"),href:"/DiningClubHome?screen=mycard",onClick:()=>r({actionSubType:"mycard",eventName:"b2c_dc_member_global_nav_card_click"})},{displayName:i.string("gemini.t4b.dining.club.navigation.membership"),href:"/DiningClubHome?screen=membership",hasDiningClubPaymentFailedLabel:e,onClick:()=>r({actionSubType:"membership",eventName:"b2c_dc_member_global_nav_membership_click"})}]),[i,e,r])},Oi=()=>{var{localize:e}=C(),[{data:i}]=X(),n=H(),r=l((e=>{n({GlobalNav:{optimusNavClick:{action:e}}})}),[n]);return a((()=>{var n={displayName:e.string("plus_membership_menu_label"),href:"/OptimusAccountManager",onClick:()=>r("MEMBERSHIP")},l={displayName:e.string("plus_membership_resubscribe_now"),href:"/OptimusSubscriptionCheckout"},a={displayName:e.string("mixer_home_about"),href:"/Plus",onClick:()=>r("ABOUT")};if(i){if(i.isMember)return[n,a];if(i.isFormerMember)return[n,l,a]}return[]}),[e,r,i])},Ai="Appearance",Ri=[{displayName:"Use your device settings",value:"AUTO"},{displayName:"Dark theme (beta)",value:"DARK"},{displayName:"Light theme",value:"LIGHT"}],wi=e=>{var{themePreferenceOrAuto:i,canChangeThemes:n,setTheme:a}=$(),r=z(),{open:t}=k((({close:n})=>E(q,{title:Ai,onClose:n,children:E("div",{className:"MuxRD",children:E(Z,{name:"theme",children:Ri.map((({displayName:n,value:l})=>E(Q,{id:l,value:l,selected:i===l,onSelect:()=>{r({itemType:"theme-switcher",itemName:e,actionType:"click",customData:JSON.stringify({action:"select",theme:l})}),a(l)},label:n},l)))})})}))),o=l((()=>{r({itemType:"theme-switcher",itemName:e,actionType:"click",customData:JSON.stringify({action:"open"})}),t()}),[t,r,e]);return n?{displayName:Ai,openThemeModal:o}:null},Ii=({isOwner:e=!1,scope:i})=>{var n=p(),{localize:a}=C(),r=H(),t=F(),{isOptimusEnabled:o}=G(),s=W(),c=B("tripadvisor","nav"),{options:u,isActiveOwner:d}=je(i),{data:m}=V(),h="PAYMENT_ERROR"===m,g=!d,v=Je(),f=Ye({isPaymentFailed:h}),_=Xe("hamburger-menu"),b=l((e=>{t({module:"UtilityNav",action:"click",value:0,context:e})}),[t]),k=l((()=>{r({Trips:{elementClick:{element:"MASTHEADCTA",puid:n}}})}),[r,n]),N=l((()=>{r({GlobalNav:{optimusNavClick:{action:"ABOUT"}}})}),[r]),y=v.length?E(Ke,{menuItems:v,menuTrigger:(e,i)=>E(We,{type:"button",text:"Tripadvisor Plus",expandable:!0,isExpanded:e,onClick:i})}):E(We,{type:"link",href:c,text:"Tripadvisor Plus",onClick:N}),S=L("div",{className:"f u",children:[a.string("gemini.t4b.dining.club.header.title"),h&&E(Ve,{})]});return L(D,{children:[e&&E(We,{type:"link",href:"/Owners",text:a.string("global_nav_profile_my_business"),onClick:()=>b("UserProfile_ManagementCenter")}),s&&E(Ke,{menuItems:f,menuTrigger:(e,i)=>E(We,{type:"button",text:S,expandable:!0,isExpanded:e,onClick:i})}),g&&u.map((({displayName:e,href:i,onClick:n})=>E(We,{type:"link",href:i,text:e,onClick:n}))),o&&y,E(We,{type:"link",href:"/Inbox",text:a.string("dmo_hdr_alerts"),onClick:()=>b("UserProfile_inbox")}),E(We,{type:"link",href:"/Trips",text:a.string("trips_product_name"),onClick:k}),E(We,{type:"link",href:"/Bookings",text:a.string("my_bookings_headtext_fffff9b3"),onClick:()=>b("UserProfile_bookings")}),null!=_&&E(We,{type:"button",text:_.displayName,onClick:_.openThemeModal})]})},xi={__key:0xac20144f8dbb,id:"ac20144f8dbb4a4045ab070237db8854",loc:{},definitions:[]},Ui=()=>{var e,i,n,l,a,r,t=I(),[{data:o,fetching:s}]=ee({query:xi,variables:{userId:t||""},executeWhen:null===t?"never":"immediately"},{updateMemberProfile:()=>"invalidateAndRefetch"});return{displayName:(null==o||null==(e=o.memberProfile)?void 0:e.displayName)||void 0,profileUrl:(null==o||null==(i=o.memberProfile)||null==(n=i.route)?void 0:n.url)||void 0,avatarSource:(null==o||null==(l=o.memberProfile)||null==(a=l.avatar)?void 0:a.photoSizeDynamic)||void 0,isOwner:null!=(r=null==o?void 0:o.OwnerProperty_isOwnerOfAnyLocation)&&r,fetching:s}},Mi=e=>`/RegistrationController?flow=core_combined&pid=40486&returnTo=${e}&fullscreen=true&flowOrigin=login&hideNavigation=true`,Ei=({link:e})=>{var i=null!=e.linkId?e.linkId:"more",[a,r]=n(!1),t=l((e=>{"more"===i&&(r(!0),e.preventDefault())}),[i]);if(null!=e.linkId&&ei.has(e.linkId))return null;if(a&&null!=e.sublinks&&e.sublinks.length>0)return E(D,{children:e.sublinks.map((e=>null!=e&&E(Ei,{link:e},e.linkId||"")))});var o=null!=e.preLocalizedAnchorText?e.preLocalizedAnchorText:e.localizedAnchorText;return E(Ge,{href:e.url||"",onClick:t,children:null!=o?o:L(D,{children:[E(N,{id:"common_more_capital_ffffe27f"})," ",E(w,{size:14})]})},i||"more")},Li=e=>{var i=I(),n=m(),a=encodeURIComponent(n&&"/Unknown"!==n.path?n.path:"/"),{open:r}=x(),{trackWouldOpenExplicitPreferences:t}=U("ONBOARDING","JOIN_BUTTON"),{login:o}=e,s=l((e=>{e.preventDefault(),o({flowOrigin:"login",pid:40486,flow:"sign_up_and_save",isFullWidthMobile:!0}).then((e=>{null!=e&&e.hasCreatedMember&&"TA"!==(null==e?void 0:e.loginProvider)&&(t(),r())}))}),[o,t,r]);return null!==i&&e.fetching?null:null!==i&&null!=e.profileUrl&&null!=e.displayName?L("a",{href:e.profileUrl,className:"xLFKu f u",children:[E("div",{className:"ZGMZs",children:E(T,{source:e.avatarSource})}),E("div",{className:"uIuSz b S7 H6",children:e.displayName})]}):null!==i?null:E("div",{className:"tRcTf",children:E(P,{fullWidth:!0,size:"small",variant:"primary",onClick:s,href:Mi(a),children:E(N,{id:"common_Signin"})})})},Di=e=>{var i=I(),a=m(),o=p(),[s,c]=n(!0),u=r(o),{login:d}=e,h=l((()=>{s&&(setTimeout(e.close,250),c(!1))}),[s,c,e.close]);t((()=>{o!==u.current&&h()}),[o,h]);var{displayName:g,profileUrl:v,avatarSource:f,isOwner:_,fetching:b}=Ze(),{data:k,fetching:C}=S(e.scope),y=k&&k.globalNavLinks&&k.globalNavLinks.sublinks&&k.globalNavLinks.sublinks.map((e=>e&&E(Ei,{link:e},null!=e.linkId?e.linkId:"more")))||null,T=encodeURIComponent(a&&"/Unknown"!==a.path?a.path:"/");return["Trust","TrustHome"].includes(a.page)?E($e,{isOpen:s,onClose:h}):E(Qe,{inline:"div",isOpen:s,slideFrom:"left",onClose:h,children:L("div",{className:"HkFts Gg Cj z",children:[!e.hideSignInAndSignOut&&E(Li,{displayName:g,profileUrl:v,avatarSource:f,fetching:b,login:d}),E("div",{className:"IKHCi",children:E(qe,{isOwner:_})}),C?null:L(D,{children:[E(fi,{}),y]}),null!=i&&L(D,{children:[E(fi,{}),E(Ge,{href:"/MobileNativeSettings",children:E(N,{id:"mem_settings"})}),!e.hideSignInAndSignOut&&L(Ge,{href:`/RegistrationController?flow=sign_out&pid=1&returnTo=${T}&fullscreen=true`,children:[E(N,{id:"common_Signout"})," "]})]})]})})},Hi=({scope:e,hideSignInAndSignOut:i})=>{var{localize:n}=C(),l=_(),{open:a}=k((({close:n})=>E(ii,{scope:e,close:n,login:l,hideSignInAndSignOut:i})));return E("button",{className:"Kemnw u j _T _S S8 H0 c _G G_ B- M0 P0",onClick:a,title:n.string("mw_common_menu_fffffd37"),"aria-label":n.string("mw_common_menu_fffffd37"),children:E(b,{})})},zi=["Home","Tourism","Hotels"],Fi=({scope:e,isSearchHidden:[i,l,a]=[!1,!1,!1]})=>{var{page:r,params:o}=m(),c=p(),[u,d]=n({latitude:null,longitude:null}),g=h(),v={geoId:1};t((()=>{ne(((e,i)=>{d({latitude:e,longitude:i})}),(()=>{}),!0)}),[]),null!=e?(null!=e.geoId&&e.geoId>1&&(v.geoId=e.geoId),null!=e.page&&(v.pageType=ae[e.page]),null!=e.latitude&&null!=e.longitude&&(v.latitude=e.latitude,v.longitude=e.longitude)):("geoId"in o&&null!=o.geoId&&(v.geoId=o.geoId),"latitude"in o&&"longitude"in o&&(v.latitude=o.latitude,v.longitude=o.longitude)),null!=u.latitude&&null!=u.longitude&&(v.userLocation={latitude:u.latitude,longitude:u.longitude});var f=e=>E(le,{source:"SINGLE_SEARCH_NAV",scope:v,styleVariant:g?"expanding_left":"expanding_right",sponsorDataProvider:e},c);return E("div",{className:s("GQFec",{mmEkY:g,eUcEj:i,yBSER:l,WhBon:a}),children:E("div",{className:"pbYjx",children:zi.includes(r)?E(ie,{adAreaId:"globalnav",children:({sponsorDataProvider:e})=>f(e)}):f()})})},Bi={__key:0xd1c4ace2f4c5,id:"d1c4ace2f4c5c5fabe4320af2aa275a1",loc:{},definitions:[]},Gi=()=>{var e=I(),[{data:i}]=Y({query:Bi,variables:{userId:e||""},pause:!e});return!(!i||!i.Inbox_unreadConversations)},Wi=({scope:e})=>{var i=o(),{page:n}=m(),a=p(),r=H(),t=ai(),{isOptimusEnabled:s}=G(!0),{localize:c}=C(),u=h(),d=W(),{data:g}=V(),v="PAYMENT_ERROR"===g,f=B("tripadvisor","nav"),{userReviewProps:_,isActiveOwner:b}=je(e),k=Je(),y=Ye({isPaymentFailed:v}).map((({hasDiningClubPaymentFailedLabel:e,...i})=>({...i,withDot:e}))),S=l((()=>{r({Trips:{elementClick:{element:"MASTHEADCTA",puid:a}}})}),[r,a]),T=l((()=>{r({GlobalNav:{optimusNavClick:{action:"ABOUT"}}})}),[r]),P=!(b||"RegistrationController"===n&&"MOBILE"!==i);return L(D,{children:[s&&E((()=>k.length?E(ue,{label:"Tripadvisor Plus",mode:"menu",menuVariant:"DESKTOP"===i?"leading-top-caret":"trailing-top-caret",options:k,trigger:({active:e,placeholder:i,children:n,...l})=>E(A,{variant:"clear",textVariant:"button-01",...l,children:E(re,{"aria-label":n})})}):E(A,{variant:"clear",textVariant:"button-01",href:f,"aria-label":"Tripadvisor Plus",onClick:T,children:E(re,{})})),{}),d&&E(ue,{label:c.string("gemini.t4b.dining.club.header.title"),mode:"menu",icon:v?ri:ce,menuVariant:"DESKTOP"===i?"leading-top-caret":"trailing-top-caret",options:y,trigger:({active:e,placeholder:i,...n})=>E(A,{variant:"clear",textVariant:"button-01",...n})}),P&&_.visible&&E("div",{children:E(A,{variant:"clear",icon:se,onClick:_.onClick,href:_.href,textVariant:"button-01",iconOnlyMobileAndTablet:!0,children:c("review_dropdown_label")})}),!u&&L(D,{children:[E(A,{variant:"clear",textVariant:"button-01",icon:te,iconOnlyMobileAndTablet:!0,href:"/Trips",onClick:S,children:E(N,{id:"trips_product_name"})}),E(A,{variant:"clear",textVariant:"button-01",icon:t?R:oe,iconOnlyMobileAndTablet:!0,href:"/Inbox",children:E(N,{id:"dmo_hdr_alerts"})})]})]})},Vi=()=>{var e=I(),i=m(),{userAgentCategory:n}=me(),o=i&&"/Unknown"!==i.path?i.path:"/",c=F(),u=pe(),d=z(),p=de(),g=ai(),v=h(),{localize:f}=C(),b=_(),{profileUrl:k,avatarSource:y,isOwner:S}=Ze(),O=r(),A=r();t((()=>{O.current=v,A.current=g}),[v,g]),t((()=>{!O.current&&v&&!A.current&&g&&u({itemName:"AvatarAlertBubble",itemType:"AvatarAlert"})}),[v,g,u]);var R=`/RegistrationController?${new URLSearchParams({flow:"sign_up_and_save",returnTo:o,fullscreen:"true",flowOrigin:"login",hideNavigation:"true",isLithium:"true"}).toString()}`,{open:w}=x(),{trackWouldOpenExplicitPreferences:M}=U("ONBOARDING","JOIN_BUTTON"),L=l((()=>{d({actionType:"click",actionSubType:"AvatarAlertBubbleClick",itemType:"AvatarAlert",itemName:"AvatarAlertBubble"})}),[d]),D=l((e=>{e.preventDefault(),b({flowOrigin:"login",flow:"sign_up_and_save",pid:40486}).then((e=>{c({module:"Masthead_signin",action:"signin"}),!0===(null==e?void 0:e.hasCreatedMember)&&"TA"!==e.loginProvider&&(M(),w())}))}),[b,c,M,w]),H=(({profileUrl:e,isOwner:i})=>{var n=m(),r=encodeURIComponent(n&&"/Unknown"!==n.path?n.path:"/"),t=F(),{isOptimusEnabled:o,isOptimusSubscribed:s}=G(!0),c=he(),u=Xe("global-nav"),d=W(),{data:p}=V(),g="PAYMENT_ERROR"===p,v=h(),f=J(),_=l((()=>{f({actionType:"click",actionSubType:"profileAvatar",itemName:"GlobalNavDiningClub",mixpanel:{eventName:"b2c_dc_member_global_nav_profile_click"}})}),[f]),b=l((e=>{t({module:"UtilityNav",action:"click",value:0,context:e})}),[t]),{localize:k}=C();return a((()=>[null!=e?{displayName:k.string("ip_view_profile_1cf1"),href:e,onClick:()=>b("UserProfile_viewProfile")}:null,i?{displayName:k.string("global_nav_profile_my_business"),href:"/Owners",onClick:()=>b("UserProfile_ManagementCenter")}:null,c?{displayName:k.string("my_bookings_headtext_fffff9b3"),href:"/Bookings",onClick:()=>b("UserProfile_bookings")}:null,d?{displayName:k.string("gemini.t4b.dining.club.header.title"),href:"/DiningClubHome",onClick:()=>{b("UserProfile_DiningClub"),_()},withDot:g}:null,o?{displayName:"Tripadvisor Plus",href:s?"/OptimusAccountManager":"/Plus",onClick:()=>b("UserProfile_optimus")}:null,{displayName:k.string("mem_account_info"),href:"/Settings-cp",onClick:()=>b("UserProfile_settings")},...v?[{displayName:k.string("trips_product_name"),href:"/Trips",onClick:()=>b("UserProfile_trips")},{displayName:k.string("dmo_hdr_alerts"),href:"/Inbox",onClick:()=>b("UserProfile_alerts")}]:[],null!=u?{displayName:u.displayName,onClick:u.openThemeModal}:null,{displayName:k.string("common_Signout"),href:`/NewsletterSignOut?returnTo=${r}`,onClick:()=>b("UserProfile_signout")}].filter(Boolean)),[k,o,s,c,v,d,_,i,e,u,r,b,g])})({profileUrl:k,isOwner:S});return null==e?"RegistrationController"===i.page&&"MOBILE"!==n?null:E(P,{href:R,onClick:D,fullWidth:!0,size:"small",variant:"primary",children:E(N,{id:"common_Signin"})}):E(ue,{label:f.string("utility_nav_profile"),menuMaxHeight:"none",menuVariant:"trailing-top-caret",mode:"menu",options:H,trigger:({children:e,active:i,disabled:n,placeholder:l,icon:a,ariaAttributes:r,onClick:t,...o})=>E("a",{role:"button",className:s("rfTPx f w _Z P0 u j _S S8 H0 c _G G_ B-",p,{vIHcF:i}),href:k,onClick:e=>{e.preventDefault(),null==t||t(e),v&&g&&L()},...r,"aria-label":null!=r["aria-label"]?r["aria-label"]:v&&g?"Profile and new alert":f.string("utility_nav_profile"),...o,children:E(T,v&&g?{size:"medium",source:y,alt:"",notLazy:!0,alert:!0}:{size:"medium",source:y,alt:"",notLazy:!0})})})},Ki="ciCgd F0",ji=({logoOnly:e})=>{var{path:i}=m(),n=a((()=>5===(new Date).getMonth()),[]),l=n?"/img2/brand_refresh/special/pride_month_Tripadvisor_lockup_horizontal_secondary_small.svg":"/img2/brand_refresh/Tripadvisor_logoset_solid_green.svg",r=E(ge,e?{className:"TKanc _R Mj",lightSrc:l,darkSrc:l,alt:"Tripadvisor"}:{className:"TRRBg _R",lightSrc:n?"/img2/brand_refresh/special/pride_month_Tripadvisor_lockup_horizontal_secondary.svg":"/img2/brand_refresh/Tripadvisor_lockup_horizontal_secondary_registered.svg",darkSrc:"/img2/brand_refresh/Tripadvisor_Logo_dark-bg_circle-green_horizontal-lockup_registered_RGB.svg",alt:"Tripadvisor"}),t=de();return"/"===i?E("h1",{className:Ki,children:r}):E("a",{className:s(Ki,t),href:"/",children:r})},Yi=()=>{var e=Te(),i=I(),{page:r}=m(),[o,s]=n(0),[c,u]=n(!1),{cartCount:d,setCartCount:p,cartButtonRef:h}=ye(),g=H(),{localize:v}=C(),f=fe(),_=ke(),b=Pe(),k=a((()=>null!=d?d:o>0?o:0),[o,d]);t((()=>{b&&h.current&&u(!0)}),[b,h,u]),t((()=>{if(f){var n=_?Ne(e,i):null;null==n?ve().then((n=>{p(n.itemCount),s(n.itemCount),Ce(e,i,n.itemCount)})).catch((()=>{})):(p(n),s(n))}}),[_,e,p,f,i]);var y=l((()=>{Se(e,!1),g({AppPresentation:{click:{clientContext:"cartIcon",sessionId:e,trackingKey:JSON.stringify({pg:r,ni:k,ie:0===k}),trackingTitle:"cartIcon"}}})}),[r,k,e,g]);return L("div",{className:"KHbUY u",children:[L(A,{icon:_e,variant:"clear",textVariant:"button-01",href:be(),onClick:y,"aria-label":v.string("cart_with_number_items",{0:`${k}`}),ref:h,children:[k>0&&E("span",{className:"kJObT Rb _Q j",children:E(j,{variant:"button-03",color:"invertText",children:k})}),E("span",{className:"OfgkF",children:E(N,{id:"attractions.cart_button_acc"})})]}),b&&c&&E(Oe,{triggerRef:h,isCartEmpty:0===k})]})},Ji=()=>{var{page:e}=m(),i=y(),n=!ui.has(i),l="AttractionToursAndTickets"===e||"AttractionsHome"===e||"AttractionsNear"===e||"ShoppingCart"===e||"AttractionsFusion"===e||"Attraction_Review"===e||"AttractionProductsFusion"===e||"AttractionProductReview"===e,a=g({experimentKeys:["add_shopping_cart_icon_across_ta_1652149198"]},!n);return(null!=a&&"test"===a.add_shopping_cart_icon_across_ta_1652149198||l)&&n},Xi=e=>{var i=I(),a=m(),o=p(),[s,c]=n(!0),u=r(o),d=z(),h=l((e=>{d({actionType:"click",itemName:e,page:a.page})}),[d,a]),g=l((()=>{s&&(setTimeout(e.close,250),c(!1))}),[s,c,e.close]);t((()=>{o!==u.current&&g()}),[o,g]);var v=encodeURIComponent(a&&"/Unknown"!==a.path?a.path:"/");return["Trust","TrustHome"].includes(a.page)?E(mi,{isOpen:s,onClose:g}):s?E(q,{inline:"div",onClose:()=>{h("close_modal"),g()},children:L("div",{className:"rKRYa Gg Cj z",children:[L(j,{variant:"title-03",children:[E(N,{id:"b2b_top_nav_account"})," "]}),L("div",{className:"f u Mk",children:[E("div",{className:"ysQao",children:E(T,{source:e.avatarSource})}),E(j,{variant:"title-05",marginLeft:"spacing-02",children:e.displayName})]}),e.profileUrl&&E(P,{size:"large",variant:"primary",fullWidth:!0,href:e.profileUrl,marginTop:"spacing-03",onClick:()=>h("view_profile"),children:E(N,{id:"ip_view_profile_1cf1"})}),e.isOwner&&L(D,{children:[E(O,{href:"/Owners",marginY:"spacing-04",onClick:()=>h("my_business"),children:E(N,{id:"global_nav_profile_my_business"})}),E(Re,{})]}),E(O,{href:"/Bookings",marginY:"spacing-04",onClick:()=>h("bookings"),children:E(N,{id:"my_bookings_headtext_fffff9b3"})}),E(Re,{}),E(O,{href:"/Plus",marginY:"spacing-04",onClick:()=>h("plus"),children:E(N,{id:"mc_plus_productcard"})}),E(Re,{}),E(O,{href:"/Settings-cp",marginY:"spacing-04",onClick:()=>h("account_info"),children:E(N,{id:"mem_account_info"})}),null!=i&&E(P,{marginTop:"spacing-03",size:"large",variant:"secondary",fullWidth:!0,href:`/RegistrationController?flow=sign_out&pid=1&returnTo=${v}&fullscreen=true`,onClick:()=>h("sign_out"),children:E(N,{id:"common_Signout"})})]})}):null},qi=()=>{var{displayName:e,profileUrl:i,avatarSource:n,isOwner:l,fetching:a}=Ze();return a?E("div",{className:"Pi",children:E(Ae,{variant:"small"})}):null!=n?E(Qi,{isOwner:l,displayName:e,avatarSource:n,profileUrl:i}):E(Zi,{})},Zi=()=>{var{open:e}=x(),{trackWouldOpenExplicitPreferences:i}=U("ONBOARDING","JOIN_BUTTON"),n=_(),a=l((l=>{l.preventDefault(),n({flowOrigin:"login",pid:40486,flow:"sign_up_and_save",isFullWidthMobile:!0}).then((n=>{null!=n&&n.hasCreatedMember&&"TA"!==(null==n?void 0:n.loginProvider)&&(i(),e())}))}),[n,i,e]);return E(O,{onClick:a,marginTop:"spacing-03",children:E(N,{id:"common_Signin"})})},Qi=({displayName:e,profileUrl:i,avatarSource:n,isOwner:a})=>{var{localize:r}=C(),t=!!I(),{open:o}=k((({close:l})=>E(pi,{close:l,displayName:e,profileUrl:i,avatarSource:n,isOwner:a}))),s=z(),c=m(),u=l((()=>{s({actionType:"click",itemName:"MobileHeaderSignin",page:c.page})}),[s,c]),d=l((()=>{t&&o()}),[t,o]);return E("button",{className:"H0 G_ B-",onClick:()=>{u(),d()},title:r.string("b2b_top_nav_account"),"aria-label":r.string("b2b_top_nav_account"),children:E("div",{className:"nBECt",children:E(T,{source:n,size:"small",marginTop:"spacing-02"})})})},$i=()=>{var[e,i]=v("show_sign_in_on_mw_global_nav_1651502963");return["test"===e,i]},en="EJavG c _S",nn=({links:e,forceRenderSublinks:i=!1})=>{var[l,a]=n({});return E(ln,{links:e,parent:null,forceRenderSublinks:i,activeLinks:l,setActiveLinks:a},"root")},ln=({links:e,activeLinks:i,setActiveLinks:n,level:l=0,parent:a=null,forceRenderSublinks:r=!1})=>{var t=0===l,o=l-1,s=t?"GMBKa":"ICbKN",c={};return e&&(t||r||i[o]&&(!i[o]||i[o]===a))?L(D,{children:[E("div",{className:s,children:e.map((e=>{var i;if(!e)return null;var a=e.preLocalizedAnchorText||e.localizedAnchorText||"";return e.sublinks&&(c[a]={level:l+1,sublinks:e.sublinks}),L("a",{href:null!=(i=e.url)?i:"",className:"cJTqz S4 _S",onMouseEnter:()=>n((e=>{for(var i={...e},n=Object.keys(e),r=l;r<=n.length;r++)delete i[r];return i[l]=a,i})),children:[a,e.sublinks&&e.sublinks.length&&E("span",{className:"ceaAt X0",children:E(Le,{size:16})})||null]},`${a}_${null===e.url?"":e.url}`)}))}),Object.keys(c).map((e=>0===c[e].sublinks.length?null:E(ln,{links:c[e].sublinks,level:c[e].level,parent:e,forceRenderSublinks:r,activeLinks:i,setActiveLinks:n},e)))]}):null},an=({anchorRef:e,parentPtr:i,link:n,active:l,activeDropdown:a,hideSublinks:t})=>{var o,c=r(null),u=n.preLocalizedAnchorText||n.localizedAnchorText;return L(D,{children:[E("a",{ref:e,className:s(en,{JlIuS:l&&null!==u}),href:null!=(o=n.url)?o:"",children:E("span",{ref:c,className:"fxMOE",children:u||E(Ee,{size:26})})}),a&&!t&&n.sublinks&&n.sublinks.length&&E(Me,{hoverChainParent:i,children:e=>E(ze,{below:!0,fullBleed:!0,anchor:c.current,shiftY:-1,alignEdge:"left",arrowType:"none",closeButton:!1,children:E("div",{ref:e,className:"iACRF",children:E(nn,{links:n.sublinks,forceRenderSublinks:!1})})})})||null,!a&&!t&&n.sublinks&&n.sublinks.length&&E("div",{className:"HrWEV",children:E(nn,{links:n.sublinks,forceRenderSublinks:!0})})||null]})},rn=({scope:e})=>{var i,l,a,r=m(),{navLinks:t,fetching:o}=De(e),c=He(),[d,p]=n([]),h=(e=>{switch(e){case"Attractions":case"AttractionsFusion":case"AttractionProductReview":case"Attraction_Review":return"attractions";case"Tourism":return"scoped-home";case"RentalCars":case"RentalCarsAirport":case"RentalCarsGeo":return"cars";case"VacationRentals":case"VRACSearchServlet":case"VacationRentalsNear":case"VacationRentalsOverview":case"VacationRentalsRedesign":case"VRACSearch":return"vr";case"Flights":return"flights";case"Hotels":case"HotelsFusion":case"HotelsList":case"HotelsListFusion":return"HOTELS";default:return null}})((i=r.page,l=null==e?void 0:e.page,"Unknown"!==i?i:l)),g="flights"===h,v="cars"===h;return t?a=t.filter((e=>e)).map((e=>{if(!e)return null;var i=(e.linkId||"").toLowerCase();if(c&&(i.includes("flights")&&!g||i.includes("cars")&&!v))return null;var n=c&&(i.includes("scoped-home")||i.includes("tourism")),l=e.preLocalizedAnchorText||e.localizedAnchorText;return E(Me,{mouseOverHandler:()=>{p((e=>[l,...e]))},mouseOutHandler:()=>{p((e=>e.filter((e=>e!==l))))},children:(i,a)=>E(an,{anchorRef:i,parentPtr:a,link:e,active:h===e.linkId,activeDropdown:d.indexOf(l)>=0,hideSublinks:n})},l)})):(a=Array.from({length:8},((e,i)=>E("div",{className:s("uzGJK Gh R2",en)},i)))).push(null),E("nav",{className:"GkCdk S4 z","data-test-target":"global-nav",children:E(u,{children:L("div",{className:"rwZCF k",children:[E("div",{className:"fOydb o",children:a.slice(0,-1)}),a.slice(-1),E(Ie,{component:xe.globalnav,status:(null==t?void 0:t.length)>0?Ue.ok:Ue.missing,enabled:!o})]})})})},tn=["ForumHome"],on=["Attraction_Review","AttractionProductReview"],sn=()=>{var{page:e}=m(),{opfs:i,fetching:n}=Be(!0),l=!tn.includes(e),a=!on.includes(e);return E(u,{children:L("div",{className:"gUYOj f k O Cj Pf PN Ps PA",children:[E("div",{"data-automation":"breadcrumbs",className:"Nm",children:l&&E(Fe,{})}),E(we,{component:xe.masthead,enabled:!n&&a,children:a&&null!=i&&i.MASTHEAD_H1?E("h1",{"data-automation":"masthead_h1",className:"Wi _m H0",children:E(j,{variant:"supporting-02",display:"inline",children:i.MASTHEAD_H1})}):null})]})})},cn=({scope:e})=>{var i,l=m(),a=p(),[r,g]=n(!1),v=h(),f=di(),_="Home"===l.page,b=_&&!v||"Search"===(null==e?void 0:e.page),[k,N]=n(b);b&&k&&(i=[!1,!0,!0]),"Plus"===l.page&&(i=[!0,!0,!0]);var C="Plus"===l.page,y=c((e=>{g(!e)})),S=c(_?e=>{N(!!e)}:null,350),T="MOBILE"===o(),[P,O]=gi();return t((()=>{T&&!v&&O()}),[T,v,O]),L(d,{children:[_&&L(D,{children:[E("div",{ref:y}),E("div",{ref:S})]}),E("header",{className:s("tfxmn Cj",{"pKudm t Z1":_,CCSra:r&&_}),children:E(u,{children:L("nav",{className:s("pmElb",{FUacy:v}),children:[!v&&!P&&L(D,{children:[E(ni,{scope:e}),E(si,{})]}),!v&&P&&L(D,{children:[L("div",{className:"gHaPn",children:[E(ni,{scope:e,hideSignInAndSignOut:!0}),E(si,{logoOnly:!0})]}),L("div",{className:"FrDzo",children:[E(ni,{scope:e}),E(si,{})]})]}),v&&L("div",{className:"gWpuE",children:[E(si,{}),E(ni,{scope:e})]}),L("div",{className:s("kgJZH",{CfAFF:f&&!P,SoYKe:!v&&P}),children:[!v&&P&&E("div",{className:"MVbqW",children:E(hi,{})}),v&&E("div",{className:"NPPmq",children:E(li,{scope:e,isSearchHidden:i},a)}),!v&&E(li,{scope:e,isSearchHidden:i},a),L("div",{className:"JNlKm",children:[!C&&E(ti,{scope:e}),v&&E(li,{scope:e,isSearchHidden:i},a),E(oi,{})]}),f&&E(ci,{})]})]})})})]})},un=e=>E(f,{experiments:{},deferredImpressionExperiments:{show_sign_in_on_mw_global_nav_1651502963:{routes:"*"}},children:E(cn,{...e})});return[()=>{var n;Ge=vi,We=ki,Ve=Ni,Ke=Ci,je=Ti,Ye=Pi,Je=Oi,Xe=wi,qe=Ii,Ze=Ui,Qe=M.onComponentUsage((()=>i("bsx_H5")),"default"),$e=M.onComponentUsage((()=>i("mK1azf")),"MobileMainNavigation"),ei=new Set(["scoped-home"]),ii=Di,ni=Hi,li=Fi,ai=Gi,n=ce,ri=e=>{var{localize:i}=C();return L("div",{className:"XAjRs","aria-label":i.string("common.design_system.notification"),children:[E(n,{...e}),E("span",{className:"CxrxR _R Rb _U"})]})},ti=Wi,oi=Vi,si=ji,ci=Yi,ui=new Set(["el-GR","he-IL","id-ID","ko-KR","ru-RU","th-u-ca-gregory","tr-TR","vi-VN","ar-US-u-nu-latn","ar-EG-u-nu-latn"]),di=Ji,mi=M.onComponentUsage((()=>i("mK1azf")),"MobileMainNavigation"),pi=Xi,hi=qi,gi=$i,e({NavLinks:rn,OnPageAssets:sn,default:un})},[e=>(n=e.useState,l=e.useCallback,a=e.useMemo,r=e.useRef,t=e.useEffect),e=>o=e.useViewportCategory,e=>s=e.default,e=>c=e.useVisibleEffect,e=>u=e.default,e=>d=e.ToastProvider,e=>(m=e.useRoute,p=e.usePageviewUid),e=>h=e.default,e=>(g=e.default,v=e.useExperimentWithDeferredImpression,f=e.AbTestingWithDeferredImpressionsProvider),e=>_=e.default,e=>b=e.default,e=>k=e.useVDOMPortal,e=>(N=e.default,C=e.useLocalize,y=e.useLocale),e=>S=e.useNavLinks,e=>T=e.Avatar,e=>(P=e.default,O=e.BorderlessButton,A=e.CircularButton,R=e.NotificationBellIconWithDot),e=>w=e.default,e=>I=e.useUserId,e=>x=e.default,e=>U=e.default,e=>M=e,e=>(E=e.jsx,L=e.jsxs,D=e.Fragment),e=>(H=e.useInteractionLogger,z=e.useInteractionV3Logger,F=e.useGARecorder),e=>B=e.useOptimusNavToUnbounce,e=>G=e.useOptimusEnabledForUser,e=>W=e.useIsDiningClubMemberLoggedIn,e=>V=e.usePaymentStatus,e=>K=e.default,e=>j=e.default,e=>Y=e.useQuery,e=>J=e.useInteractionLogger,e=>X=e.useOptimusSubscription,e=>q=e.Modal,e=>(Z=e.RadioGroup,Q=e.RadioButton),e=>$=e.useTheme,e=>ee=e.useInvalidatableQuery,e=>ie=e.GeoPillSponsor,e=>ne=e.requestLocation,e=>(le=e.default,ae=e.pageToTypeMappings),e=>re=e.OptimusTextLogo,e=>te=e.default,e=>oe=e.default,e=>se=e.default,e=>ce=e.default,e=>ue=e.DropdownMenu,e=>de=e.useKeyboardFocusableClassName,e=>me=e.useUserAgent,e=>pe=e.useImpressionV3Logger,e=>he=e.useMemberProfileBookings,e=>ge=e.default,e=>ve=e.fetchCartSummary,e=>fe=e.useIsRobotSafe,e=>_e=e.default,e=>be=e.useCartUrlWithFunnelKey,e=>(ke=e.useStorageForCartCount,Ne=e.getLocalStorageCartCount,Ce=e.setLocalStorageCartCount),e=>ye=e.default,e=>Se=e.setCartInfoWithoutProduct,e=>Te=e.useSessionId,e=>(Pe=e.useCartIconPopoverEnabled,Oe=e.CartIconPopover),e=>Ae=e.Spinner,e=>Re=e.default,e=>(we=e.default,Ie=e.StatusCounter,xe=e.Component,Ue=e.Status),e=>Me=e.default,e=>Ee=e.default,e=>Le=e.default,e=>De=e.useSeoNavLinks,e=>He=e.default,e=>ze=e.Popover,e=>Fe=e.BreadcrumbsInHeader,e=>Be=e.useOnPageFactorsWithStatus]]},["cDcdfi","oVKaZR","jSLlaY","PUj9cw","OC9u-G","Q7TAd7","F8raOV","cNxigm","S-RL4Q","mv7yXI","FSK9SR","vq6MSq","0DsHEV","xsqNye","7vyllf","7yGKf-","R5mFUK","ukkKxE","x5AnXu","2NwMnm","pLbCP4","F5FCuN","fsml46","tVuenP","v_y45t","941Zf4","a8cI6n","_cZwhS","VP50Wc","5X2em-","zHdDWu","BWm3Dg","E1X9WP","MsxLpS","d7tPMo","OnmvvE","06lnvq","fiorRT","Kv5xL1","TkeYrn","mhckab","sHdhNM","LeTNY3","8XXl8D","MCrJhI","W3_c4H","slAn47","30t50h","0uWw9s","GNeh8X","W15VPO","4Z07E2","KVPkQ6","agWPHr","XxFPum","igzpAK","MNe656","VJ7DQx","xfnW1G","Ly5eaD","jPSRY1","il7j5o","mHPUmd","BQgc0E","l74tu_","Z_Ebpb","zXGKDf","eDFcUX","meOI_T","QZqymc"]]);
