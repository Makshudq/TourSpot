(this.$WP=this.$WP||[]).push(["ABlMo4",(e,l)=>{"use strict";var t,a,i,n,r,o,u,s,d,c,T,p,I,y,h,g,O,R,_,E,m,S,A,N,f="0123456789ABCDEF",L=e=>{var l=t(e||"");if(""===l.current){var a=Array(32).fill(0).map((()=>f[Math.floor(Math.random()*f.length)])).join("");l.current=`${a}${String(Date.now())}ssid`}return l.current},v=(e,l,t,n,o,u,s)=>{var d=r(),{page:c}=d,[p,I]=a(""),[y,h]=a(n),g=T(),O=null!=o.geoId&&o.geoId>1?o.geoId:1,R=i((()=>{h(n);var l=String(Date.now());I(l),g({Typeahead:{startEvent:{typeaheadId:l,searchSessionId:e,uiOrigin:t,scope:String(O),page:c,beforeQuery:n,afterQuery:n,totalNum:u}}})}),[t,e,n,h,O,c,g,u]),_=i(((a,i,r,o,d,T,I,h)=>{g({Typeahead:{selectEvent:{typeaheadId:p,searchSessionId:e,resultsId:l,uiOrigin:t,scope:String(O),page:c,beforeQuery:y,afterQuery:n,totalNum:u,value:T,errors:s?[s]:null,fromHistory:i,selDepth:r+1,placeType:I||null,dataType:d,selectionUrl:h||null,selectionMethod:a,selectedDocumentId:T,durationResultsShown:o?Date.now()-o:-1}}})}),[t,e,l,n,y,O,p,u,s,g,c]);return{logTypeaheadOpened:R,logResultSelection:i(((e,l,t,a,i)=>{_(e,l,a,i,t.trackingType,t.key,t.trackingPlaceType||null,t.url)}),[_]),logQuickLinkSelection:i(((e,l,t,a)=>{_(e,!0,-1,l,"QUICK_LINK",`QUICK_LINK_${t}`,t,a)}),[_]),logSearchAction:i((a=>{g({Typeahead:{searchEvent:{typeaheadId:p,searchSessionId:e,resultsId:l,uiOrigin:t,scope:String(O),page:c,beforeQuery:y,afterQuery:n,totalNum:u,errors:s?[s]:null,durationResultsShown:a?Date.now()-a:-1}}})}),[t,e,l,n,y,O,p,u,s,c,g]),startQuery:y,typeaheadId:p}},C={__key:0xc9d791589f93,id:"c9d791589f937ec371723f236edc7c6b",loc:{},definitions:[]},k=(e,l,t)=>{var a=null!=t.latitude&&null!=t.longitude,i={q:e,searchSessionId:l,searchNearby:a?"true":"",latitude:null!=t.latitude?String(t.latitude):"",longitude:null!=t.longitude?String(t.longitude):"",geo:a?"":String(t.geoId)};return`/Search?${new URLSearchParams(i).toString()}`},U=["ACCOMMODATION","EATERY","ATTRACTION","CAR_RENTAL_OFFICE"],D=(e,l,t)=>{var a=[];if(!e||!e.Typeahead_autocomplete||!e.Typeahead_autocomplete.results)return{results:a,resultsId:""};var{results:i,resultsId:n}=e.Typeahead_autocomplete,r=i.reduce(((e,l)=>{var t,a,i;if("Typeahead_LocationItem"===(null==l?void 0:l.__typename)&&null!=(null==(t=l.details)?void 0:t.placeType)&&null!=l.details.localizedName&&null!=(null==(a=l.details.locationV2)||null==(i=a.names)?void 0:i.longOnlyHierarchyTypeaheadV2)&&null!=l.locationId){var{locationId:n}=l,{localizedName:r,placeType:o}=l.details,u=l.details.locationV2.names.longOnlyHierarchyTypeaheadV2;if(null!=u){var s=r+u+o;if(!Object.keys(e).includes(s)){var d={};d[s]=[],Object.assign(e,d)}e[s].push(n)}}return e}),{}),o=Object.values(r).filter((e=>Array.isArray(e)&&e.length>1)).flatMap((e=>e)),s=e=>{var l,t;if(("Typeahead_ListResultItem"===e.__typename||"Typeahead_LocationItem"===e.__typename)&&null!=e.locationId&&null!=(null==(l=e.details)||null==(t=l.locationV2)?void 0:t.names)){var a="Typeahead_LocationItem"===e.__typename&&null!=e.details.placeType&&U.includes(e.details.placeType)&&null!=e.details.streetAddress&&null!=e.details.streetAddress.street1&&o.includes(e.locationId)?e.details.streetAddress.street1:null,i=e.details.locationV2.names.longOnlyHierarchyTypeaheadV2;if(null!=i)return null==a?i:`${a}, ${i}`}return null};return i.forEach((e=>{var i,n;if(null!=e){var r=((e,l)=>{var t,a,i,n;return e.linkType?"VACATION_RENTALS"===e.linkType?"Typeahead_ListResultItem"===l.__typename||"Typeahead_LocationItem"===l.__typename?null==(a=l.details)||null==(i=a.locationV2)||null==(n=i.vacationRentalsRoute)?void 0:n.url:null:"Typeahead_LocationItem"===l.__typename&&!0===(null==(t=l.details)?void 0:t.isGeo)?l.details[`${e.linkType}_URL`]:null:null})(t,e);switch(e.__typename){case"Typeahead_LocationItem":if(null!=e.locationId&&e.details&&null!=e.details.localizedName&&null!=e.details.url){var o,d,c=!e.details.isGeo,T=null!==e.highlightingInfo&&null!=e.highlightingInfo[0]?[e.highlightingInfo[0].length,e.highlightingInfo[0].offset]:null;a.push({searchText:e.details.localizedName,title:e.details.localizedName,highlightingInfo:T,url:null!=r?r:e.details.url,image:c?null==(o=e.details.thumbnail)?void 0:o.photoSizeDynamic:null,key:`LOCATION_${e.documentId}`,subtitle:s(e),trackingType:"LOCATION",trackingPlaceType:null==(d=e.details)?void 0:d.placeType,locationId:e.locationId})}break;case"Typeahead_UserProfileItem":if(null!=(null==(i=e.details)?void 0:i.username)&&null!=e.details.displayName&&null!=(null==(n=e.details.route)?void 0:n.url)){var I,y=e.details.displayName;!0===e.details.isVerified&&(y=_(E,{children:[y," ",R(p,{size:16,color:"verifiedCheckMarkIcon"})]}));var g,m=`@${e.details.username}`;null!=e.details.followerCount&&(g=!0===e.details.isFollowing?R(u,{id:"social_nowFollowing"}):R(u,{id:"social_nCount_followers2",args:{0:e.details.followerCount}}),m=R(u,{id:"m2_trips_detail_date_display",args:{0:m,1:g}})),a.push({searchText:e.details.displayName,title:y,subtitle:m,url:e.details.route.url,icon:h,image:null==(I=e.details.avatar)?void 0:I.photoSizeDynamic,imageVariant:"avatar",trackingType:"USER_PROFILE",key:`USER_${e.documentId}`})}break;case"Typeahead_QuerySuggestionItem":if(null!=e.text){var S,N,f=null==(S=e.parentGeoDetails)||null==(N=S.names)?void 0:N.longOnlyHierarchyTypeaheadV2,L=null!==e.highlightingInfo&&null!=e.highlightingInfo[0]?[e.highlightingInfo[0].length,e.highlightingInfo[0].offset]:null;a.push({searchText:e.text,title:e.text,highlightingInfo:L,subtitle:f,image:null,url:e.route&&e.route.url||k(e.text,l,t),icon:null!=e.buCategory&&A.get(e.buCategory)||O,trackingType:"QUERY_SUGGESTION",key:e.documentId})}break;case"Typeahead_RescueResultItem":null!=e.text&&a.push({searchText:e.text,title:R(u,{id:"see_all_results_for",args:{query:e.text}}),url:k(e.text,l,t),icon:O,trackingType:"SEARCH",key:`SEARCH_${e.documentId}`});break;case"Typeahead_ListResultItem":if(null!=e.locationId&&null!=e.documentId&&null!=e.listResultType&&null!=e.details&&null!=e.details.localizedName){var v,C,U,D,G,H,b=e.listResultType;if("/ShowForum"===(H="FORUM"===b?(null==(G=e[`${b}ListURL`])?void 0:G.url)||"":e.details[`${b}ListURL`]||"")||""===H)break;var P=(()=>{switch(b){case"HOTEL":return R(u,{id:"common_Hotels"});case"RESTAURANT":return R(u,{id:"common_Restaurants"});case"ATTRACTION":return R(u,{id:"common_Thingstodo"});case"FORUM":return R(u,{id:"common_Forums"});default:return""}})();a.push({searchText:(null==(v=e.details)?void 0:v.localizedName)||"",title:R(u,{id:"m2_trips_detail_date_display",args:{0:P,1:(null==(C=e.details)?void 0:C.localizedName)||""}}),subtitle:s(e),url:H,icon:O,image:null==(U=e.details)||null==(D=U.thumbnail)?void 0:D.photoSizeDynamic,trackingType:"LIST_RESULT",locationId:e.locationId,key:`LIST_RESULT_${b}_${e.documentId}`})}}}})),{results:a,resultsId:null==n?"unknown":n}},G={results:[],resultsId:""},H={batch:!1},b=["default","love_your_local","insurance_lander"],P=["typeahead-q"],w=(e,l,i,r,u=10,T,p)=>{var[I,y]=a(G),h=m(p),{logTypeaheadOpened:g,logResultSelection:O,logQuickLinkSelection:R,logSearchAction:_,typeaheadId:E}=S(h,I.resultsId,l,e,i,I.results.length),A=((e,l)=>{var[i,r]=a(e),o=t(Date.now());return n((()=>{var l=Date.now(),t=100-(l-o.current);if(t<=0)return o.current=l,void r(e);var a=setTimeout((()=>{o.current=Date.now(),r(e)}),t);return()=>clearTimeout(a)}),[e,100]),i})(e),f=d(),L=s(),v=o(),k=null!=i.latitude&&null!=i.longitude?{latitude:i.latitude,longitude:i.longitude}:null,U=null!=i.geoId?i.geoId:0,D="WORLDWIDE";U>1&&"LocationTypeahead"!==r?D="IN_GEO_EXTEND_WORLDWIDE":U>1&&"LocationTypeahead"===r?D="IN_GEO":null!=k&&(D="NEAR_POSITION_EXTEND_WORLDWIDE");var w=i.pageType,x={listResultType:w,searchSessionId:h,typeaheadId:E,uiOrigin:l,routeUid:v,userLocation:i.userLocation},F=["LOCATION","QUERY_SUGGESTION","USER_PROFILE","RESCUE_RESULT",...null!=w?["LIST_RESULT"]:[]],V={query:A,limit:u,scope:D,locale:L,scopeGeoId:U,searchCenter:k,types:F,locationTypes:["GEO","AIRPORT","ACCOMMODATION","ATTRACTION","ATTRACTION_PRODUCT","EATERY","NEIGHBORHOOD","AIRLINE","SHOPPING","UNIVERSITY","GENERAL_HOSPITAL","PORT","FERRY","CORPORATION","VACATION_RENTAL","SHIP","CRUISE_LINE","CAR_RENTAL_OFFICE"],userId:f,context:x,articleCategories:b,enabledFeatures:P};"GeoPicker"===r&&l.includes("RESTAURANTS")||"LinkTypeSearch"===r&&"RESTAURANTS"===i.linkType?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","NEIGHBORHOOD","EATERY"]):"GeoPicker"===r&&l.includes("HOTELS")||"LinkTypeSearch"===r&&"HOTELS"===i.linkType?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","NEIGHBORHOOD","ACCOMMODATION"]):"GeoPicker"===r&&l.includes("ATTRACTIONS")||"LinkTypeSearch"===r&&"ATTRACTIONS"===i.linkType?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","ATTRACTION","ATTRACTION_PRODUCT","NEIGHBORHOOD"]):"GeoPicker"===r?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","NEIGHBORHOOD"]):"LocationTypeahead"===r&&(V.types=["LOCATION"],T&&(V.locationTypes=T));var[{data:Q,error:$},M]=c({query:C,variables:{request:V},context:H,pause:!0}),z=t(M);return n((()=>{z.current=M})),n((()=>{if(!$){var e=N(Q,h,i);y(e)}}),[Q,$,h,i]),n((()=>{(e=>e&&e.length>=1)(A)?z.current():y(G)}),[A]),{results:I,logTypeaheadOpened:g,logResultSelection:O,logQuickLinkSelection:R,logSearchAction:_,searchSessionId:h}};return[()=>{m=L,S=v,A=new Map([["SEARCH",O],["ATTRACTIONS",I],["HOTELS",y],["RESTAURANTS",g]]),N=D,e({MIN_QUERY_LENGTH:1,default:w})},[e=>(t=e.useRef,a=e.useState,i=e.useCallback,n=e.useEffect),e=>(r=e.useRoute,o=e.usePageviewUid),e=>(u=e.default,s=e.useLocale),e=>d=e.useUserId,e=>c=e.useQuery,e=>T=e.useInteractionLogger,e=>p=e.default,e=>I=e.default,e=>y=e.default,e=>h=e.default,e=>g=e.default,e=>O=e.default,e=>(R=e.jsx,_=e.jsxs,E=e.Fragment)]]},["cDcdfi","F8raOV","0DsHEV","ukkKxE","5X2em-","fsml46","PC6zgt","2G8iY6","YCW2WX","3gj0sT","X3dUVA","zeV7p9","F5FCuN"]]);
