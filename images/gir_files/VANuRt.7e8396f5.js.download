(this.$WP=this.$WP||[]).push(["VANuRt",(e,r)=>{"use strict";var o,n,a,i,l,t,s,d,c,u,g,h,p,w,f,S,v,m,O,y,C="https://smartlock.google.com",b=({options:e,onReady:r,onShowOverlay:i,onFlowStepChange:l,forwardedRef:t,scrolling:s="auto"})=>{var[d,c]=o(),[u,g]=o(),[h,m]=o(!1),O="MOBILE"===p(),{onSuccess:y,isFullWidthMobile:b}=e,I=n((e=>{var r,o=e.resultData||"";if(o){var n=(e=>{var r={};try{r=JSON.parse(e)}catch(r){return console.error(`Error parsing controller result data: ${e}`),null}return"object"!=typeof r?(console.error("Parsed controller result is not an object."),null):{userId:r.user_id,hasCreatedMember:!!r.hasCreatedMember,hasAcceptedTermsOfUse:!!r.hasAcceptedTermsOfUse,loginProvider:r.loginProvider}})(o);null!=n&&n.hasCreatedMember,y&&y(n)}else y&&y(null);e.jsCallback&&(r=e.jsCallback)&&console.error(`Non-empty JSCallback is returned from RegController: ${r}`)}),[y]),R=n((e=>{e>100&&c(O&&b?"100%":e)}),[O,b]),{displayOnShowOverlay:k,onClose:F,onFailure:M}=e,P=n((o=>{var n=o,a=(e=>{if(!e)return null;if(!e.origin||0!==e.origin.indexOf("https")||e.origin!==document.location.origin)return null;if(!e.data||!e.data.indexOf||-1===e.data.indexOf("action"))return null;try{var r=JSON.parse(e.data);return r.action?r:null}catch(e){return null}})(n);if((e=>{e&&e.origin&&0===e.origin.indexOf(C)&&e.data&&e.data.type&&e.source&&e.source.postMessage({type:"verifyAck",data:e.data.data},{targetOrigin:C})})(n),a){var{action:t}=a;switch(t){case"successClose":I(a);break;case"reloadWindow":console.error("Unexpected reload window message is received from RegController iframe");break;case"fwdToRelativeUrl":var s=a.url||"";s||console.error("No url specified to forward to."),0!==s.indexOf("/")&&console.error(`Cannot forward to absolute url: ${s}`),window.location=s;break;case"resizeFrame":R(a.width),a.height>100&&(e.ignoreScreenHeight?g(a.height):g(Math.min(a.height,window.innerHeight)));break;case"domReady":m(!0),r&&r();break;case"dismiss":F&&F();break;case"showOverlay":k&&i&&i();break;case"generalError":M&&M();break;case"splash":case"regSignIn":case"regSignUp":case"regForgotPassword":l&&l(t)}}}),[e.ignoreScreenHeight,I,k,i,l,F,r,R,M]);f("message",P);var x=a((()=>{var r=e.extraQueryParams||{};Object.keys(r).forEach((e=>{void 0===r[e]&&delete r[e]}));var o=new URLSearchParams({flow:e.flow,flowOrigin:e.flowOrigin,pid:`${e.pid}`,hideNavigation:"true",userRequestedForce:"true",returnTo:"",isLithium:"true",...r});return e.mcid&&o.append("mcid",`${e.mcid}`),e.locationId&&o.append("locationId",`${e.locationId}`),e.stateToken&&o.append("stateToken",e.stateToken),void 0!==e.requireSecure&&o.append("requireSecure",`${String(!!e.requireSecure)}`),`/RegistrationController?${o.toString()}`}),[e.extraQueryParams,e.flow,e.flowOrigin,e.locationId,e.mcid,e.pid,e.requireSecure,e.stateToken]);return v("div",{className:w("lpwrL o B-",{Ra:!O}),style:{width:d,height:u},children:v(S,{className:"bFOrV _R B- o",src:x,title:"regcontroller",style:{width:d,height:u,display:h?"block":"none"},ref:t,scrolling:s})})},I=({options:e,closeX:r})=>{var i="MOBILE"===p(),[l,t]=o(!1),s=n((()=>{e.displayOnShowOverlay||t(!0)}),[e.displayOnShowOverlay]),d=n((()=>{t(!0)}),[]),c=a((()=>v(O,{options:e,onReady:s,onShowOverlay:d})),[s,e,d]);return m(g,{onClose:e.onClose,containerProps:{backgroundColor:"transparent",disableBodyScroll:!0},bodyProps:{isFullBleed:!0},enableCloseIcon:l&&r,roundedCorners:!i,hideBoxShadow:e.hideBoxShadow,children:[v("div",{style:{display:l?"block":"none"},children:c}),!l&&v("div",{className:"bJuxk",children:v(h,{size:"large",variant:"primary"})})]})},R=()=>{var e=c(),r=d(),a=u(),{geoId:g}=r.params,[h,p]=o({flow:"CORE_COMBINED",flowOrigin:"join",pid:-1}),[w,f]=o({closeX:!0}),S=s(),m=i(void 0),O=t((()=>v(y,{options:h,closeX:w.closeX})),{},[h,w]);return{login:n((o=>e&&!o.forceLogin?Promise.resolve({userId:e,hasCreatedMember:null}):m.current?m.current:l()?("undefined"!=typeof window&&(window.location.href=`/RegistrationController?flow=${encodeURIComponent(o.flow||"CORE_COMBINED")}&pid=${encodeURIComponent(String(o.pid||-1))}&returnTo=${encodeURIComponent(r.path)}&fullscreen=true`),new Promise((()=>{}))):(m.current=new Promise((e=>{p({flow:o.flow||"CORE_COMBINED",flowOrigin:o.flowOrigin||"join",pid:o.pid||-1,isFullWidthMobile:o.isFullWidthMobile||!1,hideBoxShadow:o.hideBoxShadow||!1,extraQueryParams:o.extraQueryParams||{},displayOnShowOverlay:o.deferShowOverlay,requireSecure:o.requireSecure||!1,locationId:g||-1,onSuccess:r=>{var n={userId:(null==r?void 0:r.userId)||null,hasCreatedMember:!(null==r||!r.hasCreatedMember),loginProvider:null==r?void 0:r.loginProvider};o.onSuccess&&o.onSuccess(n),O.close(),m.current=null,a({userId:n.userId}),e(n)},onClose:()=>{S({module:"regoverlay",action:"closed",context:[g||"",o.flow].join("|"),value:o.pid||void 0,nonInteraction:!1}),O.close(),m.current=null,o.onClose&&o.onClose()},onFailure:()=>{o.onFailure&&o.onFailure()}}),f({closeX:!1!==o.closeX}),O.open()})),m.current)),[e,r.path,g,O,a,S]),close:O.close}},k=({flow:e,flowOrigin:r="login",pid:o=-1,isFullWidthMobile:n=!1,forceLogin:a=!1,extraQueryParams:i={},deferShowLogin:l=!0,requireSecure:t=!1,ignoreScreenHeight:s=!1,onLoginSuccess:d,onLoginFailure:g,onShowOverlay:h,onFlowStepChange:p,forwardedRef:w,scrolling:f})=>{var S=c(),m=u();return S&&!a?null:v(O,{options:{flow:e,flowOrigin:r,pid:o,isFullWidthMobile:n,extraQueryParams:i,displayOnShowOverlay:l,requireSecure:t,ignoreScreenHeight:s,onSuccess:e=>{m({userId:(null==e?void 0:e.userId)||null}),d&&d()},onFailure:()=>{g&&g()}},onShowOverlay:h,onFlowStepChange:p,forwardedRef:w,scrolling:f})};return[()=>{O=b,y=I,e({AuthGate:k,default:R})},[e=>(o=e.useState,n=e.useCallback,a=e.useMemo,i=e.useRef),e=>l=e.default,e=>t=e.useVDOMPortal,e=>s=e.useGARecorder,e=>d=e.useRoute,e=>(c=e.useUserId,u=e.useAuthenticate),e=>g=e.default,e=>h=e.LoadingSpinner,e=>p=e.useViewportCategory,e=>w=e.default,e=>f=e.useWindow,e=>S=e.EmbeddedContent,e=>(v=e.jsx,m=e.jsxs)]]},["cDcdfi","SfdMbo","vq6MSq","fsml46","F8raOV","ukkKxE","O8LbtK","V08PS7","oVKaZR","jSLlaY","Dg5_-9","m5ZZFI","F5FCuN"]]);
