(this.$WP=this.$WP||[]).push(["WtjXQS/UKJvNl",(e,a)=>{"use strict";var s,t,i,o,n,r,c,l,u,d,p,g,f,_,m,k,b,v,h,w,N,E,O,C,x,y,F,P,D,B,L=({triggerNext:e,onPopupDismiss:a})=>{var t=r(),i=n(),o=l(),p="MOBILE"===c(),g=()=>{},f=e||g;return s((()=>{(u(i)||o)&&a&&a()}),[o,p,a,t,i]),u(i)||o?null:_(F,{triggerNext:f,servletName:t.page,onDismiss:()=>{a&&a(),d(i)},trackWouldOpenExplicitPreferences:g,openExplicitPreferences:g,explicitPreferencesEnabled:!1})},A=({localize:e,viewportCategory:a,onDismiss:o,triggerNext:n,openExplicitPreferences:r,trackWouldOpenExplicitPreferences:c,explicitPreferencesEnabled:l,recordEvent:u,domainName:d,appIntegrationConfig:p,login:g})=>{var[h,w]=t(!1),[E,O]=t(!1),[C,x]=t(!1),y=i((()=>{C||x(!0)}),[C,x]),F=i((()=>{y(),u("facebook_onetap_closed"),o()}),[y,u,o]),P=i((()=>{w(!0),window.FB.Event.subscribe("xfbml.render",(()=>{u("facebook_onetap_rendered")})),window.FB.getLoginStatus((e=>{"connected"===e.status||"not_authorized"===e.status?O(!0):(x(!0),n())}))}),[w,O,x,n,u]),D=i((()=>{var{sdkUrl:e,appId:a,apiVersion:s}=p;if(e&&a&&s){var t=()=>{},i=new Promise((e=>{t=e}));!function(e,a,s){window.fbAsyncInit=()=>{window.FB.init({appId:e,version:a,status:!0,cookie:!0}),s()}}(a,s,t),i.then(P)}else n()}),[P,p,n]);s((()=>{if(C)n();else{u("facebook_onetap_requested");var{sdkUrl:e}=p;f(e||"","MEMX"),D()}}),[D,u,n,C,p]);var B=i((e=>{if(!e)return null;var a=e.split(".",2)[1];if(a){var s=atob(a);try{return JSON.parse(s)}catch(e){u("facebook_onetap_parseSignedRequestFailed")}}return null}),[u]),L=i((e=>{var a=B(e);a&&a.code&&(k.set("FacebookAuthCode2",a.code,{expires:new Date((new Date).getTime()+5e3),domain:d,path:"/"}),g({flow:"FACEBOOK_ONETAP",pid:40600,flowOrigin:"login",extraQueryParams:{social:"true"},deferShowOverlay:!0,onClose:()=>{F()},onSuccess:e=>{e&&e.userId&&(y(),e.hasCreatedMember&&(c&&c(),l&&r&&r()))}}))}),[g,y,c,F,d,l,r,B]),A=i((()=>{u("facebook_onetap_clicked"),window.FB.getLoginStatus((e=>{if("connected"===e.status){var{authResponse:a}=e;a&&a.accessToken&&L(a.signedRequest)}}))}),[u,L]);if(C||!h||!E)return null;var I={headline:e("onetap_message_unlock"),subhead:e("onetap_subhead_signin_alerts_deals")};setTimeout((()=>{window.FB.XFBML.parse()}),50),window.FB.Event.subscribe("auth.authResponseChange",(()=>{A()}));var R="MOBILE"===a;return m("div",{className:b("oZwqD D Gi B1 Z BB","RoZcR"),style:{bottom:R?"0px":"unset"},children:[_(N,{onClick:F}),m("div",{className:"QGCww w z",children:[_("div",{className:"dpfbx Ci b f u",children:_("div",{children:I.headline})}),_("p",{className:"fFBkN Mc Nb MA NC",children:I.subhead}),_("div",{className:"ZOVpo w",children:_("div",{className:"w",children:_("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":"continue_with","data-show-faces":"true","data-auto-logout-link":"false","data-use-continue-as":"true","data-scope":"email,user_hometown,user_friends,user_likes,user_location,user_status,user_photos",style:{width:"100%"}})})}),_("div",{className:"YMLar Ci",children:_(v,{id:"terms_and_policy_links",args:{0:"/pages/terms.html",1:"/pages/privacy.html",2:"legalLink"}})})]})]})},I={__key:0xb7c064a1dc73,id:"b7c064a1dc739c643393c7082b231ce7",loc:{},definitions:[]},R=({triggerNext:e,onPopupDismiss:a})=>{var{page:t}=r(),o=p.includes(t),{trackWouldOpenExplicitPreferences:u}=E("ONBOARDING","FB_ONETAP"),g=i((()=>{o&&u()}),[u,o]),f=()=>{},m=()=>{var s=e||f;a&&a(),s()},{localize:k}=h(),b=x(),v=c(),N=O(),F=C(),P=i((e=>{F({module:"facebook_onetap",action:e,context:`${t||"unknown"}`})}),[t,F]),B=w(),L=n(),A=l(),[{data:R,fetching:S,error:T}]=y({query:I,variables:{locale:B},pause:!!A});return s((()=>{!T&&R&&R.Facebook_getFbConnectConfig||a&&a()}),[T,R,a]),S?null:!T&&R&&R.Facebook_getFbConnectConfig?_(D,{onDismiss:()=>{a&&a(),d(L)},triggerNext:m,trackWouldOpenExplicitPreferences:g,appIntegrationConfig:R.Facebook_getFbConnectConfig,localize:k,viewportCategory:v,recordEvent:P,domainName:N,login:b}):(m(),null)},S=()=>{var[e,a]=t(!1),[d,p]=t("GOOGLE_ONETAP"),g=n(),f=l(),{page:m,params:k}=r(),b="MOBILE"===c();s((()=>{u(g)||f?a(!0):e&&a(!1)}),[e,f,g,a,m,k,b]);var v=i((()=>{p("FACEBOOK_ONETAP")}),[p]),h=()=>null,w=h,N=[],E="registration_dialog";switch(d){case"GOOGLE_ONETAP":N=["google_one_tap"],w=({dismiss:e})=>_(P,{triggerNext:v,onPopupDismiss:()=>{e()}}),E="google_one_tap";break;case"FACEBOOK_ONETAP":N=["facebook_one_tap"],w=({dismiss:e})=>_(B,{onPopupDismiss:()=>{e()}}),E="facebook_one_tap"}return o({factory:h,eventTypes:[],key:"skip_marketing_interstitial",tier:50,skip:!0}),o({factory:h,eventTypes:[],key:"skip_date_picker",tier:100,skip:!0}),o({factory:w,eventTypes:N,key:e?`skip_${E}`:E,tier:200,skip:e}),null};return[()=>{F=g.onComponentUsage((()=>a("454gno")),"default"),P=L,D=A,B=R,e("default",S)},[e=>(s=e.useEffect,t=e.useState,i=e.useCallback),e=>o=e.usePopupHierarchyRender,e=>n=e.useSessionId,e=>r=e.useRoute,e=>c=e.useViewportCategory,e=>l=e.useUserId,e=>(u=e.shouldSuppressRegistrationDialog,d=e.setRegDialogDismissed,p=e.HOTEL_SERVLETS),e=>(g=e,f=e.importScript),e=>(_=e.jsx,m=e.jsxs),e=>k=e.default,e=>b=e.default,e=>(v=e.UnsafeLocalize,h=e.useLocalize,w=e.useLocale),e=>N=e.CloseIcon,e=>E=e.default,e=>O=e.useDomainName,e=>C=e.useGARecorder,e=>x=e.default,e=>y=e.useQuery]]},["cDcdfi","vybtJq","VJ7DQx","F8raOV","oVKaZR","ukkKxE","MWFqPp","pLbCP4","F5FCuN","vmXh3M","jSLlaY","0DsHEV","xegF5W","2NwMnm","xDNC3X","fsml46","mv7yXI","5X2em-"]]);
