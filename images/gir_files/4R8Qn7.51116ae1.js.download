(this.$WP=this.$WP||[]).push(["4R8Qn7",(e,i)=>{"use strict";var o,r,a,n,s,t,l,c,u,d,p,m,g,b,f,y,h,C,k,S,T,v,I,_,M,x,L,N,K,P=({funnelKey:e,onSubscriberLogin:i,onNonSubscriberLogin:o})=>({content:y(f,{funnelKey:e,pid:40777,postLoginCallback:{onSubscriberLogin:i,onNonSubscriberLogin:o},variant:"testFreeTrial"}),accent:null,backgroundColor:"overlay"}),w=({closeModal:e})=>{var i="MOBILE"===I();return h("div",{className:"APxNt",children:[y(k,{marginBottom:"spacing-04",children:y(T,{variant:"plus-logo-short",height:44})}),h(S,{space:"spacing-03",children:[y(v,{variant:"expressive-display-03",children:y(C,{id:"plus_modal_existing_subscriber_header_v2"})}),y(v,{variant:"body-01",children:y(C,{id:"plus_modal_existing_subscriber_body"})})]}),y(k,{marginTop:"spacing-06",className:"LCeax w",children:h(k,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",children:[y(_,{variant:"primary",fullWidth:i,onClick:e,children:y(C,{id:"plus_trial_confirmation_explore_experiences"})}),y(M,{href:"/OptimusAccountManager",target:"_blank",marginTop:i?"spacing-05":void 0,onClick:e,children:y(C,{id:"plus_trial_confirmation_manage_membership"})})]})})]})},D=({closeModal:e})=>({content:y(L,{closeModal:e}),accent:null,backgroundColor:"overlay"}),O=({onClose:e,funnelKey:i})=>{var f=o((()=>i||c()),[i]),{page:h}=p(),C=m(),k=d(),S=g(),[T,v]=r(S?"checkout":"login"),I=l(),_=b(),M=a((e=>{I({actionType:"click",actionSubType:"OptimusFreeTrialModalInteraction",itemType:"optimusFreeTrialModalClick",team:"Plus",impressionKey:f,pageUid:C,itemName:e,itemId:T,page:h,sessionId:k,userId:S,customData:K})}),[f,I,C,T,h,k,S]),L=a((e=>{I({actionType:"click",actionSubType:"OptimusCheckoutModal",itemType:"optimusCheckoutModalBreadcrumbClick",team:"Plus",impressionKey:f,pageUid:C,itemName:"BreadCrumb",itemId:e,page:h,sessionId:k,userId:S,customData:K})}),[I,f,C,h,k,S]),P=a((()=>{e&&(e(),"confirmation"===T?(I({actionType:"click",actionSubType:"OptimusConfirmationModalInteraction",itemType:"optimusConfirmationModalClick",team:"Plus",impressionKey:f,pageUid:C,itemName:"Dismiss",itemId:T,page:h,sessionId:k,userId:S,customData:K}),window.location.reload()):M("Dismiss"))}),[e,T,M,I,f,C,h,k,S]),w=a((()=>{_({itemType:"optimusFreeTrialModal",itemName:"OptimusSubscriptionPurchaseError",itemId:T,team:"Plus",impressionKey:f,pageUid:C,sessionId:k,userId:S,page:h,customData:K})}),[_,f,C,T,h,k,S]),D=a((e=>{v(e),L(e)}),[L]),O={login:x({funnelKey:f,onSubscriberLogin:()=>{D("freeTrialAlreadySubscriber")},onNonSubscriberLogin:()=>{D("checkout")}}),freeTrialAlreadySubscriber:N({closeModal:P}),checkout:n({funnelKey:f,onPurchaseSuccess:()=>{D("confirmation")},onLearnMoreClick:()=>{M("LearnMore")},onPurchaseError:()=>{w()},variant:"attractions",freeTrialSubscription:!0,backgroundColor:"beige"}),confirmation:s({funnelKey:f,onClose:P,backgroundColor:"beige",variant:"attractions"})};return y(t,{currentStep:T,stepConfigMap:O,onClose:P,children:e=>y("div",{className:u({"JNfqk _a":["login","freeTrialAlreadySubscriber"].includes(T)}),children:e})})};return[()=>{x=P,L=w,N=D,K=JSON.stringify({bookingFlow:"experiences",checkoutType:"MODAL"}),e("default",O)},[e=>(o=e.useMemo,r=e.useState,a=e.useCallback),e=>(n=e.useCheckoutStepConfig,s=e.useConfirmationStepConfig),e=>t=e.ModalFlowWrapper,e=>l=e.useInteractionV3Logger,e=>c=e.uuid,e=>u=e.default,e=>d=e.useSessionId,e=>(p=e.useRoute,m=e.usePageviewUid),e=>g=e.useUserId,e=>b=e.useImpressionV3Logger,e=>f=e.default,e=>(y=e.jsx,h=e.jsxs),e=>C=e.default,e=>(k=e.Box,S=e.Stack),e=>T=e.default,e=>v=e.default,e=>I=e.useViewportCategory,e=>(_=e.default,M=e.BorderlessButton)]]},["cDcdfi","etSidO","mVzqU_","fsml46","O-HcBE","jSLlaY","VJ7DQx","F8raOV","ukkKxE","30t50h","gNyFpr","F5FCuN","0DsHEV","SzaY02","ohJPzG","VP50Wc","oVKaZR","7yGKf-"]]);
