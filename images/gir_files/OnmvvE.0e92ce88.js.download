(this.$WP=this.$WP||[]).push(["OnmvvE",(e,r)=>{"use strict";var t,a,i,n,s,o,c,u,l,h,d,v,y,f,p,g,b,m,P,k,x,q,w,E,C,S,Q,R,A,F,O,M,j,B,D,T,W,I,z,N,H,J,L,U,X,Y="invalidationPredicates",$=(e,r)=>{var a=e.executeWhen||"immediately",i=h.useMemo((()=>({[Y]:r})),[...Object.keys(r)]);return t({variables:e.variables,query:e.query,requestPolicy:"afterInvalidation"===a?"cache-only":e.requestPolicy,pause:"never"===a,context:i})},G=({children:e,invalidationPredicates:r,...t})=>{var[a,i]=$(t,r);return e({...a,executeQuery:i})},K=(e,r,t)=>e.executeQuery(a(r.query,r.variables),{...r.opts,[Y]:t}),V=(e,r)=>e.reexecuteOperation({...r,context:{...r.context,requestPolicy:"network-only"}}),_={},Z=(e,r)=>{var t=Array.from(z.keys());return e.forEach(((e,r)=>{var a=t[r];_[a]={...e,data:JSON.stringify(e.data),errors:void 0,error:Array.isArray(e.errors)?new i({graphQLErrors:e.errors}):void 0}})),_.extensions=r,e},ee=e=>z.size?A(e,Array.from(z.values())).then((({gqlResults:e,extensions:r})=>Z(e,r)),(e=>{console.error("ssrFetchExchange error from makeGraphQlCall:",e),Array.from(z.keys()).forEach((r=>{_[r]={data:null,fetching:!1,error:new i({networkError:e})}}))})):Promise.resolve(),re=()=>_,te=()=>Array.from(z.values()),ae=()=>0,ie=({query:e,variables:r,combineData:t,showFetchingAfterFirstQuery:i,invalidationPredicates:s={},executeWhen:o,requestPolicy:c})=>{var u=d(n),[l]=$({query:e,variables:r,executeWhen:o,requestPolicy:c},s),[h,f]=v(r),[p,g]=v(l);return y((()=>{f(r),g(l)}),[l.data,l.fetching,a(e,r).key]),[p,(r,a)=>{var n={...h,...r};f(n),i&&g({...p,fetching:!0});var o=p.data;return new Promise((r=>b(K(u,{query:e,variables:n,opts:a},s),R((({operation:e,stale:a=!1,...i})=>{null!=p.data&&p.data===o?g({...i,stale:a,fetching:!1,data:t(p.data,i.data)}):g({...i,stale:a,fetching:!1}),r()})))))}]},ne=(e,r,t,a)=>{var i;return e?(i=(i=e.length<t?[...e]:e.slice(0,t)).concat(r)).length<e.length&&e.slice(t+a).length&&r.length&&(i=i.concat(e.slice(i.length))):i=[...r],i},se=({query:e,variables:r,combineData:t,showFetchingAfterFirstQuery:i,invalidationPredicates:s,executeWhen:o})=>{var c=d(n),u={};s&&Object.entries(s).forEach((([e,t])=>{u[e]=t.bind(null,r)}));var[l]=$({query:e,variables:r,executeWhen:o},u),[h,p]=v(r),g=f(l),[m,P]=v(l);return y((()=>{if(p(r),g.current&&g.current.data&&r&&!l.fetching){var{data:e}=g.current;g.current={...l,data:t(e,l.data,r)}}else g.current=l;P(g.current)}),[l.data,l.fetching,a(e,r).key]),[m,r=>{var a={...h,...r};p(a),i&&(g.current={...g.current,fetching:!0},P(g.current));var n={};return Object.entries(s||{}).forEach((([e,r])=>{n[e]=r.bind(null,a)})),new Promise((r=>b(K(c,{query:e,variables:a},n),R((({operation:e,stale:i=!1,...n})=>{if(null!=g.current.data){var s=t(g.current.data,n.data,a);g.current={...n,stale:i,data:s,fetching:!1}}else g.current={...n,stale:i,fetching:!1};P(g.current),r()})))))}]},oe=e=>e(),ce=({query:e,variables:r,pause:a,wait:i,debounceOptions:n,requestPolicy:s})=>{var[o,c]=h.useState(void 0),[u,l]=h.useState(void 0),[d,v]=t({query:e,variables:r,pause:!0,requestPolicy:s}),y=M(oe,i,n);return h.useEffect((()=>{y&&!a&&y(v)}),[y,a,v]),h.useEffect((()=>{d.fetching||(u!==d.error&&l(d.error),o!==d.data&&c(d.data))}),[d,o,u]),{data:o,error:u}},ue=(e,r,t,a,i)=>({query:e,variables:r,pause:t,requestPolicy:a,context:i}),le=(e,r)=>{var a=h.useMemo((()=>ue(e.query,e.variables,e.pause,e.requestPolicy,e.context)),[e]),i=t(a),[{fetching:n}]=i;return i},he=e=>{var[r,a]=t(h.useMemo((()=>ue(e.query,e.variables,e.pause,e.requestPolicy,e.context)),[e]));return F(O,{children:e.children({...r,executeQuery:a})})},de=[1e3,2e3,4e3,4e3,4e3],ve=({query:e,variables:r,pollIntervals:i=de,pause:n=!1,isResultComplete:s})=>{var o="function"==typeof r?r(1):r,c=a(e,o).key,[u,l]=v(o),[h,d]=v(!1),[g,b]=v(!1),[m,P]=t({query:e,variables:u,pause:n||g,requestPolicy:"network-only"}),k=f((()=>{})),x=B(c);g&&x===c||(k.current=P);var q=f([]),w=p((()=>{q.current.forEach((e=>clearTimeout(e))),q.current.length=0,b(!0)}),[]);return y((()=>{h&&!m.fetching&&(d(!1),b(!0))}),[h,m.fetching]),y((()=>{if(w(),l(o),!n){var e=0,t=2;b(!1),d(!1),i.forEach(((a,n)=>{e+=a,q.current.push(setTimeout((e=>{"function"==typeof r?1!==e&&j(r(e),r(e+1))?k.current():l(r(e)):k.current(),n===i.length-1&&d(!0)}),e,t)),t++}))}return w}),[c,i.join(","),n,w]),y((()=>{!1===m.fetching&&x===c&&s(m)&&w()}),[m,w,s,x,c]),[{...m,fetching:!g},k.current]},ye=(e,r)=>{var[a,i]=t(e);return y((()=>{if(!a.fetching){var e=setTimeout((()=>i({requestPolicy:"network-only"})),r);return()=>clearTimeout(e)}return()=>{}}),[a.fetching,i,r]),[a,i]};function fe(e){var r=s();return p(((t,a)=>r.mutation(e,t,a).toPromise()),[r,e])}var pe=e=>{var{securityToken:r,ssrData:t}=e||{},a=r&&{headers:{"X-Requested-By":r}}||{},i=[],n=null;n=new T((null==e?void 0:e.initialPvid)||null),i.push(o,n.exchange.bind(n),X.exchange.bind(X),c({initialState:t}),I);var s=u({url:"/data/graphql/ids",fetchOptions:a,exchanges:i});return n&&(s.pvExchange=n),s},ge=({children:e,client:r})=>F(l,{value:r,children:e});return e("useStatelessMutation",fe),[()=>{D=class{constructor(){this.resultCache=void 0,this.invalidationPredicates=void 0,this.exchange=({forward:e,client:r})=>{var t=({kind:e})=>"mutation"!==e&&"query"!==e,a=e=>{var{key:r,kind:t,context:{requestPolicy:a}}=e;return"query"===t&&"network-only"!==a&&("cache-only"===a||this.resultCache.has(r))},i=e=>{var{operation:{key:r},data:t,error:a}=e;void 0!==t&&void 0===a&&this.resultCache.set(r,e)},n=e=>{var{key:r}=e,t=e.context.invalidationPredicates;t&&Object.entries(t).forEach((([e,t])=>{var a=this.invalidationPredicates.get(e)||new Map;a.set(r,t),1===a.size&&this.invalidationPredicates.set(e,a)}))},s=e=>{var t,a,i=new Map;(null!=(t=null==(a=e.extensions)?void 0:a.mutatedFields)?t:[]).forEach((r=>{var t=this.invalidationPredicates.get(r);t&&(Array.from(t.entries()).map((([r,t])=>{var a=this.resultCache.get(r);return[r,t({variables:e.operation.variables,data:e.data},{variables:a&&a.operation.variables,data:a&&a.data})]})).filter((([,e])=>"validate"!==e)).forEach((([e,r])=>i.set(e,r)&&t.delete(e))),0===t.size&&this.invalidationPredicates.delete(r))})),i.forEach(((e,t)=>{if(this.resultCache.has(t)){var a=this.resultCache.get(t);this.resultCache.delete(t),a&&"invalidateAndRefetch"===e&&V(r,a.operation)}}))};return o=>{var c=g(o),u=b(c,m((e=>!t(e)&&a(e))),P((e=>n(e))),k((e=>{var{key:t,context:{requestPolicy:a}}=e,i=this.resultCache.get(t);if("cache-and-network"===a&&V(r,e),void 0!==i)return i;var n={operation:e,data:void 0,error:void 0};return this.resultCache.set(t,n),n}))),l=b(c,m((e=>t(e)||!a(e))),P((e=>n(e))),e,P((e=>{e.operation&&"mutation"===e.operation.kind?s(e):e.operation&&"query"===e.operation.kind&&i(e)})));return x([u,l])}},this.resultCache=new Map,this.invalidationPredicates=new Map}clearCache(){this.resultCache.clear()}},I=(W={create({forward:e}){var{source:r,next:t}=q(),a=()=>{setTimeout((()=>t(1)),100)};return t=>{var i=g(t),n=b(i,m((e=>{var{kind:r,context:t}=e;return("query"===r||"mutation"===r)&&!1===t.batch})),w((e=>{var r=b(i,m((r=>"teardown"===r.kind&&e.key===r.key)));return b(W.createBatchFetchSource([e]),C(r))}))),s=b(i,m((e=>{var{kind:r,context:t}=e;return("query"===r||"mutation"===r||"teardown"===r)&&!1!==t.batch})),P(a),S(r),w((e=>{var r=[];if(e.forEach((e=>{"teardown"===e.kind?r=r.filter((r=>r.key!==e.key)):r.push(e)})),0===r.length)return Q([]);var t=new Set(r.map((e=>e.key))),a=b(i,m((e=>"teardown"===e.kind&&t.delete(e.key)&&0===t.size)));return b(W.createBatchFetchSource(r),C(a))}))),o=b(i,m((e=>{var{kind:r}=e;return"query"!==r&&"mutation"!==r})),e);return x([s,n,o])}},createBatchFetchSource(e){if(e.some((e=>"subscription"===e.kind)))throw new Error("Received a subscription operation in the httpExchange. You are probably trying to create a subscription. Have you added a subscriptionExchange?");return E((({next:r,complete:t})=>{var a=new AbortController,{context:i}=e[0],n="function"==typeof i.fetchOptions?i.fetchOptions():i.fetchOptions||{},s=new Headers(n.headers);s.set("content-type","application/json");var o={body:JSON.stringify(e.map((e=>({query:e.query.id,variables:e.variables})))),method:"POST",...n,headers:s,signal:a.signal};return W.executeBatchFetch(e,o).then((e=>{e.forEach((e=>{void 0!==e&&r(e)})),t()})),()=>{a.abort()}}))},executeBatchFetch(e,r){var t,{url:a}=e[0].context;return fetch(a,{...r,credentials:"same-origin"}).then((e=>(t=e,W.checkStatus(r.redirect,t),t.json()))).then((r=>r.map(((r,a)=>({operation:e[a],data:r.data,extensions:r.extensions,error:Array.isArray(r.errors)?new i({graphQLErrors:r.errors,response:t}):void 0}))))).catch((r=>"AbortError"===r.name?Array(e.length).fill(void 0):e.map((e=>({operation:e,error:new i({networkError:r,response:t})})))))},checkStatus(e="follow",r){var t="manual"===e?400:300;if(r.status<200||r.status>=t)throw new Error(r.statusText)}}).create,z=new Map,T=class{constructor(e){this.resolvers=void 0,this.currentPvid=void 0,this.currentPvPromise=Promise.resolve(),this.currentPvResolver=()=>{},this.promises=[],this.collectedResolver=void 0,this.collectedCallback=null,this.exchange=({forward:e})=>r=>b(r,P((e=>{if(this.collectedResolver&&!this.collectedCallback){var r=this.collectedResolver;this.collectedCallback=requestIdleCallback(r)}e.key in this.resolvers||this.promises.push(new Promise((r=>{this.resolvers[e.key]=r})))})),e,P((e=>{this.resolvers[e.operation.key]()}))),this.currentPvid=e,this.resolvers={},this.collectedResolver=null,this.reset()}reset(){this.currentPvPromise=new Promise((e=>{this.currentPvResolver=e})),this.collectedCallback=null,this.promises=[new Promise((e=>{this.collectedResolver=()=>{this.collectedResolver=null,e()}}))]}allQueriesResolvedForPageView(e){return this.currentPvid!==e&&(this.currentPvResolver(),this.currentPvid=e,this.reset()),Promise.race([Promise.all(this.promises),this.currentPvPromise])}},N=ie,H=se,J=ce,L=he,U=ve,X=new D,e({InvalidatableQuery:G,QueryRequireSsr:L,buildUrqlClient:pe,debugExchange:null,default:ge,denormalizedCacheExchange:X,embedArray:ne,fetchSsrCacheData:re,fulfillSsrBatch:ee,fulfillSsrBatchData:Z,getQueuedSsrRequestCount:ae,getQueuedSsrRequests:te,useDebouncedQuery:J,useIntervalQuery:ye,useInvalidatableQuery:$,useMutablePaginatedQuery:H,usePaginatedQuery:N,usePollingQuery:U,useQueryRequiredSsr:le,useStatelessMutation:fe})},[e=>(t=e.useQuery,a=e.createRequest,i=e.CombinedError,n=e.Context,s=e.useClient,o=e.dedupExchange,c=e.ssrExchange,u=e.createClient,l=e.Provider),e=>(h=e,d=e.useContext,v=e.useState,y=e.useEffect,f=e.useRef,p=e.useCallback),e=>(g=e.share,b=e.pipe,m=e.filter,P=e.tap,k=e.map,x=e.merge,q=e.makeSubject,w=e.mergeMap,E=e.make,C=e.takeUntil,S=e.buffer,Q=e.fromArray,R=e.subscribe),e=>A=e.default,e=>(F=e.jsx,O=e.Fragment),e=>M=e.useDebouncedCallback,e=>j=e.default,e=>B=e.default]]},["5X2em-","cDcdfi","DbN8HP","b3xEaf","F5FCuN","gsKhh7","YwNsO_","vWxBAe"]]);
