(this.$WP=this.$WP||[]).push(["372SlI",(e,t)=>{"use strict";var l,a,r,n,i,o,s,d,u,c,m,p,h,v,f,g,b,_,S,F,y,C,x,R,T,k,P,w,N,W,E,O,A,B,M,V,L,G,I,D,z,$,K,U,j,H,Y,X,J,Z,q,Q,ee,te,le,ae,re,ne,ie,oe,se,de,ue,ce,me,pe,he,ve,fe,ge,be,_e,Se,Fe,ye,Ce,xe,Re,Te,ke,Pe,we,Ne,We,Ee,Oe,Ae,Be,Me,Ve,Le,Ge,Ie,De,ze,$e,Ke,Ue,je,He,Ye,Xe,Je,Ze,qe="attractionType",Qe="REMOVE",et={mapCardCategoryClick:{clientContext:"mapCardCategory",clientParameter:"click"},mapFilterEnterClick:{clientContext:"mapFilter",clientParameter:"enterClick"},mapFilter:{clientContext:"mapFilter"},mapFilterFilterSelect:{clientParameter:"filterSelect"},mapFilterFilterDeselect:{clientParameter:"filterDeselect"}},tt=({id:e,value:t,onSelect:l,children:a,selected:r,disabled:n=!1,typename:i})=>T("div",{className:y("UzBXL _W",{QHUnV:n}),children:T(C,{id:e,value:t,checked:r,disabled:n,onToggle:(e,t)=>{l(t)},label:T(F,{variant:"body-01",children:a}),variant:"WebPresentation_BubbleRatingFilterValue"===i?"trailCentered":"trail"})}),lt=({value:e,onSelect:t,children:l,selected:a,disabled:r})=>T("div",{className:y({"upsem W4":r}),children:T(w,{value:e,"aria-label":e,disabled:r,checked:a,onChange:()=>{t(!a)},marginRight:"spacing-01",marginY:"spacing-01",children:T(F,{variant:"body-01",children:l})})}),at="QLisw v k u B- Cg _T Wc P0 w MJ",rt="vzjGd",nt="aGXIZ",it="kdGvD Wi u",ot="FUSION_FILTERS_COLLAPSED_SECTION",st=e=>{var[t,r]=l(!1);return H((()=>{r((e=>{var t=j.get(ot);return!0===(null==t?void 0:t[e])})(e))}),[e]),a((()=>({isCollapsed:t,updateCollapsed:t=>{((e,t)=>{var l=j.get(ot);null==l&&(l={}),l[e]=t,j.set(ot,l)})(e,t),r(t)}})),[t,e])},dt=()=>{var{localize:e}=g(),{trackClick:t}=S({clientContext:"showFilterTooltip"});return T($,{triggeringElement:T(F,{marginLeft:"spacing-02",elementType:"div",variant:"title-05",children:T(I,{})}),content:e.string("attractions.filters.languages_offered_tooltip"),variant:"top-caret",onShowTooltip:t})},ut=({name:e,ariaLabelledBy:t,headerText:l="",headerRightExtraContent:a,headerElementType:n,tooltip:i,children:o})=>{var{isCollapsed:s,updateCollapsed:d}=ve(e),{trackClick:u}=S({clientContext:(s?"expand":"collapse")+"Filter"}),m=r((()=>{d(!s),u()}),[s,d,u]),p=r((e=>{var{keyCode:t}=e;t===K?(d(!0),u(),e.preventDefault()):t===U&&(d(!1),u(),e.preventDefault())}),[d,u]),h=(e=>`${e}_filter_contents`)(e);return k(c,{variant:"stack",gap:"gapless",children:[null!=l&&k("div",{className:at,children:[k("div",{className:nt,children:[T(F,{id:t,elementType:n,variant:"title-04",children:l}),"language"===e?T(dt,{}):i,k("button",{type:"button",className:"EsAAw _S B- NL",onClick:m,onKeyDown:p,"aria-expanded":!s,"aria-controls":h,children:[T(G,{}),T(s?D:z,{size:20})]})]}),null!=a?T("div",{className:it,children:a}):null]}),T("div",{"data-filter-name":e,id:h,className:y(rt,{VeSkP:s}),children:o})]})},ct=({id:e,name:t,headerElementType:l,headerText:a,headerRightExtraContent:r,tooltip:n,children:i})=>k(c,{variant:"stack",gap:"gapless",children:[null!=a&&k("div",{className:at,children:[k("div",{className:nt,children:[T(F,{id:e,elementType:l,variant:"title-04",children:a}),T("span",{className:"xxIPZ NL",children:n})]}),null!=r&&T("div",{className:it,children:r})]}),T("div",{"data-filter-name":t,className:rt,children:i})]}),mt=({name:e,headerText:t,headerRightExtraContent:l,headerElementType:a="div",tooltip:r,isCollapsible:n=!1,ariaLabelledBy:i,children:o})=>n?T(ut,{ariaLabelledBy:i,name:e,headerText:t,headerRightExtraContent:l,headerElementType:a,tooltip:r,children:o}):T(ct,{name:e,id:i,headerText:t,headerElementType:a,headerRightExtraContent:l,tooltip:r,children:o}),pt=(e,t)=>[...new Map([...e,...t].map((e=>[`${e.name}-${e.value}`,e]))).values()],ht=(e=0,t=0)=>{var[l,a]="leftRail"===i(_e)?ge:be;return[e>0?e:l,t>0?t:a]},vt=(e,t)=>null!=e.filterName?e.filterName:t,ft={whiteBackground:"uGWfC u j w Z1",header:"FOuFZ",itemList:"MCOlU _A v K",item:"vcxvt",searching:"KgHGt",searchable:"XWeCT",unmatched:"JRAZH"},gt=e=>{if(e){if("WebPresentation_SimpleTextFilterValue"===e.__typename)return e.localizedText;if("WebPresentation_TextFilterValue"===e.__typename)return e.text.text}return null},bt=({title:e,name:t,values:a,onClose:n,onApply:i,renderOption:d,singleSelect:u=!1,mapSurface:c=!1})=>{var[p,h]=l(null),[v,b]=l(""),_=o(),C=o(),x=o(),R=o(),[w,N]=(e=>{var[t,a]=l(""),r=o();return s((()=>{r&&r.current?a(r.current.textContent):"string"==typeof e&&a(e)}),[e]),[r,t]})(e),O=r((e=>b(e.target.value)),[]),A=r((()=>b("")),[]),{localize:B}=g(),{trackClick:M}=S(),{desktop:V,mobile:L}=m();s((()=>{h(null)}),[a]),s((()=>{var e;return e&&clearTimeout(e),e=setTimeout((()=>{((e,t,l)=>{var a=!1,r=(e||"").toLowerCase();""!==r&&(a=!0);var n=!1;ft.searching.split(" ").forEach((e=>{t.classList.toggle(e,a)})),[...t.querySelectorAll(Se)].forEach((e=>{var t=(e.textContent||"").toLowerCase().includes(r);n=n||t,ft.unmatched.split(" ").forEach((l=>{e.classList.toggle(l,a&&!t)}))})),n?l.classList.add(...ft.unmatched.split(" ")):l.classList.remove(...ft.unmatched.split(" "))})(v,_.current,C.current)}),300),()=>{e&&clearTimeout(e)}}),[v]);var G=()=>{M({clientContext:c?"mapFilter":"applyFilterOptionsModal",clientParameter:c?"save":null}),i&&p&&i(p),n()};if(!a)return null;var I=((e,t,l,a=!1)=>{if(a){var r,n,i=(null==(r=l.find((({selected:e})=>e)))?void 0:r.value)||null,o=(null==(n=t.find((({isSelected:e})=>e)))?void 0:n.value)||null,s=i||o;return t.map((t=>({...t,filterName:vt(t,e),isSelected:s===t.value})))}var d,u=(d=l,Object.fromEntries(d.map((e=>[e.value,e]))));return t.map((t=>({...t,filterName:vt(t,e),isSelected:t.value in u?u[t.value].selected:t.isSelected})))})(t,a.filter(Boolean),p||[],u),D=Fe.has(t)?I:(e=>[...e].sort(((e,t)=>{if(null==e.object)return null!=t.object?1:0;if(null==t.object)return-1;var l=gt(e.object),a=gt(t.object);return null!==l&&null!==a?l.localeCompare(a):0})))(I),z=k(P,{children:[T("ul",{className:ft.itemList,ref:_,children:D.map((e=>T("li",{className:y(ft.item,ft.searchable),children:d(e,(l=>{((e,t,l)=>{h(pt(u||!p?[]:p,[{name:e,value:t,selected:l}]))})(null!=e.filterName?e.filterName:t,e.value,l)}))},e.value)))}),k("div",{className:ft.unmatched,ref:C,children:[T("br",{}),T(F,{variant:"title-04",children:T(f,{id:"fusion_filters_search_no_results"})}),T(F,{variant:"expressive-body-01",children:T(f,{id:"fusion_filters_search_no_results_retry"})})]})]}),$=B.string("phoenix_accessibility_back_label"),K=c?T(E,{variant:"clear",icon:q,"aria-label":$,size:"small",onClick:G,ref:R}):null,U=c?"none":"right";return V?k(J,{title:T("div",{className:ft.whiteBackground,children:null!=e&&T("div",{className:ft.header,children:T(F,{elementType:"h4",variant:L?"title-05":"title-01",children:T("span",{ref:w,children:e})})})}),primaryButton:k(W,{variant:"primary",size:"small",onClick:G,children:[T(f,{id:"sng_fusion_list_filters_modal_apply"})," "]}),onClose:()=>{M({clientContext:c?"mapFilter":"closeFilterOptionsModal",clientParameter:c?"close":null}),n()},closeButtonPosition:U,backButton:K,variant:"fixed-height-sticky-footer",widthOption:"fixed-60",heightOption:"fixed-80",children:[T(Z,{onChange:O,onClear:A,value:v,placeholder:B.string("common_Search")}),z]}):k(X,{deprioritizeRef:x,slideFrom:"right",buttonStyle:"inline",header:T("div",{className:ft.whiteBackground,children:null!=e&&T("div",{className:ft.header,children:T(F,{elementType:"h4",variant:L?"title-05":"title-01",children:T("span",{ref:w,children:e})})})}),primaryButton:k(W,{variant:"primary",size:"small",onClick:G,children:[T(f,{id:"sng_fusion_list_filters_modal_apply"})," "]}),onClose:G,closeButtonPosition:"left",closeButtonIcon:q,heightOption:"full",widthOption:"full",children:[T(Z,{ref:x,onChange:O,onClear:A,value:v,placeholder:B.string("common_Search")}),z]})},_t=()=>k(P,{children:[T(f,{id:"fusion_list_show_more_filters"}),T(F,{marginX:"spacing-02",variant:"button-01",display:"inline",children:T(D,{})})]}),St=()=>k(P,{children:[T(f,{id:"fusion_list_show_less_filters"}),T(F,{marginX:"spacing-02",variant:"button-01",display:"inline",children:T(z,{})})]});function Ft({onClick:e,ariaContentId:t,expanded:l,disabled:a=!1}){return T(O,{disabled:a,variant:"accent",onClick:e,ariaAttributes:{"aria-expanded":l,"aria-controls":t},children:T(F,{variant:"button-01",children:T(l?St:_t,{})})})}var yt="FOsuu _A M0 P0 w f G K v",Ct=()=>{},xt=({ariaAttributes:e,trackingDetails:t,children:l,onClick:a,disabled:r})=>{var{trackClick:n}=S(t);return T(O,{disabled:r,variant:"accent",onClick:()=>{n(),a()},ariaAttributes:e,children:T(F,{variant:"button-01",children:l})})},Rt=()=>T(f,{id:"fusion_list_show_all_filters"}),Tt=({parentKey:e,name:t,title:l,tooltip:a,children:r,headerRightExtraContent:n})=>{var{desktop:i}=m();return T(fe,{name:t,headerText:l,headerRightExtraContent:n,tooltip:a,isCollapsible:t!==A&&i,ariaLabelledBy:e,children:r})},kt=({filterName:e,values:t,renderOption:l,onApply:a,hideAfter:r=-1,singleSelect:n=!1,disabled:i=!1,inlineItems:o=!1})=>{var s=(t||[]).map((t=>({name:null!=t.filterName?t.filterName:e,value:t.value,selected:t.isSelected})));return T("ul",{className:y("rating"===e?[yt,"BznuA"]:yt),children:t.map(((t,d)=>T("li",{className:y({"nhbCY M0 f G":!0,rDCUP:o,cTSYu:r>0&&d>=r&&!t.isSelected}),children:l(t,(l=>{var r=pt(n?s.map((({name:e,value:t})=>({name:e,value:t,selected:!1}))):s,[{name:null!=t.filterName?t.filterName:e,value:t.value,selected:l,disabled:i}]);a(r)}))},t.value)))})},Pt=({parentKey:e,title:t,tooltip:a,headerRightExtraContent:r,filterName:n,values:o,viewMoreLimit:s=xe,renderOption:d,onApply:u,singleSelect:c,disabled:m=!1})=>{var p=o.map((e=>!0===e.isSelected)).lastIndexOf(!0)>s-1,[h,v]=l(p),f=h?"showLessFilterOptions":"showMoreFilterOptions",{trackClick:g}=S({clientContext:f}),b=o.length>s,_=`${n}_filter_options`,F="filterModal"===i(_e);return k(Tt,{name:n,title:t,tooltip:a,parentKey:e,headerRightExtraContent:r,children:[T(kt,{filterName:n,singleSelect:c,onApply:u,values:o,hideAfter:h?-1:s,renderOption:d,disabled:m,inlineItems:F}),b?T(Ft,{disabled:m,expanded:h,ariaContentId:_,onClick:()=>{g(),v(!h)}}):null]})},wt=({singleSelect:e,parentKey:t,title:a,tooltip:n,filterName:o,values:s,onApply:d=Ct,renderOption:u,modalRenderOption:c,viewMoreLimit:m=Ce,disabled:p=!1,mapSurface:h=!1})=>{var[v,f]=l(!1),g=(s.length||0)>m,b=h?"mapFilter":"openFilterOptionsModal",_=h?"viewAll":null,S=`${o}_filter_modal`,F=r((()=>{f(!1)}),[]),y=r((e=>{d([...e])}),[d]),C=r((e=>{y(e),F()}),[y,F]),[x,R]=[s.slice(0,m),s.slice(m,s.length)],P=R.filter((e=>e.isSelected)),w=R.some((e=>!e.isSelected)),N="filterModal"===i(_e),W=T(kt,{filterName:o,singleSelect:e,onApply:y,values:x.concat(P),renderOption:u,disabled:p,inlineItems:N});return k(Tt,{name:o,title:a,tooltip:n,parentKey:t,children:[W,g&&w?T(xt,{disabled:p,trackingDetails:{clientContext:b,clientParameter:_},onClick:()=>{v||f(!0)},ariaAttributes:{"aria-controls":S},children:T(Rt,{})}):null,v&&s?T(ye,{values:s,singleSelect:e,popularChoiceDefinition:"multi",title:null!=a?a:"",name:o,onClose:F,onApply:C,renderOption:c||u,mapSurface:h}):null]})},Nt=({parentKey:e,title:t,tooltip:l,headerRightExtraContent:a,filterName:r,values:n,onClear:i,onApply:o,renderOption:s,modalRenderOption:d,singleSelect:u,viewMoreLimit:c=null,showModalLimit:m=null,disabled:p=!1,mapSurface:h=!1})=>{var[v,f]=ht(c,m);return(n||[]).length>f?T(wt,{parentKey:e,filterName:r,title:t,tooltip:l,values:n,onClear:i,onApply:o,renderOption:s,modalRenderOption:d||s,viewMoreLimit:v,singleSelect:u,disabled:p,mapSurface:h}):T(Pt,{parentKey:e,filterName:r,title:t,tooltip:l,headerRightExtraContent:a,values:n,onClear:i,onApply:o,renderOption:s,viewMoreLimit:v,singleSelect:u,disabled:p})},Wt=({object:e})=>{var t,l,a,r;if(e)switch(e.__typename){case"WebPresentation_LocationFilterValue":return(null==(t=e.location)||null==(l=t.names)?void 0:l.abbreviated)||null;case"WebPresentation_SimpleTextFilterValue":return e.localizedText;case"WebPresentation_TagFilterValue":return(null==(a=e.tag)?void 0:a.localizedName)||null;case"WebPresentation_TextFilterValue":return(null==(r=e.text)?void 0:r.text)||null;default:console.error("Unsupported type",e.__typename)}return null},Et=({filterValue:e,validated:t=!1})=>{var l,a,r,n,{localize:i}=g(),{object:o}=e,s=null;if(o){switch(o.__typename){case"WebPresentation_BubbleRatingFilterValue":o.minimumRatingValue&&(s=o.minimumRatingValue<50?T(Q,{rating:o.minimumRatingValue/10,label:T(F,{elementType:"span",variant:"body-01",children:` ${i.string("ampersand_up")}`})}):T(ee,{rating:o.minimumRatingValue/10}));break;case"WebPresentation_LocationFilterValue":s=T(P,{children:null==(l=o.location)||null==(a=l.names)?void 0:a.abbreviated});break;case"WebPresentation_SimpleTextFilterValue":s=T(P,{children:o.localizedText});break;case"WebPresentation_TagFilterValue":s=T(P,{children:null==(r=o.tag)?void 0:r.localizedName});break;case"WebPresentation_TextFilterValue":s=T(P,{children:null==(n=o.text)?void 0:n.text});break;default:console.error("Unsupported type",o.__typename)}t&&null===s&&e.value&&(s=T(P,{children:e.value}))}return null===s&&(s=T(p,{message:`Empty filterValue ${e.value}`})),s},Ot=({model:e,clientContext:t,clientParameter:l})=>{var{trackClick:a}=S({clientContext:t,clientParameter:l});return null!=e?T("span",{className:"eqOlB",children:T(te,{model:e,onShowTooltip:a})}):null},At=({model:e})=>T(Ot,{model:e,clientContext:"showFilterTooltip"}),Bt=({model:e,value:t})=>T(Ot,{model:e,clientContext:"showFilterValueTooltip",clientParameter:JSON.stringify({value:t})}),Mt=(e,t)=>(null==t?void 0:t.filter(Boolean).map((t=>({name:vt(t,e),value:t.value,selected:t.isSelected}))))||[],Vt=({name:e,value:t})=>`${e}-${t}`,Lt=({model:e,onFilterChange:t,onSetFilter:l,onClear:n,viewMoreLimit:o=null,disabled:s=!1,mapSurface:d=!1,headerRightExtraContent:u=null})=>{var c="leftRail"===i(_e),[m,p]=ht(o),{title:h,name:v,values:f,tooltip:g}=e,b=r((e=>{l?l(pt(Mt(v,f),e).filter((e=>e.selected)).map((e=>e.value))):t&&t(((e,t)=>{var l=new Map;e.forEach((e=>l.set(Vt(e),e.selected)));var a=new Map;t.forEach((e=>{var t=Vt(e);l.has(t)||a.set(t,e.selected),l.get(t)!==e.selected&&a.set(t,e.selected)}));var r=new Map;return Array.from(a.entries()).forEach((([e,t])=>{var l,[a,n]=e.split("-");r.has(a)||r.set(a,[]),null==(l=r.get(a))||l.push({value:n,selected:t})})),[...r.entries()].map((([e,t])=>({id:e,selected:t.filter((({selected:e})=>e)).map((({value:e})=>e)),deselected:t.filter((({selected:e})=>!e)).map((({value:e})=>e))})))})(Mt(v,f),e))}),[l,t,f,v]),_=r((e=>function(t,l){var a,r=c?pe:he,n=s||!t.isSelected&&0===t.count,i=null!==t.tooltip?T(Bt,{model:t.tooltip,value:t.value}):null;return k(P,{children:[k(r,{id:`${e}_${v}_${t.value}`,typename:null==(a=t.object)?void 0:a.__typename,selected:t.isSelected,disabled:n,onSelect:l,value:t.value,children:[T(Te,{filterValue:t,validated:!0}),c&&i]}),!c&&T("div",{className:"dvnOe",children:i})]})}),[c,v,s]),S=a((()=>_("main")),[_]),F=a((()=>_("modal")),[_]);if(!f)return null;var y=(f||[]).filter(Boolean);return 0===y.length?null:T(Re,{title:h,tooltip:T(ke,{model:g}),filterName:v,values:y,onApply:b,onClear:n,viewMoreLimit:m,showModalLimit:p,renderOption:S,modalRenderOption:F,singleSelect:!1,disabled:s,mapSurface:d,headerRightExtraContent:u})},Gt=({model:e,setFilter:t,disabled:l=!1,mapSurface:a=!1,headerRightExtraContent:n=null})=>{var{values:i}=e,o=r((e=>{t&&t([...e])}),[t]),s=r((()=>{t&&t([])}),[t]);return e.__typename?i&&T(Pe,{disabled:l,model:e,onSetFilter:o,onClear:s,mapSurface:a,headerRightExtraContent:n}):T(p,{message:"empty model in MultiSelectFilterWrapper"})},It=({model:e,setFilter:t})=>{var l,a,{name:n,selectedRangeStart:i,selectedRangeEnd:o,buckets:s,title:d,tooltip:u}=e,c=(null==s?void 0:s.length)||0,{desktop:p}=m(),h=r(((e,l)=>{t&&t([e.toString(),l.toString()])}),[t]);return T(fe,{headerText:d,tooltip:T(ke,{model:u}),name:n,isCollapsible:p,children:T(le,{min:(null==s||null==(l=s[0])?void 0:l.rangeStart)||0,minHandleData:{currentValue:i||0,valueDescription:""},max:(null==s||null==(a=s[c-1])?void 0:a.rangeEnd)||0,maxHandleData:{currentValue:o||0,valueDescription:""},currentRangeLabel:null,step:1,onChange:h})})},Dt=({minPrice:e,maxPrice:t,selectedMin:l,selectedMax:a,onChange:r,onRelease:n,disabled:i=!1})=>{var{localize:o}=g(),s=b(),d=s.formatCurrencyInteger(l),u=a>=t?o.string("price_slider_plus_short",{0:s.formatCurrencyInteger(t)}):s.formatCurrencyInteger(a);return T("div",{className:"SRVEt w",children:T(le,{disabled:i,min:e,minHandleData:{currentValue:l,valueDescription:o.string("sng_a11y_min_price")},max:t,maxHandleData:{currentValue:a,valueDescription:o.string("sng_a11y_max_price")},currentRangeLabel:`${d} - ${u}`,step:5,onChange:r,onRelease:n})})},zt=[],$t=({model:e,setFilter:t,disabled:n=!1})=>{var i,o,d,{name:u,minValue:c,maxValue:p,selectedRangeStart:h,selectedRangeEnd:v,title:g,modes:b,tooltip:_}=e,{trackClick:F}=S(),[{min:y,max:C},x]=l({min:h,max:v}),R=(null==b?void 0:b.filter(Boolean))||zt,P=null==R||null==(i=R.filter((({isSelected:e})=>e)))||null==(o=i[0])?void 0:o.value,w=null==R||null==(d=R[0])?void 0:d.value,[N,W]=l(P),{page:E}=ie(),O=a((()=>/(hotel|lastminute|showuserreviews|smartdeals)/i.test(E)),[E]),{desktop:A}=m(),B=r(((e,t)=>{t-e>=5&&x({min:e,max:t})}),[]),M=r(((e,l,a)=>{if(t){var r=null!=a&&a!==w,n=e!==c||l!==p;if(n||r)if(!n&&r)t([a].filter(Boolean));else{var i=O?"-1":null;t([null==e?void 0:e.toString(),l!==p?null==l?void 0:l.toString():i,r?a:null].filter(Boolean))}else t([])}}),[t,c,p,w,O]),V=r((()=>{null!=y&&null!=C&&M(y,C,N)}),[M,y,C,N]),L=r((e=>{N!==e&&(W(e),M(null,null,e))}),[M,N]),G=r((()=>{F({clientContext:"openPricingModeModal"})}),[F]),I=r((()=>{F({clientContext:"openPricingModeTooltip"})}),[F]);s((()=>{x({min:h,max:v})}),[h,v]),s((()=>{W(P)}),[P]);var D=a((()=>R.map((e=>({value:e.value,displayName:Wt(e)||""})))||[]),[R]),z=a((()=>R.map((e=>{var{tooltip:t}=e;if(null==t)return null;var l=Wt(e);return null==l?null:{label:l,text:T(re,{model:t.popUpText})}})).filter(Boolean)),[R]);return k(fe,{headerText:g,name:u,tooltip:T(ke,{model:_}),isCollapsible:A,children:[T(We,{minPrice:c||0,maxPrice:p||0,selectedMin:y||0,selectedMax:-1===C?p||0:C||0,onChange:B,onRelease:V,disabled:n}),D.length>0&&k("div",{className:"WFTKh A u",children:[T(ae,{options:D,value:null!=N?N:w,onChange:L,label:T(f,{id:"hotels_filter_title_pricing_mode"}),onOpen:G,fullscreenMobile:!0,"aria-describedby":"priceModeTooltip",disabled:n}),z.length>0?T(ne,{content:z,onOpen:I}):null]})]})},Kt=({id:e,value:t,children:l,selected:a,disabled:r,onSelect:n})=>T(x,{id:e,value:t,selected:a,disabled:r,onSelect:()=>{n(!a)},label:l,variant:"trail"}),Ut=({selected:e,onSelect:t,children:l,disabled:a=!1})=>T(O,{disabled:a,variant:"primary",onClick:()=>{e||t(!0)},children:T("div",{className:"UCILX f u G",children:T(F,{variant:e?"button-01":"body-01",children:l})})}),jt=({children:e,isSelected:t,onClick:l,href:a,disabled:r=!1,allowDeselect:n=!1,hidden:i=!1})=>{var o=T(F,{variant:t?"title-05":"body-01",children:e}),s=n?"a":"span";return T("div",{className:y("XDHza P0 f u G",{hGtqO:r,BGthS:i}),children:t?T(s,{href:n?a:void 0,onClick:l,className:y({Dgygn:t,_S:n}),children:o}):T("a",{className:"KoOWI",onClick:l,href:a,children:o})})},Ht=({model:e},t=!1,l=!1,a=!1)=>{var{isLeftRail:r,name:n,variant:i}=e;return function(e,o){var s;if("text"===i&&r)return T(Be,{allowDeselect:l,disabled:a,isSelected:e.isSelected,onClick:()=>{e.isSelected&&!l||o(!e.isSelected)},children:T(Te,{filterValue:e,validated:!0})});var d=Oe;return"checkbox"===i&&(d=pe),"text"===i&&(d=t?he:Ae),r||(d=he),T(d,{id:`${n}_${e.value}`,typename:null==(s=e.object)?void 0:s.__typename,value:e.value,selected:e.isSelected,disabled:a||!e.isSelected&&0===e.count,onSelect:e=>{(e||l)&&o(e)},children:T(Te,{filterValue:e,validated:!0})})}},Yt=({name:e,title:t,tooltip:l,values:a,variant:n="checkbox",onSelection:o,onClear:s,viewMoreLimit:d=null,viewModalLimit:u=null,allowDeselect:c=!1,limitToSelectedValue:p=!0,disabled:h=!1,mapSurface:v=!1})=>{var{desktop:f}=m(),g="leftRail"===i(_e),b=`filter-singleSelect-${e}`,[_,S]=ht(d,u),F=r((e=>{var t=e.find((e=>e.selected));null!=t&&t.selected?o(t.value):p||"checkbox"===n||c?o(null):console.error("Unsetting a single select should not happen")}),[o,p,n,c]);if(null==a)return null;var y=a.filter(Boolean);if(p){var C=y.find((e=>!0===e.isSelected));null!=C&&(y=[C])}if(0===y.length)return null;var x={model:{variant:n,title:t,name:e,onSelection:o,isDesktop:f,isLeftRail:g,ariaLabelledBy:b}},k=Ht(x,!1,c||"checkbox"===n,h),P=Ht(x,!0,c||"checkbox"===n,h),w=T(Re,{parentKey:b,title:t,tooltip:l,filterName:e,values:y,viewMoreLimit:_,showModalLimit:S,renderOption:k,modalRenderOption:P,onApply:F,onClear:s,disabled:h,singleSelect:!0,mapSurface:v});return w&&"radio"===n?T(R,{name:e,children:w}):w},Xt=({onSelection:e,fixedUpValues:t,getHref:l,disabled:a=!1,hideAfter:r=-1})=>{var n=t.map(((t,n)=>T(Be,{isSelected:t.isSelected,href:l(t),onClick:l=>{t.isSelected||e(t.value),l.stopPropagation(),l.preventDefault()},disabled:a,hidden:r>0&&n>=r&&!t.isSelected,children:T(Te,{filterValue:t})},t.value)));return T("div",{children:n})},Jt=e=>{switch(e){case"category":return 4;case"navbar":return 20;default:return 6}},Zt=({title:e,tooltip:t,name:a,values:n,onSelection:i,viewMoreLimit:o=6,disabled:s=!1})=>{var d=(n||[]).filter(Boolean),u=Y(),m=u||d.map((e=>!0===e.isSelected)).lastIndexOf(!0)>o-1,[p,h]=l(m),{trackClick:v}=S({clientContext:p?"showLessFilterOptions":"showMoreFilterOptions"}),f=u&&d.length>o,g=-1;f&&!p&&(g=o);var b=`filter-${a}`,_=f?T(Ft,{expanded:p,disabled:s,ariaContentId:b,onClick:()=>{v(),h(!p)}}):null,F=r((e=>{var t;if(e.link){var{url:l}=oe(e.link);t=l}return t||`#${a}=${e.value}`}),[a]);return T(fe,{name:a,isCollapsible:!1,headerText:e,tooltip:t,children:T("div",{id:b,children:k(c,{variant:"stack",gap:"standard",children:[T(Ve,{disabled:s,fixedUpValues:d,hideAfter:g,onSelection:i,getHref:F}),_&&T("div",{children:_})]})})})},qt=({title:e,name:t,tooltip:l,values:a,onSelection:r,onClear:n,viewMoreLimit:i,disabled:o=!1,mapSurface:s=!1})=>T(Me,{title:e,tooltip:l,name:t,values:a,limitToSelectedValue:!1,viewMoreLimit:i,onSelection:r,allowDeselect:!1,onClear:n,disabled:o,mapSurface:s}),Qt=({title:e,tooltip:t,name:l,values:a,onSelection:r,onClear:n,disabled:o=!1,mapSurface:s=!1})=>{var d="leftRail"===i(_e);return 0===a.filter(Boolean).length?null:d?T(Zt,{title:e,tooltip:t,name:l,values:a,variant:"text",onSelection:r,onClear:n,viewMoreLimit:6,disabled:o}):T(qt,{title:e,tooltip:t,name:l,values:a,variant:"text",onSelection:r,onClear:n,viewMoreLimit:Jt(l),disabled:o,mapSurface:s})},el=[],tl=({model:e,setFilter:t,disabled:l=!1,mapSurface:a=!1,contentType:n})=>{var{title:i,name:o,values:s,tooltip:d}=e,u=r((()=>{t&&t([])}),[t]),c=r((e=>{t&&t(null!=e?[e]:[])}),[t]),m=T(ke,{model:d});return"rating"===e.name?T(Me,{title:i||"",tooltip:m,name:o,values:s||el,onSelection:c,onClear:u,viewMoreLimit:5,limitToSelectedValue:!1,disabled:l,allowDeselect:!0,mapSurface:a}):((e,t)=>(t===B||t===M)&&e===V)(e.name,n)?T(Le,{title:i||"",tooltip:m,name:o,values:s||el,onSelection:c,onClear:u,disabled:l,mapSurface:a}):T(Me,{title:i||"",tooltip:m,name:o,values:s||el,onSelection:c,onClear:u,disabled:l,limitToSelectedValue:!1,allowDeselect:!0,mapSurface:a})},ll=({model:e,onChange:t,disabled:l=!1})=>{var{values:a}=e,n=r((e=>{t&&t(e)}),[t]),i=r((()=>{if(t){var e=new Map;null==a||a.filter(Boolean).forEach((({filterName:t,value:l,isSelected:a})=>{var r;a&&(e.has(t)||e.set(t,[]),null==(r=e.get(t))||r.push(l))}));var l=[];Array.from(e.entries()).forEach((([e,t])=>null!=e&&l.push({id:e,deselected:t}))),t(l)}}),[t,a]);return e.__typename?a&&T(Pe,{disabled:l,model:e,onFilterChange:n,onClear:i}):T(p,{message:"empty model in ReferenceFilterWrapper"})},al=({model:e,setFilter:t,disabled:l=!1})=>k(P,{children:[T(O,{disabled:l,onClick:()=>{null!=t&&t([null==e.value?Qe:e.value])},children:e.title}),T(ke,{model:e.tooltip})]}),rl=()=>{},nl=[],il=({model:e,setFilter:t,disabled:a=!1})=>{var{name:n,title:i,locations:o,minDistance:d,maxDistance:u,selectedDistance:m,unitFormat:p,tooltip:h}=e,v=null!=d?d:0,f=null!=u?u:0,{localize:b}=g(),_=r((({max:e})=>{var t;return(null==p||null==(t=p.text)?void 0:t.replace("{0}",`${Math.min(null!=e?e:f,f)}`))||""}),[p,f]),S=r((()=>{t&&t([])}),[t]),F=r(((e,l)=>{null!=t&&null!=e&&null!=l&&t([e,`${l}`])}),[t]),y=null!=m?m:f,[C,x]=l(y),R=r(((e,t)=>{t>=1&&x(t)}),[]),P=null==o?void 0:o.filter(Boolean).filter((({isSelected:e})=>e)).map((({value:e})=>e))[0],[w,N]=l(P),W=r((()=>F(w,C)),[F,w,C]),E=r((e=>{null===e?S():(N(e),F(e,C))}),[F,C,S]);return s((()=>{N(P)}),[P]),s((()=>{x(y)}),[y]),T(fe,{name:n,headerText:i,tooltip:T(ke,{model:h}),isCollapsible:!0,children:k(c,{gap:"gapless",children:[T(le,{disabled:a,min:v,max:f,maxHandleData:{currentValue:null!=C?C:f,valueDescription:b.string("sng_a11y_max_distance")},currentRangeLabel:_({max:C}),step:1,onChange:R,onRelease:W}),T(Me,{disabled:a,title:null,tooltip:null,name:n,values:o||nl,variant:"text",onSelection:E,onClear:rl,limitToSelectedValue:!1,viewModalLimit:8,allowDeselect:!0})]})})},ol=({model:e,setFilter:t,disabled:l=!1})=>{var{name:a,title:n,values:i,tooltip:o}=e,s=r((()=>{t&&t([])}),[t]),d=r((e=>{t&&t(null!=e?[e]:[])}),[t]);return T(Le,{title:n||"",tooltip:T(ke,{model:o}),name:a,values:i||[],onSelection:d,onClear:s,disabled:l})},sl=({model:e,onChange:t,setFilter:l,disabled:a=!1,mapSurface:r=!1,contentType:n,headerRightExtraContent:i})=>{switch(e.__typename){case"WebPresentation_WebNavigationLinkFilter":return T($e,{disabled:a,model:e,setFilter:l});case"WebPresentation_EnumeratedValueFilter":return T(Ge,{disabled:a,model:e,setFilter:l,mapSurface:r,contentType:n});case"WebPresentation_MultiValueFilter":return T(we,{disabled:a,model:e,setFilter:l,mapSurface:r,headerRightExtraContent:i});case"WebPresentation_RangedValueFilter":return T(Ne,{disabled:a,model:e,setFilter:l});case"WebPresentation_RangedSliderFilter":return T(Ee,{disabled:a,model:e,setFilter:l});case"WebPresentation_DistanceFromFilter":return T(ze,{disabled:a,model:e,setFilter:l});case"WebPresentation_SingleButtonFilter":return T(De,{disabled:a,model:e,setFilter:l});case"WebPresentation_ReferenceFilter":return T(Ie,{disabled:a,model:e,onChange:t});default:return T(v,{typename:e.__typename})}},dl=({model:e,header:t,onChange:l,disabled:r=!1,mapSurface:n=!1,contentType:i})=>{var{trackClick:o}=S(),s=e=>{l&&l(e)},d=a((()=>e.filter(Boolean)),[e]);return d&&d.length>0?k(c,{variant:"stack",gap:"wide",children:[t,d.map((e=>{return T("div",{className:"_T _R",children:T(sl,{disabled:r,onChange:s,setFilter:(t=e.name,l=e.trackingKey,a=e.trackingTitle,e=>{if(n){var r={clientContext:et.mapFilter.clientContext,clientParameter:null!=e&&e.length>0?et.mapFilterFilterSelect.clientParameter:et.mapFilterFilterDeselect.clientParameter,trackingKey:l,trackingTitle:a};o(r)}s([{id:t,value:e}])}),model:e,mapSurface:n,contentType:i,headerRightExtraContent:null})},{name:"",...e}.name);var t,l,a})),0===d.length&&T(f,{id:"fusion_list_page_filter_no_filters"})]}):null},ul=e=>{var t=0;return e.filter(Boolean).forEach((e=>{switch(e.__typename){case"WebPresentation_EnumeratedValueFilter":case"WebPresentation_MultiValueFilter":e.values&&(t+=e.values.map((e=>e&&e.isSelected?1:0)).reduce(((e,t)=>e+t),0));break;case"WebPresentation_RangedValueFilter":null===e.selectedRangeStart&&null===e.selectedRangeEnd||t++}})),t},cl=(e,t)=>[...new Set([...e||[],...t||[]])],ml=(e,t)=>e.filter((e=>!(null!=t&&t.includes(e)))),pl=e=>"WebPresentation_WebNavigationFilterGroup"===e.__typename?1:0,hl=e=>ul([...(e||[]).filter(Boolean)])>0;function vl(e,t,l=!1){return!!t&&(!l||e!==B&&e!==M?t.filter(Boolean).length>0:t.filter(Boolean).filter((e=>null!=e.id&&!Ue.has(e.id))).length>0)}var fl=e=>[...e||[]].filter(Boolean).map((({id:e,value:t})=>{if(null==e||null==t)return null;var l=[...t].filter(Boolean);return 0===l.length?null:{id:e,value:je.has(e)?l:l.sort()}})).filter(Boolean).sort(((e,t)=>(e.id||"")>(t.id||"")?1:-1)),gl=e=>{var t;if(e)switch(e.__typename){case"WebPresentation_RangedSliderFilter":return(e=>{var t,l,a,r,n=null==(t=e.modes)||null==(l=t.filter((e=>null==e?void 0:e.isSelected))[0])?void 0:l.value,i=null!=n&&!(null!=(a=e.modes)&&null!=(r=a[0])&&r.isSelected),o=null!==e.selectedRangeStart&&null!==e.selectedRangeEnd&&(e.selectedRangeStart!==e.minValue||e.selectedRangeEnd!==e.maxValue);return o||i?!o&&i&&null!=n?{id:e.name,value:[n]}:o&&!i?{id:e.name,value:[String(e.selectedRangeStart),String(e.selectedRangeEnd)]}:o&&i&&null!=n?{id:e.name,value:[String(e.selectedRangeStart),String(e.selectedRangeEnd),n]}:null:null})(e);case"WebPresentation_RangedValueFilter":return null!=e.selectedRangeStart&&null!=e.selectedRangeEnd?{id:e.name,value:[String(e.selectedRangeStart),String(e.selectedRangeEnd)]}:null;case"WebPresentation_MultiValueFilter":case"WebPresentation_EnumeratedValueFilter":case"WebPresentation_WebNavigationLinkFilter":return(t={id:e.name,value:(e.values||[]).filter(Boolean).filter((e=>e.value&&e.isSelected)).map((e=>e.value)).filter(Boolean).reduce(((e,t)=>[...e,t]),[])})&&t.value.length>0?t:null;case"WebPresentation_ReferenceFilter":default:return null}return null},bl=e=>e.flatMap((e=>(e=>{switch(e.__typename){case"WebPresentation_StandardFilterGroup":case"WebPresentation_StandardFilterGroupWebOnly":return e.filters||[];case"WebPresentation_SingleSelectFilterGroup":case"WebPresentation_WebNavigationFilterGroup":return e.filter?[e.filter]:[];default:return e.__typename,[]}})(e).map(gl).filter(Boolean))),_l=(e,t,l,a=!1)=>{var r=bl(t);e.filter((e=>!r.filter((t=>{return a=e,(l=t).id===a.id&&l.value.length===a.value.length&&l.value.every((e=>a.value.includes(e)));var l,a})).length)).forEach((e=>{t.forEach((t=>{var r,n=null==(r=(e=>{switch(e.__typename){case"WebPresentation_WebNavigationFilterGroup":case"WebPresentation_SingleSelectFilterGroup":return[e.filter];default:return e.filters}})(t))?void 0:r.filter((t=>(null==t?void 0:t.name)===e.id));null==n||n.forEach((t=>l({trackingKey:null==t?void 0:t.trackingKey,trackingTitle:null==t?void 0:t.trackingTitle,clientContext:a?"mapFilterApply":"setFilter",clientParameter:JSON.stringify(e.value)})))}))}))},Sl=e=>e&&null!=e.id&&""!==e.id?{id:e.id,value:(e.value||[]).filter(Boolean)}:null,Fl=(e,t)=>{return[...new Map((l=[...e,...t],l.filter(Boolean).map(Sl).filter(Boolean)).map((e=>[e.id,e]))).values()].filter((({value:e})=>null!=e&&0!==e.length&&e[0]!==Qe));var l},yl=(e,t)=>a((()=>((e,t)=>e.map((e=>{if("WebPresentation_SingleSelectFilterGroup"===e.__typename||"WebPresentation_WebNavigationFilterGroup"===e.__typename)return e.filter&&se(e.filter.surfaces,t)?e:null;var l=((e,t)=>(e||[]).filter(Boolean).filter((e=>se(e.surfaces,t))))(e.filters,t);return 0!==l.length?{...e,filters:l}:null})).filter(Boolean))((e||[]).filter(Boolean),t)),[e,t]),Cl=e=>{switch(e.__typename){case"WebPresentation_StandardFilterGroup":case"WebPresentation_StandardFilterGroupWebOnly":return e.filters||[];case"WebPresentation_SingleSelectFilterGroup":case"WebPresentation_WebNavigationFilterGroup":return[e.filter].filter(Boolean);default:return console.error("Unknown filter group type",e.__typename),[]}},xl=(e,t)=>{var l=new Map;return e.forEach((e=>l.set(e.id,e))),t.forEach((e=>{var t=l.has(e.id)?l.get(e.id):{id:e.id,value:e.value},a=((e,t,l,a)=>{var r=new Set(t||e||[]);return null==l||l.forEach((e=>r.add(e))),null==a||a.forEach((e=>r.delete(e))),Array.from(r.keys())})(null==t?void 0:t.value,e.value,e.selected,e.deselected);l.set(e.id,{id:e.id,value:a})})),Array.from(l.entries()).map((([,e])=>e))},Rl=[],Tl=(e,t,l)=>{var a=null!=t?xl([],t):null;if(a&&"HotelsFusion"!==l){if(e){var r,n;switch(e.__typename){case"WebPresentation_StandardFilterGroup":n=me.fromFilterInputSet(a,"merge").mergeStandardFilterGroup(e);break;case"WebPresentation_StandardFilterGroupWebOnly":n=me.fromFilterInputSet(a,"merge").mergeStandardFilterGroupWebOnly(e);break;default:console.error("[Fusion] unknown filter group type",e.__typename)}if(null!=(r=n)&&r.filters)return n.filters}}else if(null!=e&&e.filters)return e.filters;return Rl},kl=({filterGroup:e,onApply:t,disabled:l,webVariant:n,contentType:i})=>{var o=r((e=>{l||t(e)}),[t,l]),s=a((()=>Tl(e,[],n)),[e,n]);return T(Ke,{model:s,onChange:o,disabled:l,contentType:i})},Pl=({filterGroup:e,onApply:t,disabled:l,contentType:n})=>{var i=r((e=>{e&&!l&&t(xl([],e))}),[t,l]),o=a((()=>Cl(e)),[e]);return T(Ke,{disabled:l,model:o,onChange:i,contentType:n},`filter-group-${null===e.name?"no-name":e.name}`)},wl=({filterGroups:e,onUpdate:t,disabled:l=!1,webVariant:n,contentType:i})=>{var o=a((()=>bl(e)),[e]),s=r((e=>{t(xl(o,e))}),[t,o]);if(0===e.length)return null;var d=[...e];return d.sort(((e,t)=>pl(t)-pl(e))),T("div",{style:{userSelect:"none"},children:T(_e.Provider,{value:"leftRail",children:T(c,{variant:"stack",gap:"wide",children:d.filter(Boolean).map(((e,t)=>{var a=null!=e.name?e.name:`${e.__typename}-${t}`;switch(e.__typename){case"WebPresentation_SingleSelectFilterGroup":case"WebPresentation_WebNavigationFilterGroup":return T(Ye,{disabled:l,filterGroup:e,onApply:s,contentType:i},a);case"WebPresentation_StandardFilterGroup":case"WebPresentation_StandardFilterGroupWebOnly":return T(He,{disabled:l,filterGroup:e,onApply:s,webVariant:n,contentType:i},a);default:return T(v,{typename:e.__typename},a)}}))})})})},Nl="f e z",Wl=({title:e,children:t,isOpen:l=!1,slideIn:a=!0,onClose:r,onApply:n,onReset:i,resetButtonText:o,narrowModal:s=!1})=>{if(!l)return null;var d=k(W,{variant:"primary",size:"small",onClick:n,children:[T(f,{id:"sng_fusion_list_filters_modal_apply"})," "]}),u=null!=i?T(O,{onClick:i,children:null!=o?o:T(f,{id:"sng_fusion_list_filters_modal_reset"})}):void 0;return a?T(X,{header:e,slideFrom:"bottom",heightOption:"full",widthOption:"full",onClose:r,primaryButton:d,secondaryButton:u,children:T("div",{className:Nl,children:T("div",{className:"F1",children:t})})}):T(J,{variant:"fixed-height-sticky-footer",title:e,widthOption:s?"fixed-40":"fixed-60",heightOption:"fixed-80",onClose:r,primaryButton:d,secondaryButton:u,children:T("div",{className:Nl,children:T("div",{className:"F1",children:t})})})},El=()=>{},Ol=({filterGroup:e,onApply:t=El,onReset:n=El,webVariant:i,mapSurface:o=!1,contentType:s,disabled:d=!1})=>{var[c,p]=l(!1),[h,v]=l(null),{trackClick:b}=S(),{localize:F}=g(),y=de(),C=r((()=>{p(!1),v(null)}),[p]),x=r((e=>{v((t=>{return l=t||[],a=e,r=[...l,...a],n=new Map,r.forEach((e=>{var t,l,a=n.get(e.id);n.set(e.id,null!=a?(l=e,{id:(t=a).id,selected:ml(cl(t.selected,l.selected),l.deselected),deselected:ml(cl(t.deselected,l.deselected),l.selected),value:null!=l.value?l.value:t.value}):e)})),Array.from(n.entries()).map((([,e])=>e));var l,a,r,n}))}),[]),R=r((()=>{h&&t(xl([],h)),v(null),p(!1)}),[h,t]),P=r((()=>{var t=o?et.mapFilterEnterClick.clientContext:"openFilterPill",l=o?et.mapFilterEnterClick.clientParameter:e.name;b({clientContext:t,clientParameter:l}),p(!0)}),[e.name,b,o]),w=r((()=>{v(null),n(),p(!1)}),[p,v,n]),W=y?T(f,{id:"fusion_attraction_list_tour_product_link_text"}):null,E=a((()=>Tl(e,h,i)),[e,h,i]),{tabletOrSmaller:O}=m(),B=(e=>T(f,e===A?{id:"mobile_attraction_categories_filter"}:{id:"ta_filters"}))(e.groupType),M=null!==e.name?e.name:F.string("fusion_filters_title");null===e.name&&JSON.stringify(e.__typename);var V,L=e.filters?(V=e.filters,ul([...V])):0,G=0===L?M:T(_,{id:"filter.chip.name.count",args:{text:M,count:L}});return k(u,{children:[T(N,{disabled:d,"aria-label":e.groupType,selected:hl(e.filters),onClick:P,margin:"spacing-01",children:G}),T(_e.Provider,{value:"filterModal",children:T(Xe,{isOpen:c,title:B,onClose:C,onApply:R,onReset:w,resetButtonText:W,slideIn:O,narrowModal:!0,children:T(Ke,{model:E,onChange:x,mapSurface:o,contentType:s},`filter-group-${null===e.name?"no-name":e.name}`)})})]},e.name)},Al=()=>{},Bl=({filterGroup:e,onApply:t=Al,mapSurface:a=!1,contentType:n,disabled:i=!1})=>{var o,[s,d]=l(!1),{trackClick:c}=S(),p=r((()=>{var t=a?et.mapCardCategoryClick.clientContext:"openFilterPill",l=a?et.mapCardCategoryClick.clientParameter:e.name;c({clientContext:t,clientParameter:l}),d(!0)}),[c,e.name,a]),h=r((()=>{d(!1)}),[d]),v=r((e=>{e&&t(xl([],e)),d(!1)}),[t]),{tabletOrSmaller:f}=m(),g=Cl(e);if(s){var b=T(Ke,{model:g,onChange:v,mapSurface:a,contentType:n},`filter-group-${null===e.name?"no-name":e.name}`);o=f?T(X,{heightOption:"full",widthOption:"full",slideFrom:"bottom",onClose:h,children:b}):T(J,{variant:"fixed-height-sticky-footer",widthOption:"fixed-40",heightOption:"restricted",onClose:h,children:b})}return k(u,{children:[T(N,{disabled:i,"aria-label":e.groupType,selected:hl(g),onClick:p,margin:"spacing-01",icon:s?z:D,iconPosition:"trailing",children:e.name}),o]},e.name)},Ml=()=>{},Vl=({filterGroup:e,onApply:t=Ml,onReset:l=Ml,webVariant:a,mapSurface:r=!1,contentType:n,disabled:i=!1})=>{var{trackClick:o}=S();switch(e.__typename){case"WebPresentation_WebNavigationFilterGroup":case"WebPresentation_SingleSelectFilterGroup":return T(Ze,{filterGroup:e,onApply:e=>{o({clientContext:"setFilters",clientParameter:JSON.stringify(e)}),t(e)},onReset:l,mapSurface:r,contentType:n,disabled:i});case"WebPresentation_StandardFilterGroup":return T(Je,{filterGroup:e,onApply:t,onReset:l,webVariant:a,mapSurface:r,contentType:n,disabled:i});case"WebPresentation_StandardFilterGroupWebOnly":return null;default:return T(v,{typename:e.__typename})}},Ll=({filterGroups:e,onReset:t=Ml,onApply:l=Ml,mapSurface:a=!1,contentType:r,disabled:n=!1})=>{var i=bl(e),o=e=>{l(xl(i,e))};return T("div",{className:"_W v u G",children:e.map((e=>T(u,{children:T(Vl,{filterGroup:e,onReset:t,onApply:o,mapSurface:a,contentType:r,disabled:n})},e.name)))})},Gl=({filterGroups:e,onUpdate:t,contentType:l})=>{if(0===e.length)return null;var a=e.filter((e=>"WebPresentation_StandardFilterGroupWebOnly"===e.__typename)),r=bl(a),n=e=>{t(xl(r,e))},i=[...a];return i.sort(((e,t)=>pl(t)-pl(e))),T(P,{children:i.map((e=>T(Ke,{model:Cl(e),onChange:n,contentType:l},`filter-group-${null==e.name?"no-name":e.name}`)))})};return e("hasFilters",vl),[()=>{pe=tt,he=lt,ve=st,fe=mt,ge=[4,15],be=[4,4],_e=n("default"),Se=`.${ft.searchable.replace(/\s+/g,".")}`,Fe=new Set(["destinationGeo","type"]),ye=bt,Ce=4,xe=4,Re=Nt,Te=Et,ke=At,Pe=Lt,we=h(Gt),Ne=h(It),We=Dt,Ee=h($t),Oe=Kt,Ae=Ut,Be=jt,Me=Yt,Ve=Xt,Le=Qt,Ge=h(tl),Ie=h(ll),De=h(al),ze=h(il),$e=h(ol),Ke=dl,ue=class extends Set{addValueAt(e,t){var l=[...this];l[e]=t,this.reset(l)}addAll(e){e.forEach((e=>this.add(e)))}reset(e){this.clear(),e&&this.addAll(e)}get hasAny(){return this.size>0}export(){return[...this]}},ce=class{constructor(e){this.filters=new Map,e&&this.addInputs(e)}addInputs(e){e.filter(Boolean).forEach((e=>{this.addInput(e)}))}reset(e){this.filters.clear(),e&&this.addInputs(e)}addInput(e){var{id:t,value:l}=e;if(null!=t&&null!=l){var a=l.filter(Boolean);l.length!==a.length&&console.error("[Fusion] Input filter value contained nulls",t,l),this.getOrCreate(t).reset(a)}}getRange(e){var t=this.get(e);if(t&&t.size>=2){var[l,a]=[...t];if(null!=l&&null!=a){var r=Number(l),n=Number(a);if(!isNaN(r)&&!isNaN(n))return{rangeStart:r,rangeEnd:n};console.error("[Fusion] Range filter malformed, at least one part is NaN",e,l,a)}else console.error("[Fusion] Range filter malformed, at least one required part is null",e,l,a)}return null}getDistanceFrom(e){var t=this.get(e);if(t){var[l,a]=[...t];if(null!=l&&null!=a){var r=Number(a);if(!isNaN(r))return{distance:r,locationId:l};console.error("[Fusion] distance filter malformed",e,a)}}return null}getSelected(e,t){var l=this.get(e);return!!l&&l.has(t)}getOrCreate(e){var t=this.get(e);return t||(t=new ue,this.filters.set(e,t)),t}get(e){return this.filters.get(e)||null}clearAll(){[...this.filters.values()].forEach((e=>e.clear()))}clear(e){this.getOrCreate(e).reset()}has(e){return this.filters.has(e)}hasAnyValues(e){var t=this.get(e);return!!t&&t.hasAny}get hasAny(){return this.filters.size>0}export(){return[...this.filters.entries()].map((([e,t])=>({id:e,value:t.export()})))}},e("RouteFilterMerger",me=class e{constructor(e,t="overwrite"){this.routeFilters=void 0,this.mode=void 0,this.routeFilters=e,this.mode=t}get mergeMode(){return this.mode}reset(e){this.routeFilters=e||new ce([])}mergeModelFilters(e){return e?e.filter(Boolean).map((e=>this.mergeFilterGroup(e))):[]}mergeFilterGroupSelections(e){return this.mergeFilterGroup(e)}mergeFilterGroup(e){switch(e.__typename){case"WebPresentation_SingleSelectFilterGroup":return this.mergeSingleSelectFilterGroup(e);case"WebPresentation_StandardFilterGroup":return this.mergeStandardFilterGroup(e);case"WebPresentation_StandardFilterGroupWebOnly":return this.mergeStandardFilterGroupWebOnly(e);default:return console.error("[Fusion] unexpected filter group",e.__typename),e}}mergeFilters(e){return e?e.filter(Boolean).map((e=>this.mergeFilter(e))):e}mergeSingleSelectFilterGroup(e){return e.filter?{...e,filter:"navbar"!==e.filter.name?this.mergeEnumeratedValueFilter(e.filter):e.filter}:e}mergeStandardFilterGroup(e){return e.filters?{...e,filters:this.mergeFilters(e.filters.filter(Boolean))||null}:e}mergeStandardFilterGroupWebOnly(e){return e.filters?{...e,filters:this.mergeFilters(e.filters.filter(Boolean))||null}:e}mergeFilter(e){switch(e.__typename){case"WebPresentation_DistanceFromFilter":return this.mergeDistanceFromFilter(e);case"WebPresentation_EnumeratedValueFilter":return this.mergeEnumeratedValueFilter(e);case"WebPresentation_MultiValueFilter":return this.mergeMultiValueFilter(e);case"WebPresentation_RangedValueFilter":return console.error("[Fusion] WebPresentation_RangedValueFilter is deprecated"),e;case"WebPresentation_RangedSliderFilter":return this.mergeRangeSliderFilter(e);case"WebPresentation_ReferenceFilter":return this.mergeReferenceFilter(e);case"WebPresentation_SingleButtonFilter":return e;default:return console.error("[Fusion] unknown filter type",e.__typename),e}}mergeRangeSliderFilter(e){if(e.name){var t=this.routeFilters.getRange(e.name);if(t)return{...e,selectedRangeStart:t.rangeStart,selectedRangeEnd:t.rangeEnd}}return e}mergeDistanceFromFilter(e){if(e&&e.name&&e.locations){var t=this.routeFilters.getDistanceFrom(e.name);if(t){var{distance:l,locationId:a}=t;return{...e,selectedDistance:l,locations:(e.locations||[]).filter(Boolean).map((e=>({...e,isSelected:null!=e.value&&e.value===a})))}}}return e}isRouteValueSelected(e,t){return this.routeFilters.getOrCreate(e).has(t)}mergeSelectedState(e,t,l){var a=!1;switch(this.mode){case"blend":a=l||this.isRouteValueSelected(e,t);break;case"merge":a=this.routeFilters.has(e)?this.isRouteValueSelected(e,t):l;break;case"overwrite":default:a=this.isRouteValueSelected(e,t)}return a}mergeMultiValueFilter(e){return e.name&&e.values?{...e,values:(e.values||[]).filter(Boolean).map((t=>({...t,isSelected:this.mergeSelectedState(e.name,t.value,t.isSelected)})))}:e}mergeEnumeratedValueFilter(e){return e.name&&e.values?{...e,values:(e.values||[]).filter(Boolean).map((t=>({...t,isSelected:this.mergeSelectedState(e.name,t.value,t.isSelected)})))}:e}mergeReferenceFilter(e){return e.name&&e.values?{...e,values:(e.values||[]).filter(Boolean).filter((e=>null!=e.filterName)).map((e=>({...e,isSelected:this.mergeSelectedState(e.filterName||"",e.value,e.isSelected)})))}:e}static fromFilterInputSet(t,l="overwrite"){return new e(new ce(t),l)}}),Ue=new Set([L,qe]),je=new Set(["price","distFrom"]),He=kl,Ye=Pl,Xe=Wl,Je=Ol,Ze=Bl,e({CheckboxItem:pe,ChipItem:he,DesktopFiltersMemoized:d(wl),FILTER_ATTRACTIONS_SUPPLIER_TOGGLE_ID:qe,FilterPillsMemoized:d(Ll),FilterValueLabel:Te,MAP_TRACKING_ACTIONS:et,REMOVE_FLAG:Qe,RouteFilterMerger:me,ShowAllOptionsModal:ye,TourOperatorsMemoized:d(Gl),applyFilterChangeList:xl,extractRouteFiltersFromFilterGroups:bl,hasFilters:vl,sanitizeFilters:fl,trackAppliedFilters:_l,unionFilters:Fl,useFilterGroupsForSurface:yl})},[e=>(l=e.useState,a=e.useMemo,r=e.useCallback,n=e.createContext,i=e.useContext,o=e.useRef,s=e.useEffect,d=e.memo,u=e.Fragment),e=>c=e.default,e=>(m=e.useViewportCategory,p=e.WPSUnexpected,h=e.fused,v=e.WPSUnsupportedType),e=>(f=e.default,g=e.useLocalize,b=e.useIntlFormatter,_=e.UnsafeLocalize),e=>S=e.useFusionTracking,e=>F=e.default,e=>y=e.default,e=>(C=e.Checkbox,x=e.RadioButton,R=e.RadioGroup),e=>(T=e.jsx,k=e.jsxs,P=e.Fragment),e=>(w=e.ChipInput,N=e.ChipButton),e=>(W=e.default,E=e.CircularButton,O=e.BorderlessButton),e=>(A=e.FILTER_ATTRACTIONS_L1_CATEGORY_ID,B=e.CONTENT_TYPE_ATTRACTION,M=e.CONTENT_TYPE_ATTRACTION_PRODUCT,V=e.FILTER_ATTRACTIONS_CATEGORY_ID,L=e.FILTER_ATTRACTIONS_ALL_ID),e=>G=e.default,e=>I=e.default,e=>D=e.default,e=>z=e.default,e=>$=e.HoverTooltip,e=>(K=e.KEY_UP,U=e.KEY_DOWN),e=>j=e.default,e=>(H=e.useClientSideLayoutEffect,Y=e.useIsRobotSafe),e=>(X=e.SlideInModal,J=e.Modal),e=>Z=e.default,e=>q=e.default,e=>(Q=e.BubbleRatingWithLabel,ee=e.BubbleRating),e=>te=e.Tooltip,e=>le=e.default,e=>ae=e.DropdownMenu,e=>re=e.default,e=>ne=e.DropdownTooltip,e=>ie=e.useRoute,e=>(oe=e.deriveLinkInfoFromInternalLink,se=e.isRenderableSurface),e=>de=e.useSemLanderTest]]},["cDcdfi","87JRug","eGHhuQ","0DsHEV","BfEQXK","VP50Wc","jSLlaY","MsxLpS","F5FCuN","QLckY2","7yGKf-","L8Ny73","bOsokU","nLgubM","R5mFUK","RSzTs1","4J6GHD","h7E4Ym","jaCyxS","4Z07E2","E1X9WP","fZR2pj","AhTrXA","MBK0so","6p--LX","F24sfv","MCrJhI","2dxA8m","wT5DgL","F8raOV","q-7VD4","DY6uxn"]]);
