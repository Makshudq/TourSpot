(this.$WP=this.$WP||[]).push(["vybtJq",(p,e)=>{"use strict";var r,i,s,u,o,t,n,T,a,l,d,c,v,m,S="REGISTER_POPUP",g="DISMISS_POPUP",k=(p,e)=>{switch(e){case 0:return k(p,50);case 50:return p.popupMaxTier>50||p.popupSkipTiers&&p.popupSkipTiers.get(50)?k(p,100):50;case 100:return p.popupMaxTier>100||p.popupSkipTiers&&p.popupSkipTiers.get(100)?k(p,200):100;case 200:return p.popupSkipTiers&&p.popupSkipTiers.get(200)?k(p,300):200;case 300:return p.popupSkipTiers&&p.popupSkipTiers.get(300)?k(p,400):300;case 400:return p.popupSkipTiers&&p.popupSkipTiers.get(400)?k(p,500):400;case 500:return 500;default:return 0}},h=(p,e,r,i)=>{var s=p.popupNodes,u=p.popupTier,o=new Map(p.popupSkipTiers),t=new Map(p.popupTierDismissals),n=e.tier;i&&o.set(n,!0),p.popupNodes.some((p=>p.key===e.key))||(s=[...p.popupNodes,e],u=k({...p,popupSkipTiers:o},0));var T=t.get(n),a=r.filter((p=>!(null!=T&&T.includes(p))));return a.length>0&&(T&&T.length>0&&a.length>0?t.set(n,[...T,...a]):t.set(n,r)),{...p,popupNodes:s,popupTierDismissals:t,popupTier:u,popupSkipTiers:o}},E=(p,e)=>{var r=new Map(p.popupTierEvents),i=[...r.get(p.popupTier)||[]];if(e.forEach((e=>{var r;!i.includes(e)&&null!=(r=p.popupNodes)&&r.some((r=>r.key===e&&r.tier===p.popupTier))&&(i=[...i,e])})),i.toString()!==(p.popupTierEvents.get(p.popupTier)||[]).toString()){var s,u,o={popupTierEvents:p.popupTierEvents,popupTier:p.popupTier};(null!=(s=p.popupSkipTiers)&&s.get(p.popupTier||0)||p.popupTierDismissals&&p.popupNodes.length>0&&void 0!==p.popupTier&&(i&&(null==(u=i)?void 0:u.length)>0||0===p.popupTier))&&(r.set(p.popupTier,i),o=(p=>{var e,r=e=>({...p,popupTier:e});if(Array.from(p.popupTierEvents.get(p.popupTier)||[]).sort().toString()===Array.from((null==(e=p.popupTierDismissals)?void 0:e.get(p.popupTier||0))||[]).sort().toString())switch(p.popupTier){case 0:return r(k(p,50));case 50:return r(k(p,100));case 100:return r(k(p,200));case 200:return r(k(p,300));case 300:return r(k(p,400));case 400:return r(k(p,500));default:return p}return p})({...p,popupTierEvents:r}));var t=p.popupMaxTier;return p.popupMaxTier<o.popupTier&&(t=o.popupTier),{...p,popupTierEvents:r,popupMaxTier:t,popupTier:o.popupTier}}return p},P=(p=(()=>({popupNodes:[],popupTierDismissals:new Map,popupTierEvents:new Map,popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}))(),e)=>{switch(e.type){case S:return void 0!==e.element?h(p,e.element,e.dismissEvents,e.skip):(console.error("Missing element for action in the popup reducer."),p);case g:return E(p,e.dismissEvents);default:return p}},M=({children:p})=>d(c,{children:p}),y=({children:p})=>{var[e,u]=r(P,{popupNodes:[],popupTierDismissals:new Map,popupTierEvents:new Map,popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}),o=i(((p,e,r)=>{u({type:S,element:p,dismissEvents:e,skip:r})}),[u]),t=i((p=>{u({type:g,dismissEvents:p})}),[u]),n=s((()=>({registerPopupTier:o,dismissEvents:t})),[o,t]);return l(v.Provider,{value:n,children:[d(m,{children:p}),e.popupNodes.filter((p=>p.tier===e.popupTier)).map((({node:p,key:e})=>d(m,{children:d(a,{children:p})},e)))]})},f=p=>{var{registerPopupTier:e,dismissEvents:r}=t(v),{factory:u,key:o,eventTypes:a,tier:l,skip:d}=p,c=n(null),m=i((()=>{r(a)}),[r,a]),S=s((()=>({dismiss:m})),[m]);return T((()=>{c.current=u(S),e({node:c.current,key:o,tier:l},a,d)}),[a,u,o,e,S,l,d]),{dismiss:m}};return[()=>{v=u({registerPopupTier:()=>{},dismissEvents:()=>{}}),m=o(M),p({DISMISS_POPUP:g,PopupHierarchyLithiumProvider:y,REGISTER_POPUP:S,dismiss:E,register:h,usePopupHierarchyRender:f})},[p=>(r=p.useReducer,i=p.useCallback,s=p.useMemo,u=p.createContext,o=p.memo,t=p.useContext,n=p.useRef,T=p.useEffect),p=>a=p.ErrorBoundary,p=>(l=p.jsxs,d=p.jsx,c=p.Fragment)]]},["cDcdfi","nIW_Rw","F5FCuN"]]);
