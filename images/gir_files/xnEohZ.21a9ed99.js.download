(this.$WP=this.$WP||[]).push(["xnEohZ",(e,t)=>{"use strict";var n,i,a,r,l,s,o,d,c,m,u,p,h,E,v,I,_,T,y,S,P,g,N,f,b,x,k,O,D,A,M,L,C,w,R,V,F,B,H,G,U,X,Z,z,$,Y,W,K,j,Q,q,J,ee,te,ne,ie,ae,re,le,se,oe,de,ce,me,ue,pe,he,Ee,ve,Ie,_e,Te,ye,Se,Pe,ge,Ne,fe,be,xe,ke,Oe,De,Ae,Me,Le="apd_itinerary",Ce={clickStartSeeDetails:()=>({module:Le,action:"click_start_see_details"}),clickStartSeeImportantInformation:()=>({module:Le,action:"click_start_see_important_information"}),clickStopSeeDetails:()=>({module:Le,action:"click_stop_see_details"}),clickStopDetailsPoiLink:()=>({module:Le,action:"click_stop_details_poi_link"}),clickStopDetailsPhoto:()=>({module:Le,action:"click_stop_details_photo"}),clickSeeMoreStops:()=>({module:Le,action:"click_see_more_stops"}),hoverMapPin:()=>({module:Le,action:"hover_map_pin"}),clickMapPin:()=>({module:Le,action:"click_map_pin"}),clickMapDragAndZoom:()=>({module:Le,action:"click_map_drag_and_zoom"}),clickMapRecenter:()=>({module:Le,action:"click_map_recenter"}),clickMapOpen:()=>({module:Le,action:"click_map_open"})},we={onSeeImportantInformationClick:()=>{},preferSeeImportantCallback:!1,importantInformationText:null},Re=()=>{var e="MOBILE"===u(),t=p(),{onSeeImportantInformationClick:n,preferSeeImportantCallback:i,importantInformationText:l}=a(se),s=r((a=>{((e,t,n,i)=>{if(i(le.clickStartSeeImportantInformation()),e||t)n();else{var a=_(E)-v-I;window.scrollTo({top:a,behavior:"smooth"})}})(e,i,n,t),a.stopPropagation()}),[e,i,n,t]);return T(m,{elementType:"span",variant:"button-02",children:T("span",{className:"_S Ci","data-automation":"seeImportantInformationForDetails",onClick:s,children:l})})},Ve="zWBsh w _T o",Fe=(e=!1)=>e&&window.innerHeight>850?200:170,Be=(e,t)=>"TRIPADVISOR_API"!==e.serviceProvider&&e.name?e.name:null!=t&&t.name?t.name:e.name,He=(e,t)=>{var n=new Map,i=[{passedBys:[],latLng:null,locationDetails:null,index:0,label:"0",displayName:null}];return t&&t.forEach((e=>{e&&e.locationId&&n.set(e.locationId,e)})),e.forEach((e=>{if("NO_STOP"!==e.admissionInclusionTypeEnum){var t=e.taLocationId?n.get(e.taLocationId):null,a={passedBys:[],latLng:e.latitude&&e.longitude?new x(e.latitude,e.longitude):null,locationDetails:"TRIPADVISOR_API"===e.serviceProvider?t:null,index:i.length,label:String(i.length),displayName:Be(e,t),...e};i.push(a)}else i[i.length-1].passedBys.push(e.name)})),i},Ge=(e,t)=>{var n=new Map;t&&t.forEach((e=>{e&&e.locationId&&n.set(e.locationId,e)}));var i=[{passedBys:[],latLng:null,locationDetails:null,index:0,label:"0",displayName:null}];return e.forEach((e=>{e.productItineraryItems.forEach((t=>{if("NO_STOP"!==t.admissionInclusionTypeEnum){var a=t.taLocationId?n.get(t.taLocationId):null,r={passedBys:[],latLng:t.latitude&&t.longitude?new x(t.latitude,t.longitude):null,locationDetails:a,index:i.length,label:String(e.groupNumber),displayName:Be(t,a),...t};i.push(r)}else i[i.length-1].passedBys.push(t.name)}))})),i},Ue=e=>e.filter((e=>"END"===e.startEndPointTypeEnum||"START_AND_END"===e.startEndPointTypeEnum)),Xe=(e,t)=>!!t[-e-1]&&("START"===t[-e-1].startEndPointTypeEnum||"START_AND_END"===t[-e-1].startEndPointTypeEnum),Ze=(e,t)=>!!t[-e-1]&&"END"===t[-e-1].startEndPointTypeEnum,ze=(e,t,n)=>{switch(e){case"START":return n.string("exp_start_point_num",{0:t});case"END":return n.string("exp_end_point_num",{0:t});case"START_AND_END":return n.string("exp_start_and_end_point_num",{0:t});default:return""}},$e=(e,t)=>t||Ue(e).length>0,Ye=(e,t,n,i,a)=>{var r="",l=null,s=null,o=null,d=null,c=(e=>e.filter((e=>"START"===e.startEndPointTypeEnum||"START_AND_END"===e.startEndPointTypeEnum)))(e),m=Ue(e);if(i)if(t)r=a.string("exp_youll_return_to_the_starting_point");else{if(!(m.length>0))return null;r=a.string("exp_youll_end_at"),1===m.length&&([{name:l}]=m,[{address:o}]=m,[{instruction:d}]=m)}else r=a.string("exp_youll_have_num_starting_options",{0:c.length}),"PICKUP_EVERYONE"===n?r=a.string("exp_youll_get_picked_up"):0===c.length?r=a.string("exp_tour_start"):1===c.length&&(r=a.string("exp_youll_start_at_no_colon"),[{name:l}]=c,"MEET_EVERYONE_AT_START_POINT"!==n&&"UNDEFINED"!==n||([{address:o}]=c,[{instruction:d}]=c)),"PICKUP_AND_MEET_AT_START_POINT"===n&&(s=a.string("exp_or_you_can_also_get_picked_up"));return{name:l,address:o,instruction:d,title:r,additionalInfo:s}},We=(e,t)=>{var{durationInMinutes:n}=e;return n?n<120?t.string("exp_stop_num_minutes",{0:n}):t.string("exp_stop_num_hours",{0:Math.round(n/60)}):""},Ke=(e,t)=>{var{admissionInclusionTypeEnum:n}=e;if(n){if("YES"===n)return t.string("exp_admission_included");if("NO"===n)return t.string("exp_admission_excluded")}return""},je=(e,t)=>{var{inclusionTypeEnum:n}=e;if(e){if("BREAKFAST"===n)return t.string("attractions.booking.section.mdtitinerary.inclusion.breakfast");if("LUNCH"===n)return t.string("attractions.booking.section.mdtitinerary.inclusion.lunch");if("DINNER"===n)return t.string("attractions.booking.section.mdtitinerary.inclusion.dinner")}return""},Qe=(e,t)=>{switch(t.type){case"INIT_DATA":return{...e,itemsFormatted:t.itemsFormatted};case"SET_STOPS_EXPANDED":return{...e,stopsExpanded:t.stopsExpanded};case"SET_SELECTED_INDEX":return e.mapInterface&&t.selectedIndex&&e.itemsFormatted[t.selectedIndex]&&e.itemsFormatted[t.selectedIndex].latLng&&e.mapInterface.setCenter(e.itemsFormatted[t.selectedIndex].latLng,16),(t.selectedStartPoints||t.selectedEndPoints||!t.selectedIndex)&&e.mapInterface&&e.initialMapZoom&&e.initialMapCenter&&e.mapInterface.setCenter(e.initialMapCenter,e.initialMapZoom),{...e,selectedIndex:t.selectedIndex,stopsExpanded:!!(t.selectedIndex&&t.selectedIndex>=2)||e.stopsExpanded,selectedStartPoints:!!t.selectedStartPoints,selectedEndPoints:!!t.selectedEndPoints,mapMoved:!t.selectedStartPoints&&!t.selectedEndPoints&&!!t.selectedIndex,triggerScrolling:!0};case"HOVERING":return{...e,hoveredIndex:t.hoveredIndex,...void 0!==t.hoveredStartPoints?{hoveredStartPoints:t.hoveredStartPoints}:null,...void 0!==t.hoveredEndPoints?{hoveredEndPoints:t.hoveredEndPoints}:null};case"SET_HOVER_TIMEOUT":return{...e,hoverTimeout:t.hoverTimeout};case"SET_MAP_MOVED":return{...e,mapMoved:t.mapMoved};case"SET_INITIAL_MAP_ATTRIBUTES":return{...e,initialMapZoom:t.initialMapZoom,initialMapCenter:t.initialMapCenter,mapInterface:t.mapInterface};case"SET_MAP_OVERLAY_OPEN":return{...e,mapOverlayOpen:t.mapOverlayOpen,selectedIndex:null,selectedStartPoints:t.mapOverlayOpen,selectedEndPoints:!1,mapMoved:!1};case"SET_MOUSE_IN_DETAILS":return{...e,mouseInDetails:t.mouseInDetails};case"RESET_TRIGGER_SCROLLING":return{...e,triggerScrolling:!1};default:return e}},qe="BwuQs b MB",Je=e=>{if(e&&e.reviewSummary&&e.reviewSummary.rating)return 10*e.reviewSummary.rating},et=e=>{if(e&&e.thumbnail&&e.thumbnail.photoSizes){var{photoSizes:t}=e.thumbnail;return t.map((e=>e&&e.width&&e.width>100?e.url:null)).find((e=>e))}return null},tt=({item:e,showLabelInCarousel:t})=>{var n,i,{localize:a}=C();return T(F,{title:t?y(S,{children:[T("div",{children:T(L,{id:"attractions.booking.section.mdtitinerary.day",args:{0:e.label}})}),T("div",{className:qe,children:e.name})]}):e.name&&`${e.index}. ${e.name}`||"",fallbackIcon:R,rating:Je(null==e?void 0:e.locationDetails),numReviews:(null==e||null==(n=e.locationDetails)||null==(i=n.reviewSummary)?void 0:i.count)||0,thumbnail:et(null==e?void 0:e.locationDetails),subtitle:T("div",{className:"vOZGN",children:We(e,a)})})},nt=({startEndPointInfo:e})=>y("div",{className:"gTIpi Gi S",children:[T("div",{className:"VSgWR j",children:T(V,{size:20})}),y("div",{className:"kDrzw _T",children:[T("div",{className:qe,children:T("span",{dangerouslySetInnerHTML:{__html:e.title}})}),e.name&&T("div",{className:"tcNvg b MB",children:e.name}),e.additionalInfo&&T("div",{className:"KUMgc MB",children:e.additionalInfo})]})]}),it=({item:e,showLabelInCarousel:t})=>e.itineraryItem?T(tt,{item:e.itineraryItem,showLabelInCarousel:t}):e.startEndPointInfo?T(nt,{startEndPointInfo:e.startEndPointInfo}):null,at=({name:e})=>T("div",{className:"ZnTXc Gi S b q",children:e}),rt=({itemsFormatted:e,startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,showLabelInCarousel:r})=>{var{selectedIndex:s,selectedStartPoints:o,selectedEndPoints:d}=a(de),{localize:c}=C(),{dispatch:m}=a(ce),u=l((()=>Ye(t,n,i,!1,c)),[t,n,i,c]),p=l((()=>Ye(t,n,i,!0,c)),[t,n,i,c]);if(!t)return null;var h=[];u&&h.push({startEndPointInfo:u}),h.push(...e.slice(1).map((e=>({itineraryItem:e})))),p&&h.push({startEndPointInfo:p});var E=s||0;(o||Xe(E,t))&&(E=0),(d||Ze(E,t))&&(E=h.length-1);var v=h.map((e=>{var t,n;return T(me,{item:e,showLabelInCarousel:r},(null==(t=e.itineraryItem)?void 0:t.index)||(null==(n=e.startEndPointInfo)?void 0:n.title))}));return T("div",{className:"POEha _Q w",children:T(w,{items:v,itemSpacing:16,startIndex:E,onSlide:e=>m({type:"SET_SELECTED_INDEX",selectedIndex:(u&&e>0||e>=0)&&(p&&e<h.length-1||e<h.length)?e:null,selectedStartPoints:!!u&&0===e,selectedEndPoints:!!p&&e===h.length-1})})})},lt=(e,t,n,i,a)=>{if(e<0){var r=n[-e-1];if(("START"===r.startEndPointTypeEnum||"START_AND_END"===r.startEndPointTypeEnum)&&i)return!0;if(("END"===r.startEndPointTypeEnum||"START_AND_END"===r.startEndPointTypeEnum)&&a)return!0}return e===t},st=({index:e,label:t,name:n,latLng:i,startEndPoints:l,disableInteractions:s})=>{var{selectedIndex:o,hoveredIndex:d,mapOverlayOpen:c,mouseInDetails:m,selectedStartPoints:h,selectedEndPoints:E,hoveredStartPoints:v,hoveredEndPoints:I}=a(de),{dispatch:_}=a(ce),S="MOBILE"===u(),P=p(),g=r((()=>{e&&_({type:"SET_SELECTED_INDEX",selectedIndex:e,selectedStartPoints:!S&&Xe(e,l),selectedEndPoints:!S&&Ze(e,l)}),P(le.clickMapPin())}),[_,S,e,l,P]),f=r((()=>{!S&&e&&(_({type:"HOVERING",hoveredIndex:e}),P(le.hoverMapPin()))}),[S,_,e,P]),b=r((()=>_({type:"HOVERING",hoveredIndex:null})),[_]),x=r((()=>{S&&!c&&(_({type:"SET_MAP_OVERLAY_OPEN",mapOverlayOpen:!0}),P(le.clickMapRecenter()))}),[_,S,c,P]);if(!i||!e)return null;var O=lt(e,o,l,h,E)&&S&&c,D=lt(e,d,l,v,I),A=D&&B.hovered?B.hovered:B.inactive;return y(H,{position:i,...s?{onClick:x}:{onClick:g,onMouseEnter:f,onMouseLeave:b,hovered:D,selected:O,animated:!0},children:[T("span",{style:{width:`${A.width}px`,height:A.height*B.inactive.width/B.inactive.height+"px",left:`-${A.anchor.x}px`,top:`-${A.anchor.y}px`,fontSize:A.anchor.x-2.5+"px",lineHeight:A.anchor.x-2.5+"px"},className:N("HyRvV b f _Q j u",(D||O)&&"kAvZk"),children:e>0?t:T(V,{})}),!S&&n&&T(k,{direction:"top",offset:{x:0,y:-46},autoPan:!1,zIndexOffset:G.hoverPopup,disableInteraction:!0,visible:lt(e,d,l,!1,!1)&&!m,children:T(at,{name:n})})]})},ot=({startEndPoints:e,disableInteractions:t})=>{var{localize:n}=C(),i=new Map([["START",0],["END",0],["START_AND_END",0]]);return T(S,{children:e.map(((a,r)=>{var{startEndPointTypeEnum:l,latitude:s,longitude:o}=a;if(l&&s&&o){var d=i.get(l);return i.set(l,d+1),T(pe,{index:-r-1,latLng:s&&o?new x(s,o):null,name:ze(l,d+1,n),startEndPoints:e,disableInteractions:t},a.name)}return null}))})},dt=({itemsFormatted:e,startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,disableInteractions:r,showLabelInCarousel:l})=>{var s="MOBILE"===u(),{mapOverlayOpen:o,mapInterface:d}=a(de);return y(S,{children:[e.map((e=>{var n,i;return T(pe,{index:e.index,label:e.label,latLng:e.latLng,name:null!=(n=e.locationDetails)&&n.name?null==(i=e.locationDetails)?void 0:i.name:e.name,startEndPoints:t,disableInteractions:r},e.name||`filler${e.index}`)})),T(he,{itemsFormatted:e,startEndPoints:t,disableInteractions:r}),o&&T(ue,{itemsFormatted:e,startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,showLabelInCarousel:l}),!d&&T(A,{}),!s&&T("div",{className:"TOUPs _Q",children:T(M,{})})]})},ct=e=>T("div",{className:"KEtiu Pe PU Pr PG _Q t _U s l Gi Z1 f F",children:T("span",{className:"LqvlL S7 H4 _S",onClick:e.onClose,children:T(U,{})})}),mt=()=>{var{mapMoved:e,initialMapZoom:t,initialMapCenter:n,mapInterface:i,mapOverlayOpen:l}=a(de),s=p(),{dispatch:o}=a(ce),d=r((()=>{t&&n&&i&&(i.setCenter(n,t),o({type:"SET_MAP_MOVED",mapMoved:!1})),s(le.clickMapRecenter())}),[t,n,i,o,s]);return e&&T("div",{className:N("fPYmD _Q f w l j",l&&"ehJYc"),children:T("div",{className:N("FYJYI q S4"),children:y(Z,{legacyStyled:!0,variant:"standard",onClick:d,fullWidth:!0,children:[T("span",{className:"vGuEB PO S4 Cj",children:T(X,{})}),T(L,{id:"exp_recenter_itinerary"})]})})})},ut=({itemsFormatted:e,startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,showLabelInCarousel:l,roundedCorners:s=!1})=>{var{params:o}=f(),d="MOBILE"===u(),{mapOverlayOpen:c}=a(de),{dispatch:m}=a(ce),h=p(),E=r((()=>{var n=[];return e.forEach((e=>e.latLng&&n.push(e.latLng))),t.forEach((e=>{e.latitude&&e.longitude&&n.push(new x(e.latitude,e.longitude))})),n.length>0?O.fromArray(n):null}),[e,t])(),v=r((e=>{m({type:"SET_INITIAL_MAP_ATTRIBUTES",initialMapZoom:e.map.getZoom(),initialMapCenter:e.map.getCenter(),mapInterface:e.map})}),[m]),I=r((e=>{e.userGesture&&(m({type:"SET_MAP_MOVED",mapMoved:!0}),h(le.clickMapDragAndZoom()))}),[h,m]),_={initialBounds:E,onLoad:v,onCenterChange:I,onZoomChange:I,geoId:o.geoId||0};return c?T(b,{fullscreenAlways:!0,children:T("div",{className:N(Ve,"RKXMS"),"data-automation":"itineraryMap",children:y(D,{..._,children:[T(Ie,{}),T(ve,{onClose:()=>m({type:"SET_MAP_OVERLAY_OPEN",mapOverlayOpen:!1})}),T(Ee,{itemsFormatted:e,startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,disableInteractions:!1,showLabelInCarousel:l})]})})}):E&&T("div",{className:N(Ve,{AKgWa:s}),"data-automation":"itineraryMap",children:y(D,{..._,disableGestures:d,scrollWheelZoom:!1,onClick:()=>{m({type:"SET_MAP_OVERLAY_OPEN",mapOverlayOpen:d}),h(le.clickMapOpen())},children:[!d&&T(Ie,{}),T(Ee,{itemsFormatted:e,startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,disableInteractions:d,showLabelInCarousel:l})]})})},pt=({icon:e,content:t,showDottedLine:n})=>y("li",{className:"f",children:[T("div",{className:N("uFADE",n&&"nrvnw Z1"),children:e}),T("div",{className:"BnVmm w Pr _c",children:t})]}),ht=({variant:e,number:t})=>T("span",{className:N("OeBIg f j u Rb",{FXyap:"primary"===e,OgfiT:"secondary"===e}),children:T("span",t?{children:t}:{className:"sEZQz",children:T(V,{})})}),Et="kxUdc e",vt="UWVLm _S S2 H2",It="IOOBb b",_t="gcsQa ND",Tt="FEKfY",yt=e=>e.thumbnail&&e.thumbnail.id&&e.thumbnail.photoSizes?{id:e.thumbnail.id,photoSizes:e.thumbnail.photoSizes.map((e=>({...e&&e.url?{url:e.url}:null,...e&&e.width?{width:e.width}:null,...e&&e.height?{height:e.height}:null})))}:null,St=({description:e})=>T("div",{className:"qevUW S2 H2",children:T(j,{numLinesToShow:8,collapsible:!0,ctaNewline:!0,cta:y("div",{className:vt,children:[T("span",{className:It,children:T(L,{id:"common_Readmore"})}),T("span",{className:_t,children:T($,{})})]}),ctaCollapse:y("div",{className:vt,children:[T("span",{className:It,children:T(L,{id:"common_Readless"})}),T("span",{className:_t,children:T(Y,{})})]}),children:e||""})}),Pt=({location:e})=>{var t=h(le.clickStopDetailsPhoto());return e&&!!e.locationId&&!!e.name&&!!e.thumbnail&&y(S,{children:[T("div",{className:"hZhmH t _U Z1",children:T(q,{object:{locationId:e.locationId,__typename:"LocationInformation"},children:(e,t)=>T(J,{bookmarkStyle:"stacked",active:t,onClick:e})})}),T("a",{href:e.url,target:"_blank",onClick:t,children:!!e.thumbnail.id&&!!e.thumbnail.photoSizes&&T(W,{imageSet:null,name:e.name,photo:yt(e)})})]})},gt=({name:e})=>T(Z,{legacyStyled:!0,variant:"secondary",fullWidth:!0,children:T(L,{id:"more_about_geo",args:{sGeo:e}})}),Nt=({location:e,description:t,alwaysExpanded:n,selected:i,index:l})=>{var{triggerScrolling:d}=a(de),{localize:c}=C(),u=p(),E=h(le.clickStopDetailsPoiLink()),[v,I]=s(n),_=null,P=e&&e.thumbnail&&e.thumbnail.photoSizes;P&&t?_=c.string("exp_see_details_and_photo"):P?_=c.string("exp_see_photo"):t&&(_=c.string("common_see_details")),o((()=>{d&&!n&&I(i)}),[n,i,d]);var{dispatch:g}=a(ce),f=r((e=>{I(!v),u(le.clickStopSeeDetails()),v&&(e.stopPropagation(),g({type:"SET_SELECTED_INDEX",selectedIndex:null}))}),[v,I,g,u]),b=`itineraryItemDetail_${l}`;return _&&y("div",{className:"ZurqW Fl e",children:[v&&(e?y(S,{children:[T((()=>{var t,n;return null!=e&&null!=(t=e.reviewSummary)&&t.count&&null!=e&&null!=(n=e.reviewSummary)&&n.rating?T(K,{numReviews:e.reviewSummary.count,rating:e.reviewSummary.rating}):null}),{}),y("div",{className:"vTRLw e Fl","data-automation":`${b}`,children:[T("div",{className:"rRYnh w",children:T(Pt,{location:e})}),e.url&&e.name&&(t?y("div",{className:Et,children:[t&&T(St,{description:t}),T("a",{href:e.url,className:"yyIPC","data-automation":`${b}_moreDetailLink`,target:"_blank",onClick:E,children:T(gt,{name:e.name})})]}):T("div",{className:N(Et,"j"),children:T("a",{href:e.url,target:"_blank","data-automation":`${b}_moreDetailLink`,onClick:E,children:T(gt,{name:e.name})})}))]})]}):T(St,{description:t})),T("span",{onClick:f,children:v?n||T(m,{elementType:"span",variant:"button-02",children:T("span",{className:Tt,"data-automation":`${b}_seeLess`,children:T(L,{id:"attractions.merchandising.see-less"})})}):T(m,{elementType:"span",variant:"button-02",children:T("span",{className:Tt,"data-automation":`${b}_seeMore`,dangerouslySetInnerHTML:{__html:_}})})})]})},ft=e=>e.index<1,bt=({productItineraryItem:e,expanded:t})=>{var n="MOBILE"===u(),{hoverTimeout:i,selectedIndex:l}=a(de),{dispatch:s}=a(ce),{localize:o}=C(),d=r((()=>{s({type:"SET_SELECTED_INDEX",selectedIndex:e.index})}),[s,e.index]),c=r((()=>{n||(i&&clearTimeout(i),s({type:"SET_HOVER_TIMEOUT",hoverTimeout:setTimeout((()=>s({type:"HOVERING",hoveredIndex:e.index,hoveredStartPoints:!1,hoveredEndPoints:!1})),300)}))}),[n,i,s,e.index]),p=r((()=>{n||(i&&clearTimeout(i),s({type:"SET_HOVER_TIMEOUT",hoverTimeout:null}),s({type:"HOVERING",hoveredIndex:null}))}),[n,i,s]);return y("div",{className:N("mBrgO w _S _T"),onClick:d,onMouseEnter:c,onMouseLeave:p,children:[e.displayName&&T(m,{elementType:"div",variant:"title-05",children:T("span",{className:"xZDme",children:e.displayName})}),T(m,{elementType:"div",variant:"body-01",children:T("span",{className:"PhXEH",children:`${We(e,o)} ${e.durationInMinutes&&e.admissionInclusionTypeEnum&&("YES"===e.admissionInclusionTypeEnum||"NO"===e.admissionInclusionTypeEnum)?"-":""} ${Ke(e,o)}`})}),T(Se,{location:e.locationDetails,description:e.description,alwaysExpanded:t,selected:e.index===l,index:e.index})]})},xt=({productItineraryItem:e,useNumberIcon:t})=>ft(e)?null:T(ye,{variant:"secondary",number:t?e.index:void 0}),kt=e=>{var{productItineraryItem:t,stickyHeaderOffset:n}=e,i=d(null),{selectedIndex:r,triggerScrolling:l}=a(de),{dispatch:s}=a(ce),c="MOBILE"===u();o((()=>{!c&&r===t.index&&i&&i.current&&l&&(s({type:"RESET_TRIGGER_SCROLLING"}),setTimeout((()=>z(i,n)),300))}),[s,l,t.index,c,r,i,n]);var p=ft(t);return y("div",{"data-automation":`itineraryItem_${t.index}`,ref:i,children:[!p&&T(bt,{...e}),t.passedBys&&t.passedBys.length>0&&y("div",{className:N("cDvlW",!p&&"Me"),children:[T("div",{className:"MHOEe Po",children:T(m,{elementType:"div",variant:"title-05",children:T(L,{id:"exp_pass_by"})})}),t.passedBys.filter(Boolean).map((e=>T("div",{className:"YnXYS",children:T(m,{elementType:"span",variant:"supporting-01",children:e})},e)))]})]})},Ot="_S Ci",Dt=({address:e,instruction:t})=>{var n=h(le.clickStartSeeDetails());return T(j,{numLinesToShow:0,collapsible:!0,ctaNewline:!0,cta:T(m,{elementType:"span",variant:"button-02",children:T("span",{className:Ot,onClick:n,children:T(L,{id:"exp_see_address_and_details"})})}),ctaCollapse:T(m,{elementType:"span",variant:"button-02",children:T("span",{className:Ot,children:T(L,{id:"attractions.merchandising.see-less"})})}),children:y(m,{elementType:"span",variant:"supporting-01",children:[T("div",{className:"Ci",children:e}),t&&T("div",{className:"Ci",children:t})]})})},At=e=>{var{hoverTimeout:t,selectedStartPoints:n,selectedEndPoints:i,triggerScrolling:s}=a(de),{dispatch:c}=a(ce),{localize:p}=C(),h=d(null),E="MOBILE"===u(),v=r((()=>{E||c({type:"SET_SELECTED_INDEX",selectedIndex:null,selectedStartPoints:!e.isEndPoint,selectedEndPoints:e.isEndPoint})}),[E,c,e.isEndPoint]),I=r((()=>{E||(t&&clearTimeout(t),c({type:"SET_HOVER_TIMEOUT",hoverTimeout:setTimeout((()=>c({type:"HOVERING",hoveredIndex:null,hoveredStartPoints:!e.isEndPoint,hoveredEndPoints:e.isEndPoint})),300)}))}),[E,t,c,e.isEndPoint]),_=r((()=>{E||(t&&clearTimeout(t),c({type:"HOVERING",hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1}))}),[E,t,c]);o((()=>{!E&&(n&&!e.isEndPoint||i&&e.isEndPoint)&&s&&(c({type:"RESET_TRIGGER_SCROLLING"}),setTimeout((()=>{h&&h.current&&z(h,e.stickyHeaderOffset)}),300))}),[s,c,n,i,e.stickyHeaderOffset,E,h,e.isEndPoint]);var S=l((()=>Ye(e.startEndPoints,e.endsAtStartPoint,e.pickupTypeEnum,e.isEndPoint,p)),[e.startEndPoints,e.endsAtStartPoint,e.pickupTypeEnum,e.isEndPoint,p]);if(!S)return null;var{title:P,name:g,additionalInfo:N,address:f,instruction:b}=S,x=oe;return f&&(x=ge),e.isEndPoint&&e.endsAtStartPoint&&(x=()=>null),y("div",{ref:h,onClick:v,onMouseEnter:I,onMouseLeave:_,"data-automation":`itenerary${e.isEndPoint?"End":"Start"}Point`,children:[T("div",{className:"YyHqh",children:T(m,{elementType:"span",variant:"title-05",children:T("span",{dangerouslySetInnerHTML:{__html:P}})})}),g&&T("div",{className:"eZTXP",children:T(m,{elementType:"span",variant:"body-01",children:g})}),N&&T("div",{className:"XfpGC",children:T(m,{elementType:"span",variant:"supporting-01",children:N})}),T(x,{address:f,instruction:b})]})},Mt=({itemsFormatted:e,startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,showStartPoint:l,showEndPoint:s,useNumberIcon:o,maxUncollapsedItems:d,stickyHeaderOffset:c})=>{var{stopsExpanded:u,mapOverlayOpen:h}=a(de),{dispatch:E}=a(ce),v=p(),I=e.length<=2,_=r((()=>{E({type:"SET_STOPS_EXPANDED",stopsExpanded:!0}),v(le.clickSeeMoreStops())}),[E,v]);return!h&&y("div",{onMouseEnter:()=>E({type:"SET_MOUSE_IN_DETAILS",mouseInDetails:!0}),onMouseLeave:()=>E({type:"SET_MOUSE_IN_DETAILS",mouseInDetails:!1}),children:[y("ul",{children:[l&&t&&T(Te,{icon:T(ye,{variant:"primary"}),content:T(Ne,{startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,isEndPoint:!1,stickyHeaderOffset:c}),showDottedLine:!0}),e.map(((e,t)=>0===t&&e.passedBys.length<1?null:(u||t<d)&&T(Te,{icon:T(xt,{productItineraryItem:e,useNumberIcon:o}),content:T(Pe,{productItineraryItem:e,index:t,expanded:I,useNumberIcon:o,stickyHeaderOffset:c}),showDottedLine:!0},e.name?`${e.name}_${t}`:`filler_${t}`))),s&&t&&$e(t,n)&&(u||e.length<d)&&T(Te,{icon:T(ye,{variant:"primary"}),content:T(Ne,{startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,isEndPoint:!0,stickyHeaderOffset:c}),showDottedLine:!1})]}),!u&&e.length>d&&T("div",{className:"KmkuE _S Pc PN Pp PA","data-automation":"itineraryMoreStops",onClick:_,children:T(m,{elementType:"span",variant:"button-01",children:T(L,{id:"exp_see_num_more_stops",args:{0:e.length-d}})})})]})},Lt={__key:0xb123b9088d66,id:"b123b9088d66b5cc5fb835d301aee9e6",loc:{},definitions:[]},Ct=({productItinerary:e,customTopOffset:t})=>{var n="MOBILE"===u(),i=n?3:11,[{data:a}]=P({query:Lt,variables:{locationIds:e.productItineraryItems.filter((e=>!!e.taLocationId)).map((e=>e.taLocationId))}}),r=He(e.productItineraryItems,null==a?void 0:a.locations),l={itemsFormatted:r,stopsExpanded:r.length<=i,selectedIndex:null,hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1,selectedStartPoints:!1,selectedEndPoints:!1,hoverTimeout:null,mapInterface:null,mapMoved:!1,initialMapZoom:null,initialMapCenter:null,mapOverlayOpen:!1,mouseInDetails:!1,triggerScrolling:!1},[s,d]=c(Qe,l);o((()=>{d({type:"SET_SELECTED_INDEX",selectedIndex:null}),d({type:"HOVERING",hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1}),d({type:"SET_HOVER_TIMEOUT",hoverTimeout:null})}),[n]),o((()=>{d({type:"INIT_DATA",itemsFormatted:He(e.productItineraryItems,null==a?void 0:a.locations)})}),[e,a]);var m=g();return T(de.Provider,{value:s,children:T(ce.Provider,{value:{dispatch:d},children:y("div",{className:"MLtLP f _Y",children:[T("div",{className:"ckgbG",children:T(fe,{startEndPoints:e.startEndPoints,endsAtStartPoint:e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,itemsFormatted:r,maxUncollapsedItems:i,stickyHeaderOffset:t,showStartPoint:!0,showEndPoint:!0,useNumberIcon:!0})}),T("div",{className:"KiSLa w t",style:t?{top:t}:{top:Fe(m)},children:T(_e,{itemsFormatted:r,startEndPoints:e.startEndPoints,endsAtStartPoint:e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,showLabelInCarousel:!1,roundedCorners:!0})})]})})})},wt="ZAnYV f",Rt="Zqbxw f e _T",Vt="PkIlt w f e H",Ft="edXJj S5 H4",Bt=({day:e,startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,locations:a,maxUncollapsedItems:r})=>{var{localize:l}=C();return y("div",{children:[e.title&&T(m,{elementType:"div",variant:"title-05",children:T("div",{className:"PyPoq _X Cj",children:e.title})}),T(fe,{itemsFormatted:Ge([e],a),startEndPoints:t,endsAtStartPoint:n,pickupTypeEnum:i,showStartPoint:1===e.groupNumber,showEndPoint:!1,useNumberIcon:!1,maxUncollapsedItems:r}),y("div",{className:N(wt,"hNniT"),children:[T("div",{className:Rt,children:T("span",{className:Ft,children:T(te,{})})}),T("div",{className:Vt,children:e.foodAndDrinks&&e.foodAndDrinks.length&&y(S,{children:[T(m,{elementType:"div",variant:"title-05",children:T(L,{id:"attractions.booking.section.mdtitinerary.mealsincluded"})}),e.foodAndDrinks.map((t=>T("div",{children:y(m,{elementType:"span",variant:"supporting-02",children:[je(t.inclusion,l),t.inclusion.description&&`:${t.inclusion.description}`]})},`foodAndDrinks_${String(e.groupNumber)}`)))]})||T(m,{elementType:"span",variant:"supporting-02",children:T(L,{id:"attractions.booking.section.mdtitinerary.nomealsincluded"})})})]}),y("div",{className:wt,children:[T("div",{className:Rt,children:T("span",{className:Ft,children:T(ee,{})})}),T("div",{className:Vt,children:e.accommodations&&e.accommodations.length&&y(S,{children:[T(m,{elementType:"div",variant:"title-05",children:T(L,{id:"attractions.booking.section.mdtitinerary.accommodationincluded"})}),e.accommodations.map((t=>T("div",{children:t.description&&T(m,{elementType:"span",variant:"supporting-02",children:t.description})},`accommodation_${String(e.groupNumber)}`)))]})||T(m,{elementType:"span",variant:"supporting-02",children:T(L,{id:"attractions.booking.section.mdtitinerary.noaccommodationincluded"})})})]})]})},Ht=({mdtProductItinerary:e})=>{var[t,n]=s(!1);return y("div",{className:"w",children:[T("ol",{className:"yzhOU _A",children:e.mdtProductItineraryDays.map(((e,n)=>(t||n<6)&&T("li",{className:"QFnBs _X",children:e.title},e.title)))}),!t&&e.mdtProductItineraryDays.length>6&&T("div",{className:"LecDe f e u Z BB",onClick:()=>n(!0),children:T("div",{className:"IEwtA _S",children:T(L,{id:"attractions.booking.section.mdtitinerary.seemore"})})})]})},Gt="Iyfhj",Ut=e=>T(ne,{onClick:e.onClick,elementType:"div",className:"IrORL w",active:e.active,children:y("div",{className:N("szGgM o W",e.title||e.subTitle||e.info),children:[T("div",{className:N("MXbLh c _X",e.active&&Gt),children:T(m,{elementType:"span",variant:"title-05",children:e.title})}),T("div",{className:N("owFYJ _X n",e.active&&Gt),children:y(m,{elementType:"span",variant:"supporting-02",children:[e.subTitle&&T("div",{children:T(Q,{text:e.subTitle,max:e.maxSubTitleLength})}),e.info&&T("div",{children:T(Q,{text:e.info,max:e.maxSubTitleLength})})]})})]})}),Xt="rWxtf v",Zt="ybWjX _S Gi R2 _Q c Z1 _O",zt="vmwWJ _Q Cj S6 X0 b",$t=e=>{var t="DESKTOP"===u(),[n,i]=s(0),a=d(e.tabs[0].onActivation);o((()=>{a.current()}),[]);var[r,l]=s(0),c=Math.ceil(e.tabs.length/e.maxVisibleTabs),m=r>0&&r===c-1?e.tabs.length-e.maxVisibleTabs:r*e.maxVisibleTabs;return y(S,{children:[!t&&T("div",{className:Xt,children:e.tabs[n].rightContent}),y(ie,{className:"cukGp v",children:[r>0&&T("div",{className:N(Zt,"xDGQg"),children:T("span",{className:zt,onClick:()=>l(r-1),children:T(ae,{})})}),e.tabs.slice(m,e.tabs.length).map(((e,t)=>T(Oe,{title:e.title,subTitle:e.subTitle,info:e.info,maxSubTitleLength:e.maxSubTitleLength,active:n===m+t,onClick:()=>{i(m+t),e.onActivation()}},`tabHeader_${String(e.id)}`))),e.tabs.length>e.maxVisibleTabs&&r<c-1&&T("div",{className:N(Zt,"_U"),children:T("span",{className:zt,onClick:()=>l(r+1),children:T(re,{})})})]}),y("div",{className:N(Xt,t&&e.tabs[n].leftContent&&"nsKzn v"),children:[e.tabs[n].leftContent,t&&e.tabs[n].rightContent]})]})},Yt=({mdtProductItinerary:e})=>{var t="MOBILE"===u(),n="TABLET"===u(),i="DESKTOP"===u(),{localize:a}=C(),r=l((()=>e.mdtProductItineraryDays.map((e=>e.productItineraryItems)).reduce(((e,t)=>e.concat(t)),[]).filter((e=>!!e.taLocationId)).map((e=>e.taLocationId))),[e]),[{data:s}]=P({query:Lt,variables:{locationIds:r}}),d=Ge(e.mdtProductItineraryDays,null==s?void 0:s.locations),[m,p]=c(Qe,{itemsFormatted:[],stopsExpanded:!1,selectedIndex:null,hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1,selectedStartPoints:!1,selectedEndPoints:!1,hoverTimeout:null,mapInterface:null,mapMoved:!1,initialMapZoom:null,initialMapCenter:null,mapOverlayOpen:!1,mouseInDetails:!1,triggerScrolling:!1});o((()=>{p({type:"SET_SELECTED_INDEX",selectedIndex:null}),p({type:"HOVERING",hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1}),p({type:"SET_HOVER_TIMEOUT",hoverTimeout:null})}),[t]);var h,E=t?3:11,v=l((()=>{var t=e.mdtProductItineraryDays.map((t=>({id:t.groupNumber,title:a.string("attractions.booking.section.mdtitinerary.day",{0:String(t.groupNumber)}),subTitle:t.title,maxSubTitleLength:i?35:25,leftContent:T(xe,{day:t,startEndPoints:e.startEndPoints,endsAtStartPoint:e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,locations:null==s?void 0:s.locations,maxUncollapsedItems:E},`itineraryDay_${String(t.groupNumber)}`),rightContent:T(_e,{itemsFormatted:Ge([t],null==s?void 0:s.locations),startEndPoints:1===t.groupNumber?e.startEndPoints:[],endsAtStartPoint:1===t.groupNumber&&e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,showLabelInCarousel:!0},`itineraryMap_${String(t.groupNumber)}`),onActivation:()=>{p({type:"INIT_DATA",itemsFormatted:Ge([t],null==s?void 0:s.locations)}),p({type:"SET_STOPS_EXPANDED",stopsExpanded:Ge([t],null==s?void 0:s.locations).length<=E}),p({type:"SET_SELECTED_INDEX",selectedIndex:null})}})));return t.splice(0,0,{id:0,title:a.string("attractions.booking.section.mdtitinerary.overview"),subTitle:a.string("attractions.booking.section.mdtitinerary.fullmap"),info:a.string("attractions.booking.section.mdtitinerary.stops",{0:d.length}),maxSubTitleLength:i?35:25,leftContent:!i&&T(ke,{mdtProductItinerary:e}),rightContent:T(_e,{itemsFormatted:d,startEndPoints:e.startEndPoints,endsAtStartPoint:e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,showLabelInCarousel:!0}),onActivation:()=>{p({type:"INIT_DATA",itemsFormatted:d}),p({type:"SET_SELECTED_INDEX",selectedIndex:null})}}),t}),[e,a,d,i,s,E]);return h=i?7:n?6:v.length,T(de.Provider,{value:m,children:T(ce.Provider,{value:{dispatch:p},children:T(De,{tabs:v,maxVisibleTabs:h})})})};return[()=>{le=Ce,se=n(we),oe=i(Re),de=n({itemsFormatted:[],stopsExpanded:!1,selectedIndex:null,hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1,selectedStartPoints:!1,selectedEndPoints:!1,hoverTimeout:null,mapInterface:null,mapMoved:!1,initialMapZoom:null,initialMapCenter:null,mapOverlayOpen:!1,mouseInDetails:!1,triggerScrolling:!1}),ce=n({dispatch:()=>{}}),me=i(it),ue=i(rt),pe=i(st),he=i(ot),Ee=i(dt),ve=i(ct),Ie=i(mt),_e=i(ut),Te=i(pt),ye=i(ht),Se=i(Nt),Pe=i(kt),ge=i(Dt),Ne=i(At),fe=i(Mt),be=i(Ct),xe=i(Bt),ke=i(Ht),Oe=Ut,De=$t,Ae=i(Yt),Me=se.Provider,e({Itinerary:be,MDTItinerary:Ae,SeeImportantInformationContextProvider:Me})},[e=>(n=e.createContext,i=e.memo,a=e.useContext,r=e.useCallback,l=e.useMemo,s=e.useState,o=e.useEffect,d=e.useRef,c=e.useReducer),e=>m=e.default,e=>u=e.useViewportCategory,e=>(p=e.useGARecorder,h=e.useGARecordCallback),e=>(E=e.IMPORTANT_INFORMATION,v=e.TAB_COMMERCE_NAV_OFFSET,I=e.STICKY_NAV_OFFSET),e=>_=e.getTabLocation,e=>(T=e.jsx,y=e.jsxs,S=e.Fragment),e=>P=e.useQuery,e=>g=e.useIsMounted,e=>N=e.default,e=>f=e.useRoute,e=>b=e.default,e=>(x=e.LatLng,k=e.Popup,O=e.LatLngBounds),e=>D=e.MapComponent,e=>A=e.default,e=>M=e.default,e=>(L=e.default,C=e.useLocalize),e=>w=e.default,e=>R=e.default,e=>V=e.default,e=>F=e.default,e=>(B=e.StopImageSet,H=e.AttractionItineraryStopMarker),e=>G=e.default,e=>U=e.default,e=>X=e.default,e=>Z=e.default,e=>z=e.scrollIntoViewIfNeededWithHeaderOffset,e=>$=e.default,e=>Y=e.default,e=>W=e.default,e=>K=e.BubbleRatingWithReviewCount,e=>(j=e.ReadMore,Q=e.Abbreviate),e=>q=e.QueriedTripFlowSelector,e=>J=e.BookmarkIcon,e=>ee=e.default,e=>te=e.default,e=>(ne=e.GroupingTab,ie=e.GroupingTabs),e=>ae=e.default,e=>re=e.default]]},["cDcdfi","VP50Wc","oVKaZR","fsml46","NbJixN","wurSPw","F5FCuN","5X2em-","4Z07E2","jSLlaY","F8raOV","A7p4Ig","VwUieX","vJ9VOi","Yfjs4H","KB4cfU","0DsHEV","FIpkU7","2G8iY6","tmDVyI","TujamJ","XiRh4V","e3JVFn","2x7WI3","JKhoCt","7yGKf-","tnBMzW","pTftos","ywkzYd","iS6LZG","MBK0so","miRpRf","HZtvHO","vF730k","YCW2WX","X3dUVA","roCOIO","AhTrXA","l74tu_"]]);
