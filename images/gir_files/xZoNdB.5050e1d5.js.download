(this.$WP=this.$WP||[]).push(["xZoNdB",(e,r)=>{"use strict";var t,n,a,i,s,o,u,l,c,d,h,p,v,m,g,P,f,y,I,A,S,T,E,C,b,N,w,R,D,_,U,M,k,L,x,V,O,$,j,G,W,q,F,H,B,J,K,X,z,Y,Q,Z,ee,re,te,ne,ae,ie,se,oe,ue,le,ce,de,he,pe,ve,me,ge,Pe={__key:0xd75d4d12e01b,id:"d75d4d12e01b7ee3e966bf42f954abc0",loc:{},definitions:[]},fe={__key:57199890449091,id:"3405e326c2c3293d928cc2d4e49569ce",loc:{},definitions:[]},ye=(e,r)=>{var t=N(),a=y(),{userAgentCategory:i,browser:s,os:o}=g(),u=w(),l=_(),c=v(),d=h(fe);n((()=>{var n=Date.now();d({clientPageViews:{clientRequestTimestampMs:n,request:[{eventTimestampMs:n,identifierType:"TA_PERSISTENTCOOKIE",locale:t,userId:l,sessionId:c,origin:location.origin,page:e.page,params:Object.entries(e.params).map((([e,r])=>({key:e,value:"object"!=typeof r?String(r):JSON.stringify(r)||""}))),path:e.path,referrer:document.referrer,route:JSON.stringify(e),currency:u,uid:r,userAgent:navigator.userAgent,viewportCategory:a,userAgentCategory:i,browserType:s.family,browserVersion:String(s.majorVersion),osType:o.family}]}})}),[r])},Ie=()=>Math.floor(Math.random()*2**32).toString(16).padStart(8,"0"),Ae=e=>{var r,t=(null!=(r=(()=>{var e="undefined"!=typeof document?document.cookie.split(";").find((e=>e.includes("TASID="))):null;if(!e)return null;try{return e.split("=")[1]}catch(r){return console.error(`Unable to parse TASID cookie: '${e}'`),null}})())&&/[A-F0-9]{32}/.test(r)?r:null)||(Ie()+Ie()+Ie()+Ie()).toUpperCase();return"undefined"!=typeof document&&(document.cookie=`TASID=${t}; Domain=${e}; Path=/; Max-Age=1800; Secure`),t},Se=["NotFound","InternalError","ClientRedirect"],Te=({bootstrapRoute:e,bootstrapUid:r,bootstrappedServerSideCanonicalized:u,onSessionIdChanged:l,children:c})=>{var[d,p]=a(e),[v,m]=a(r),[g,P]=a(!!u),f=i("INITIAL"),y=i(""),I=h(Pe),A=_(),S=T(),E=i(!1),C=s(((e,r="PAGE_VIEW",t=!1)=>{E.current||P(!1),d.page!==e.page||!G(d.params,e.params)||"PAGE_VIEW"!==r&&"PARAM_UPDATE"!==r?f.current=r:f.current=d.fragment!==e.fragment?"FRAGMENT_PUSH":"IN_PLACE";var n=t||"PAGE_VIEW"===f.current||"POP"===f.current||"PARAM_UPDATE"===f.current;(n||"INITIAL"===f.current)&&("referrer"in e&&null!=e.referrer&&(y.current=e.referrer),((e,r,t,n,a,i)=>{var s=Date.now();e({navigations:{clientRequestTimestampMs:s,request:[{eventTimestampMs:s,fromPage:t.page,fromParams:Object.entries(t.params).map((([e,r])=>({key:e,value:"object"!=typeof r?String(r):JSON.stringify(r)||""}))),fromPath:t.path,fromRoute:JSON.stringify(t),identifierType:"TA_PERSISTENTCOOKIE",navigationType:"PAGE_VIEW"===a||"FRAGMENT_PUSH"===a||"PARAM_UPDATE"===a||"IN_PLACE"===a?"USER_INITIATED":a,opaqueIds:i?[{key:"MEMBER_UID",value:i}]:[],origin:location.origin,referrer:document.referrer,toPage:n.page,toParams:Object.entries(n.params).map((([e,r])=>({key:e,value:"object"!=typeof r?String(r):JSON.stringify(r)||""}))),toPath:n.path,toRoute:JSON.stringify(n),uid:r,userAgent:navigator.userAgent}]}})})(I,v,d,e,f.current,A)),p({page:e.page,params:e.params,path:e.path,fragment:e.fragment}),n&&(null==l||l(ce(S)),m(B()))}),[l,S,I,d,v,A]),b=s(((e,r="FRAGMENT_PUSH")=>{if(d.fragment!==e){var t=-1===d.path.indexOf("#")?d.path:d.path.split("#")[0],n=""!==(e||"")?`#${e||""}`:"";f.current=r,p({...d,path:`${t}${n}`,fragment:e||""})}}),[d]),N=t.useCallback((()=>{try{var e;history.replaceState({...history.state,scrollY:window.scrollY},"",(null==(e=history.state)?void 0:e.path)||d.path)}catch(e){console.error("Caught exception while accessing History API:",e)}}),[d.path]),w=J(N,300),R=i("");n((()=>(R.current=window.location.hash,y.current=document.referrer||"","scrollRestoration"in history&&(history.scrollRestoration="manual"),window.addEventListener("scroll",w),()=>{window.removeEventListener("scroll",w)})),[w]);var D=i(null),U=j();n((()=>{var e,r=null==(e=history.state)?void 0:e.scrollY;null==r||"POP"!==f.current&&"INITIAL"!==f.current||window.scroll(0,r);try{if("INITIAL"===f.current)history.state&&"referrer"in history.state&&history.state.referrer&&(y.current=history.state.referrer),history.replaceState({...d,referrer:y.current},"",d.path);else if("FRAGMENT_PUSH"===f.current)history.pushState({...d,referrer:y.current},"",d.path);else if("PARAM_UPDATE"===f.current){var t;y.current=`https://${S}${(null==(t=D.current)?void 0:t.path)||"/"}`,history.pushState({...d,referrer:y.current},"",d.path)}else if("PAGE_VIEW"===f.current){var n;y.current=`https://${S}${(null==(n=D.current)?void 0:n.path)||"/"}`,history.pushState({...d,referrer:y.current},"",d.path),window.scroll(0,0)}else"IN_PLACE"===f.current&&history.replaceState({...d,referrer:y.current},"",d.path)}catch(e){console.error("Caught exception while accessing History API:",e)}}),[d,S,U,C]);var M=i(C);n((()=>{if(Object.defineProperty(document,"referrer",{configurable:!0,get:()=>y.current}),""!==R.current){var e=q(`${window.location.pathname}${window.location.search}${R.current}`);e&&(E.current=!0,M.current(e,"INITIAL"))}}),[]),n((()=>{Se.includes(d.page)||E.current?E.current=!1:(g||"INITIAL"!==f.current&&"PAGE_VIEW"!==f.current&&"POP"!==f.current&&"PARAM_UPDATE"!==f.current||F(U,d,"PARAM_UPDATE"===f.current).then((e=>{G(d,e)||(W(e)?(f.current="IN_PLACE",G(d.params,e.params)?p({...e,params:d.params}):p(e)):window.location.href=e.path)})),f.current="PAGE_VIEW",D.current=d)}),[d,S,U,g,C]),ye(d,v);var k=o((()=>({route:d,navigate:C,navigateToFragment:b,uid:v})),[d,v,C,b]);return K(H,{value:k,children:c})},Ee=e=>{var r,t,a,s,o=C(),l=A(),{loadMessages:c}=u(R),d=i(new Set([...null!=(r=null==(t=e.assets)?void 0:t.js)?r:[],...null!=(a=null==(s=e.assets)?void 0:s.css)?a:[]].map((e=>`${o}/${e}`)))).current,h=i(new Map).current;return n((()=>{$WP.installResolver((e=>fetch(`/data/1.0/bundle/dependencies/chunk?id=${encodeURIComponent(e)}`,{credentials:"same-origin",headers:{"x-ta-version":String(l)}}).then((e=>e.json())).then((e=>(c(e.messages),Promise.all([...e.css.map((e=>[o+e,M])),...e.js.map((e=>[o+e,k]))].filter((([e])=>!d.has(e))).map((([e,r])=>{if(h.has(e))return h.get(e);var t=r(e).then((()=>{d.add(e),h.delete(e)}));return h.set(e,t),t})))))).then((()=>$WP.getChunkPromise(e)))))}),[o,l,c,d,h]),null},Ce=(e,r,t)=>{n((()=>{var n;null==(n=document.head)||n.append(...(null!=r?r:[]).map((r=>{var n=document.createElement("link");return n.rel="prefetch",n.as=t,n.href=`${e}/${r}`,n})))}),[e,r,t])},be=({locale:e,children:r})=>{var{userSelectedCurrencyOverride:t}=x().preferences,n=o((()=>{var r,n,a=null!=(r=null!=t?t:null==(n=z[e])?void 0:n.currency)?r:"USD";return"RMB"===a&&(a="CNY"),{locale:e,currency:a}}),[e,t]);return K(D,{value:n,children:r})},Ne=e=>{var r,t,n=i({});0===Object.keys(n.current).length&&(n.current={...e.messages});var s=o((()=>({getMessage:e=>n.current[e]||null,loadMessages:e=>{Object.entries(e).forEach((([e,r])=>{n.current[e]=r}))}})),[]),[u,h]=a((()=>e.sessionId||ce(e.domainName))),v=o((()=>({...e.lithiumBootstrap,serviceCalls:e.urqlSsrData&&e.urqlSsrData.extensions&&e.urqlSsrData.extensions.serviceTimings?[e.urqlSsrData.extensions.serviceTimings]:[]})),[e.lithiumBootstrap,e.urqlSsrData]),g=o((()=>new Set(e.preloads)),[e.preloads]),[y,A]=a(e.userId),T=o((()=>({userId:y,authenticate(e){void 0!==e.userId&&A(e.userId)}})),[y]),C=o((()=>({TAUD:null,...e.cookies})),[e.cookies]),N=i(null);return null===N.current&&(N.current=p({ssrData:e.urqlSsrData,initialPvid:e.route[1].uid,securityToken:e.securityToken})),pe(e.cdnPrefix,null==(r=e.assets)?void 0:r.css,"style"),pe(e.cdnPrefix,null==(t=e.assets)?void 0:t.js,"script"),K(O,{children:K(L.Provider,{value:g,children:K(V,{taud:C.TAUD,children:K(ve,{locale:e.locale,children:K(E,{value:e.domainName,children:K(b,{value:e.cdnPrefix,children:K(P,{value:e.userAgent,children:K(f,{value:e.securityToken,children:K(U,{value:T,children:K(d,{client:N.current,children:K(I,{children:K(de,{bootstrapRoute:e.route[0],bootstrapUid:e.route[1].uid,bootstrappedServerSideCanonicalized:e.serverSideCanonicalized,onSessionIdChanged:h,children:K(S.Provider,{value:v,children:K(m,{value:u,children:X(R.Provider,{value:s,children:[K(he,{assets:e.assets}),K(l,{children:K(c,{children:K($,{initialThemeStore:e.themeStore,children:e.children})})})]})})})})})})})})})})})})})})})},we=({children:e})=>{var{login:r}=ne();return K(re.Provider,{value:r,children:e})},Re=({children:e})=>(n((()=>{var e=document.cookie.split(";").filter((e=>e.trim().startsWith("EVT=")));e.length>0&&Q(new URLSearchParams(e[0].split("=")[1].split("*").map((e=>{var[r,t]=e.split(".",2);return[r,t]}))))}),[]),ge.useIsomorphicIncrement(1),X(Y,{children:[K(ae,{}),K(Z,{children:K(ie,{children:K(we,{children:K(te,{children:K(ee,{children:e})})})})}),K(se,{})]}));return[()=>{ce=Ae,de=Te,he=Ee,pe=Ce,ve=be,me=Ne,ge=new oe({metricName:"1ItPi6291mgUX3pmUpNDSsfmvEFxiV4K34cxN6guTx01xRfl7e4nVd9GKAvRnh4o",version:0,additionalLabels:["1ItPi6291mgUX3pmUpNDSrQC2e3FptICirP/9PT4nx1Dpa7sVgfT7EbUV+bLw5ErNvVZjTPjvBCLu33fU13esg=="],labelHooks:[ue,le]}),e({LithiumContainer:me,TripadvisorPage:Re,usePageViewLogging:ye})},[e=>(t=e,n=e.useEffect,a=e.useState,i=e.useRef,s=e.useCallback,o=e.useMemo,u=e.useContext),e=>l=e.KeyboardNavigationModeProvider,e=>c=e.CartHeaderProvider,e=>(d=e.default,h=e.useStatelessMutation,p=e.buildUrqlClient),e=>(v=e.useSessionId,m=e.SessionProvider),e=>(g=e.useUserAgent,P=e.UserAgentProvider),e=>f=e.SecurityTokenProvider,e=>(y=e.useViewportCategory,I=e.ViewportCategoryProvider),e=>(A=e.useLithiumVersion,S=e.LithiumBootstrapContext),e=>(T=e.useDomainName,E=e.DomainNameProvider),e=>(C=e.useCdnPrefix,b=e.CdnPrefixProvider),e=>(N=e.useLocale,w=e.useCurrency,R=e.Messages,D=e.I18nProvider),e=>(_=e.useUserId,U=e.UserProvider),e=>(M=e.importCss,k=e.importScript,L=e.Preloads),e=>(x=e.useTravelInfo,V=e.LithiumTravelInfoProvider),e=>O=e.ErrorBoundary,e=>$=e.LithiumThemeProvider,e=>j=e.useClient,e=>G=e.default,e=>W=e.isRoutable,e=>(q=e.getRouteFromPath,F=e.tryToCanonicalizeRoute,H=e.RouteProvider),e=>B=e.generatePuid,e=>J=e.useDebouncedCallback,e=>(K=e.jsx,X=e.jsxs),e=>z=e.pointsOfSale,e=>Y=e.PageViewLogger,e=>Q=e.enqueue,e=>Z=e.MonikerConfiguration,e=>ee=e.PopupHierarchyLithiumProvider,e=>re=e.Login,e=>te=e.AdServerProvider,e=>ne=e.default,e=>ae=e.LithiumConsentProvider,e=>ie=e.default,e=>se=e.GoogleTagManager,e=>(oe=e.Counter,ue=e.useSourceLabel,le=e.useRenderLabel)]]},["cDcdfi","W3_c4H","igzpAK","OnmvvE","VJ7DQx","slAn47","gzbipv","oVKaZR","2R4xv2","xDNC3X","XBOpq0","0DsHEV","ukkKxE","pLbCP4","9rUrE8","nIW_Rw","SYVX-p","5X2em-","YwNsO_","jmIMrC","F8raOV","n3D4ip","gsKhh7","F5FCuN","b57PJQ","30t50h","fsml46","jb_4W2","vybtJq","mv7yXI","nCvudh","VANuRt","4hk7GO","ANe_04","GGMQy5","2kkWwV"]]);
