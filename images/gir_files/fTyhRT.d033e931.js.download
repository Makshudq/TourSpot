(this.$WP=this.$WP||[]).push(["fTyhRT",(e,r)=>{"use strict";var t,l,u,n,i,a,d,s,o,T,I,p,v,c,f,h=e=>{var[,r]=o(a),[t,d]=l({fetching:!1}),s=I("SAVE_TO_TRIP"),p=u(!0),v=n((e=>{p.current&&d(e)}),[]);return i((()=>()=>{p.current=!1}),[]),e?[t,t=>(v({fetching:!0}),r({tripId:t,referenceId:`${e.id}`,referenceType:e.type,allowDuplicates:!1}).then((r=>{var t,l,u,n,i,a,d=null==r||null==(t=r.data)||null==(l=t.addItemToTrip)?void 0:l.trip,o=null==r||null==(u=r.data)||null==(n=u.addItemToTrip)||null==(i=n.errors)||null==(a=i[0])?void 0:a.error;if(d){var I=T(d,e);I?(s(),v({fetching:!1,result:{trip:d,tripItem:I}})):"bundleSave"===e.type?v({fetching:!1,result:{trip:d,tripItem:{__typename:"TripItem",id:0,comments:[]}}}):v({fetching:!1,error:{query:"ADD_ITEM_TO_TRIP",tripsError:null!=o?o:void 0}})}else v({fetching:!1,error:{query:"ADD_ITEM_TO_TRIP",tripsError:null!=o?o:void 0}});return[d,o]})).catch((e=>(console.error(e),v({fetching:!1,error:{query:"ADD_ITEM_TO_TRIP"}}),[null,null]))))]:[t,()=>Promise.resolve([null,null])]},m="mostRecentlyAddedToTrip",_=(e,r,t,l)=>{var[u,i]=c(r),a=v();return[u,n((()=>{var u=null!=e?e:(e=>{var r=p.get(m);return r&&r.userId===e?r.tripId:null})(a);return t||!u||null!=(null==r?void 0:r.type)&&f.has(r.type)?(l&&l(),Promise.resolve([null,null])):i(u)}),[t,r,l,i,a,e]),e=>((e,r)=>{r?p.set(m,{tripId:e,userId:r},144e5):p.remove(m)})(e,a)]},g=(e,r,l)=>{var[u,n]=t.useState({fetching:!1,saved:!!l}),[,i]=o(d),[,a]=o(s);return[u,l?()=>l?(n({...u,fetching:!0}),a({itemId:l.id,tripId:r}).then((e=>{var r,t=null==e||null==(r=e.data)?void 0:r.tripsRemoveItem;return t?(n({fetching:!1,saved:!1,result:{trip:t}}),u):(n({fetching:!1,saved:!0,error:{query:"REMOVE_TRIP_ITEM",tripsError:void 0}}),u)})).catch((()=>(n({fetching:!1,saved:!0,error:{query:"REMOVE_TRIP_ITEM"}}),u)))):Promise.resolve(u):()=>(n({...u,fetching:!0}),i({tripId:r,referenceId:`${e.id}`,referenceType:e.type,allowDuplicates:!1}).then((e=>{var r,t,l,i,a,d,s,o,T,I=null==e||null==(r=e.data)||null==(t=r.addItemToTrip)?void 0:t.trip,p=null==e||null==(l=e.data)||null==(i=l.addItemToTrip)||null==(a=i.errors)||null==(d=a[0])?void 0:d.error;if(p||!I)return n({fetching:!1,saved:!1,error:{query:"ADD_ITEM_TO_TRIP",tripsError:p||void 0}}),u;var v=null==e||null==(s=e.data)||null==(o=s.addItemToTrip)||null==(T=o.items)?void 0:T[0];return n(v?{fetching:!1,saved:!0,result:{trip:I,tripItem:v}}:{fetching:!1,saved:!1,error:{query:"ADD_ITEM_TO_TRIP"}}),u})).catch((()=>(n({fetching:!1,saved:!1,error:{query:"ADD_ITEM_TO_TRIP"}}),u))))]};return[()=>{c=h,f=new Set(["savesItem","bundleSave"]),e({useAutosave:_,useSave:c,useTripSaveToggle:g})},[e=>(t=e,l=e.useState,u=e.useRef,n=e.useCallback,i=e.useEffect),e=>(a=e.AddItemToTrip,d=e.AddItemWithFullTrip,s=e.RemoveItemWithFullTrip),e=>o=e.useMutation,e=>T=e.getItemByReference,e=>I=e.usePixelCallback,e=>p=e.default,e=>v=e.useUserId]]},["cDcdfi","RXx5aI","5X2em-","eFKnUp","jb_4W2","jaCyxS","ukkKxE"]]);
