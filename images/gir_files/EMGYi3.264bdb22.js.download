(this.$WP=this.$WP||[]).push(["EMGYi3",(e,t)=>{"use strict";var r,a,i,n,o,l,d,c,s,u,g,h,m,p,f,v,C,y,T,k,I,_,b,E,M,N,P,x,w,D,R,W,L,F,S,A,O,B,H,z,U,V,G=({onClose:e,title:t,children:r,footerContent:a})=>{var{localize:i}=y();return k(I,{children:[_("div",{className:"EgOyA f",children:_(p,{variant:"clear",icon:f,"aria-label":i.string("common_Close"),size:"small",onClick:e})}),null!=t&&_("div",{className:"iEEdq",children:_(v,{variant:"title-02",children:t})}),null!=r&&_("div",{className:"PoIQW",children:r}),_("div",{className:"Suuxn",children:null!=a&&_("div",{className:"hqPky f",children:a})})]})},K=({triggerRef:e,onClose:t,title:i,children:n,footer:o,position:l,alignEdge:d,arrowType:c,width:m,maxHeight:p,onMouseEnter:f,onMouseLeave:v})=>{var C=r(null),y=a((e=>{var r;e.target instanceof Node&&null!=(r=C.current)&&r.contains(e.target)||t&&t()}),[t,C]);return e.current?_(h,{children:k(I,{children:[_(g,{unstyled:!0,position:l,alignEdge:d,target:e.current,autoFocus:!0,shouldRestoreFocus:!0,showArrowWhenUnstyled:!0,arrowType:c,children:_("div",{className:"tBhLJ Gi Ra f e",ref:C,style:{maxHeight:p,width:m},onMouseEnter:f,onMouseLeave:v,children:_(B,{onClose:t,title:i,footerContent:o,children:n})})}),t&&_(s,{event:"click",callback:y}),t&&_(u,{keyName:["Escape"],callback:y})]})}):(console.error("[Fusion] no overlay trigger ref was set"),null)},Q=({children:e,desktopTriggerRef:t,onClose:r,title:a,desktopFooterContent:i,desktopOnMouseEnter:n,desktopOnMouseLeave:o})=>"MOBILE"===b()?_(c,{mobileContainerStyle:"inset",accentStyle:"inset",onClose:r,title:a,overrideContentStyling:!0,children:e}):_(H,{triggerRef:t,onClose:r,title:a,footer:i,position:"below",alignEdge:"right",width:483,arrowType:"none",onMouseEnter:n,onMouseLeave:o,children:e}),j={__key:59929300219420,id:"368160a6b61cd4af533bdfab39750e5b",loc:{},definitions:[]},q=()=>_("div",{className:"uZlyh",children:_(C,{id:"added_to_cart"})}),J=({triggerRef:e,addToCartData:t,onClose:r})=>{var a,i,c,s,u,g=P(),{trackInteraction:h}=W(),m=d(),[p,f]=n(null),[v,C]=n(!1),[y,T]=M(),k="Treatment 1"===y,I="Treatment 2"===y,[b,x]=N(),{cartItems:R}=t,L=R&&0!==R.length?R[R.length-1]:null,F=null==L||null==(a=L.productParameters.bookingProduct)?void 0:a.primary_ta_geo_id,S=w(),[{data:A}]=l({query:j,variables:{geoId:`${F||""}`},pause:null==F}),{url:O}=(null==A||null==(i=A.Routing_canonicalize)?void 0:i[0])||{},B=D((()=>{T(),x()}));if(o((()=>{var e;return null===L||v||m||b||(e=setTimeout((()=>{C(!0)}),7e3)),()=>{clearTimeout(e)}}),[v,L,m,b]),o((()=>{v&&!p&&r()}),[r,v,p]),null===L)return null;var H=_("div",{dangerouslySetInnerHTML:{__html:L.display.gradeName}});return _(z,{desktopTriggerRef:e,onClose:()=>{r(),h({subType:"closeModule"})},desktopOnMouseEnter:()=>f(!0),desktopOnMouseLeave:()=>f(!1),title:_(q,{}),children:_(V,{productData:{cancellationPolicy:L.productParameters.cancellationCondition,locationId:L.productParameters.locationId,geoId:null==(c=L.productParameters.bookingProduct)?void 0:c.primary_ta_geo_id,price:L.availability.priceFormatted,rating:null==(s=L.productParameters.bookingProduct)?void 0:s.rating,ratingCount:null==(u=L.productParameters.bookingProduct)?void 0:u.num_reviews,thumbnail:L.display.imageUrl,title:L.display.productName,tourGrade:H,travelDate:L.productParameters.checkinDateUI},onContinueExploring:()=>{r(),E(g,!1),h({subType:"continueExploring"}),k&&O&&S(O)},hideContinueExploring:I,onContinueToCart:()=>h({subType:"viewCart"}),ref:B})})},Z=({triggerRef:e,addToCartData:t,onClose:r})=>{var{params:a,page:i}=x(),n="detailId"in a&&a.detailId?a.detailId:void 0;return _(R,{scope:{scopeType:"page",team:"Attractions",pageName:i,pageLocationId:n},impressionWhenSeen:!1,children:_(J,{triggerRef:e,addToCartData:t,onClose:r})})};return[()=>{B=G,H=K,z=Q,(U=i((({productData:e,onContinueExploring:t,onContinueToCart:r,hideContinueExploring:a},i)=>{var{cancellationPolicy:n,locationId:o,geoId:l,price:d,rating:c,ratingCount:s,thumbnail:u,title:g,tourGrade:h,travelDate:p}=e,f="MOBILE"===b(),v=f?70:130,y=A(),E=_(R,{scope:{scopeType:"item",itemType:"AddToCartModule",itemId:"AddToCartItemCard",customData:{price:d,locationId:o}},children:_(F,{title:g,primaryInfo:k(I,{children:[h,_("div",{className:"Ph",children:p})]}),secondaryInfo:null!=n&&k("div",{className:"f",children:[_(S,{marginRight:"spacing-01"}),n]}),merchandisingText:d,rating:c,reviewCount:s,thumbnail:u,enforceMaxImageSize:!0,height:v,width:v})});return k("div",f?{className:"KIMJe",ref:i,children:[E,k("div",{className:"QNxFW u",children:[_(m,{variant:"commerce",fullWidth:!0,onClick:r,marginBottom:a?void 0:"spacing-03",href:y,children:_(C,{id:"attractions.cart_view_cart"})}),!a&&_(m,{variant:"secondary-commerce",fullWidth:!0,onClick:t,children:_(C,{id:"mobile_tablet_continue_exploring"})})]})]}:{ref:i,children:[E,k("div",{className:L("FrCTg f",{pqDkp:a}),children:[!a&&_(m,{variant:"secondary-commerce",onClick:t,marginRight:"spacing-03",children:_(C,{id:"mobile_tablet_continue_exploring"})}),_(m,{variant:"commerce",onClick:r,href:y,fullWidth:a,children:_(T,{id:"view_cart_checkout"})})]}),_(O,{geoId:l,detailId:o,shelfGroup:"ADDED_TO_CART",scrollContainer:"custom-scroll-container",titleTypography:"title-04",titleMargin:{marginBottom:"spacing-03"},cardType:"Horizontal"})]})}))).displayName="AddedToCartContent",V=U,e("default",Z)},[e=>(r=e.useRef,a=e.useCallback,i=e.forwardRef,n=e.useState,o=e.useEffect),e=>l=e.useQuery,e=>d=e.useKeyboardNavigationMode,e=>c=e.ModalContainer,e=>s=e.default,e=>u=e.default,e=>g=e.default,e=>h=e.AfterConsent,e=>(m=e.default,p=e.CircularButton),e=>f=e.default,e=>v=e.default,e=>(C=e.default,y=e.useLocalize,T=e.UnsafeLocalize),e=>(k=e.jsxs,I=e.Fragment,_=e.jsx),e=>b=e.useViewportCategory,e=>E=e.setCartInfoWithoutProduct,e=>(M=e.useContinueExploringCtaTest,N=e.useAddedToCartUserActionTest),e=>P=e.useSessionId,e=>x=e.useRoute,e=>w=e.useNavigate,e=>D=e.useOnVisible,e=>(R=e.TrackingScope,W=e.useTracking),e=>L=e.default,e=>F=e.HorizontalMerchandisingCard,e=>S=e.default,e=>A=e.useCartUrlWithFunnelKey,e=>O=e.ShelvesByShelfGroup]]},["cDcdfi","5X2em-","W3_c4H","E1X9WP","Dg5_-9","8xs-IB","MHKLZN","lMO0v3","7yGKf-","2x7WI3","VP50Wc","0DsHEV","F5FCuN","oVKaZR","MNe656","DY6uxn","VJ7DQx","F8raOV","1yEXVQ","PUj9cw","_0EljR","iekllc","U1tcLB","65W9ZJ","agWPHr","fvDyry"]]);
