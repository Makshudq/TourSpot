(this.$WP=this.$WP||[]).push(["Ag9Xrp",(e,i)=>{"use strict";var n,t,a,r,l,o,s,c,d,u,p,m,h,_,g,f,b,v,y,w,x,M,T,C,P,I,D,N,k,A,E,B,F,O,W,j,K,S,H=({title:e,children:i})=>D(m,{marginBottom:"spacing-04",className:"dGhag",children:i?N(k,{children:[D(s,{variant:"supporting-02",color:"secondaryText",marginBottom:"spacing-02",children:e}),i]}):void 0}),L=({isMobile:e,onClick:i})=>D(A,{variant:"primary",fullWidth:e,onClick:i,children:D(c,{id:"plus_trial_confirmation_explore_experiences"})}),R=({isMobile:e,isTrial:i,...n})=>D(E,{...n,marginTop:e?"spacing-05":void 0,children:D(c,i?{id:"plus_trial_confirmation_manage_membership"}:{id:"plus_paywall_hr_confirmation_manage_subscription"})}),V=({isMobile:e,onExploreExperiences:i,isTrial:n,...t})=>N(m,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",children:[D(F,{isMobile:e,onClick:i}),D(O,{isMobile:e,...t,isTrial:n})]}),Y=({hotelId:e,isMobile:i,onNavigateToHr:n,...t})=>e?N(m,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",children:[D(A,{variant:"primary",onClick:n,fullWidth:i,children:D(c,{id:"plus_paywall_hr_confirmation_continue_to_hotel"})}),D(E,{...t,marginTop:i?"spacing-05":void 0,children:D(c,{id:"plus_paywall_hr_confirmation_manage_subscription"})})]}):D(m,{display:"flex",className:"F",children:D(A,{...t,variant:"primary",fullWidth:i,children:D(c,{id:"plus_paywall_hr_confirmation_manage_subscription"})})}),z=(e,i,n)=>{switch(e){case"hotels":return{href:"/OptimusAccountManager",target:"_blank",onClick:n};case"attractions":return{href:"/OptimusAccountManager",target:"_blank"};case"memberCenter":return{href:"#",onClick:i};default:return{href:"/OptimusAccountManager",target:"_blank",onClick:n}}},U=({variant:e,hotelId:i,isMobile:n,isTrial:t,closeModal:a,onNavigateToHr:r,onNavigateToMembership:l,onExploreExperiences:o})=>{var s=K(e,a,l);switch(e){case"attractions":return D(W,{isMobile:n,onExploreExperiences:o,isTrial:t,...s});case"memberCenter":case"hotels":return D(j,{hotelId:i,isMobile:n,onNavigateToHr:r,...s});default:return null}},G="aFgkL",X="pAdKo Mk MK",J="Hotel_Review",Z=({variant:e})=>{switch(e){case"attractions":return D(c,{id:"plus_trial_confirmation_title"});case"hotels":return D(c,{id:"plus_paywall_confirmation_title_v2"});default:return null}},$=({variant:e})=>{switch(e){case"attractions":return D(c,{id:"plus_trial_confirmation_message_v2"});case"hotels":return D(c,{id:"plus_paywall_hr_confirmation_member_only_message"});default:return null}},q=({subscription:e,variant:i,visibleRef:n,sensitiveFlow:t,subscriptionFetching:a,paymentDataFetching:r,primaryCard:l,creditCardType:o,acctNumberTail:d,expMonth:p,expYear:g,formattedRenewalDate:b,formattedPurchaseDate:v,membershipButtonProps:y,onExploreExperiences:w,intlFormatter:x,primaryTokenizedPayment:M})=>{var T,C,P,I=null==e?void 0:e.trialDetails,A="MOBILE"===h(),E=null==e||null==(T=e.subscriptionPrice)?void 0:T.amountPaid,W=null==I?void 0:I.trialPeriodPrice,j=null!=W&&W.totalAmount&&null!=W&&null!=(C=W.discountAmount)&&C.discountAmount?(null==W?void 0:W.totalAmount)-(null==W||null==(P=W.discountAmount)?void 0:P.discountAmount):0;return N("div",{className:G,ref:n,children:[D(u,{variant:"plus-logo-short",height:44}),D(s,{variant:"expressive-display-03",marginTop:"spacing-03",marginBottom:"spacing-03",children:D(Z,{variant:i})}),t&&D(s,{variant:"title-05",children:D(c,{id:"plus_trial_confirmation_membership_details_subtitle",args:{email:null==t?void 0:t.email}})}),a||r?N(k,{children:[D(_,{height:24,width:"100%",marginTop:6}),D(_,{height:24,width:"70%",marginTop:6}),D(_,{height:24,width:"70%",marginTop:6}),D(_,{height:24,width:"100%",marginTop:6,marginBottom:6})]}):N(m,{display:"flex",marginTop:"spacing-04",flexDirection:["column","row","row"],flexWrap:"wrap",justifyContent:"space-between",children:[E&&D(B,{title:D(c,{id:"plus_confirmation_price_section"}),children:D("span",{children:D(c,{id:"plus_trial_account_management_price_today_v2",args:{0:x.formatCurrencyInteger(j),numMonths:(null==I?void 0:I.trialPeriodDuration)||0}})})}),(null==e?void 0:e.subscriptionNumber)&&D(B,{title:D(c,{id:"plus_confirmation_membership_number_section"}),children:D(s,{variant:"body-01",children:e.subscriptionNumber})}),D(B,{title:D(c,{id:"plus_confirmation_payment_section"}),children:l&&D(f,{paymentMethod:M?{provider:"APPLE_PAY"===M.paymentType?"ApplePay":"PayPal",email:M.email}:{cardType:o,numberTail:d,expiryMonth:p,expiryYear:g},hideExpiration:!0,cardNumberLeadMessage:"•••• •••• ••••"})}),v&&D(B,{title:D(c,l?{id:"plus_confirmation_date_purchased_section"}:{id:"plus_confirmation_start_date_section"}),children:D(s,{variant:"body-01",children:v})}),b&&D(B,{title:D(c,{id:"plus_confirmation_date_renews_section_v2"}),children:D(s,{variant:"body-01",children:b})}),D(m,{display:"flex",alignItems:"flex-end",marginBottom:"spacing-04",className:"AFojj Na",children:D(O,{isMobile:A,...y,isTrial:!0})})]}),D("div",{className:X}),D(s,{variant:"body-01",marginTop:"spacing-02",marginBottom:"spacing-02",children:D(c,{id:"plus_trial_confirmation_message_v3"})}),D(F,{isMobile:A,onClick:w})]})},Q=({funnelKey:e,closeModal:i,hotelId:n,variant:p="hotels"})=>{var A,E,F,O,W=y(),j=w(),H=t((()=>e||C()),[e]),L=M(),R=null!==T(),{clearDiscountCode:V}=I();a((()=>{V()}));var[{data:Y,fetching:z},U]=P(),[Q,ee]=r(0);a((()=>{!(Q<3)||null!=Y&&Y.isMember||z||(ee(Q+1),U())}),[Q,U,Y,z]);var ie=v((()=>{W({optimusConfirmationModal:{locationId:n,funnelKey:H,pageviewUid:L}})})),ne=x("PLUS_CONFIRM"),te=l(ne);a((()=>{null==te||null==te.current||te.current()}),[te]);var ae=o((e=>{j({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:e,locationId:n,isMemberSignedIn:R,servletName:J,funnelKey:H}}})}),[H,j,R,n]),re=o((()=>{i(),ae("HR")}),[i,ae]),le=o((()=>{ae("PlusMembershipCenter")}),[ae]),oe=o((()=>{i()}),[i]),se="MOBILE"===h(),ce=d(),[de]=g(),[{data:ue,fetching:pe}]=b({billingAccountId:null==Y?void 0:Y.billingAccountId}),me=null!=ue&&ue.storedCardId?ue:null,he=null!=ue&&ue.storedTokenizedPaymentId?ue:null,{acctNumberTail:_e,creditCardType:ge,expMonth:fe,expYear:be}=me||{},ve=null==Y?void 0:Y.trialDetails,ye="ACTIVE"===(null==ve?void 0:ve.trialStatus),we=null==Y||null==(A=Y.subscriptionPrice)?void 0:A.amountPaid,xe=null==Y||null==(E=Y.nextCharge)?void 0:E.totalAmount,Me=!(null==Y||null==(F=Y.subscriptionPrice)||!F.discountAmount)&&0===we,Te=!(null==Y||null==(O=Y.subscriptionPrice)||!O.discountAmount)&&(null==xe||null==we||xe>we),Ce=null!=Y&&Y.startDate?ce.formatDate("date_long",Y.startDate):null,Pe=null;null!=Y&&Y.renewalDate&&(Pe=ce.formatDate("date_long",Y.renewalDate)),null!=Y&&Y.autoRenew||null==Y||!Y.endDate||ye||(Pe=D(c,{id:"plus_management_center_non_renewing_member",args:{0:ce.formatDate("date_long",Y.endDate)}}));var Ie=D(S,{variant:p,isMobile:se,isTrial:ye,hotelId:n,closeModal:i,onNavigateToHr:re,onNavigateToMembership:le,onExploreExperiences:oe}),De=K(p,i,le);return ye?D(q,{subscription:Y,variant:p,visibleRef:ie,sensitiveFlow:de,subscriptionFetching:z,paymentDataFetching:pe,amountPaid:we,primaryCard:me,creditCardType:ge,acctNumberTail:_e,expMonth:fe,expYear:be,formattedRenewalDate:Pe,formattedPurchaseDate:Ce,membershipButtonProps:De,onExploreExperiences:oe,intlFormatter:ce,primaryTokenizedPayment:he}):N("div",{className:G,ref:ie,children:[D(u,{variant:"plus-logo-short",height:44}),D(s,{variant:"expressive-display-03",marginTop:"spacing-03",marginBottom:"spacing-03",children:D(Z,{variant:p})}),D(s,{variant:"body-01",marginTop:"spacing-02",children:D($,{variant:p})}),D("div",{className:X}),D(s,{variant:"title-05",children:D(c,{id:"plus_paywall_hr_confirmation_membership_details_title"})}),de&&D(s,{variant:"body-01",marginTop:"spacing-01",children:D(c,{id:"plus_paywall_hr_confirmation_membership_details_subtitle",args:{email:null==de?void 0:de.email}})}),z||pe?N(k,{children:[D(_,{height:24,width:"100%",marginTop:6}),D(_,{height:24,width:"70%",marginTop:6}),D(_,{height:24,width:"70%",marginTop:6}),D(_,{height:24,width:"100%",marginTop:6,marginBottom:6})]}):N(m,{display:"flex",marginTop:"spacing-04",flexDirection:["column","row","row"],flexWrap:"wrap",justifyContent:"space-between",children:[!ye&&(we||Me)&&N(B,{title:D(c,{id:"plus_confirmation_price_section"}),children:[D(s,{variant:"body-01",children:we?D(c,{id:"plus_account_management_price_per_year",args:{0:Math.floor(we)===we?ce.formatCurrencyInteger(we):ce.formatCurrency(we)}}):ce.formatCurrencyInteger(0)}),Te&&me&&D(s,{variant:"supporting-01",children:D(c,{id:"plus_account_management_price_discounted"})})]}),(null==Y?void 0:Y.subscriptionNumber)&&D(B,{title:D(c,{id:"plus_confirmation_subscription_number_section"}),children:D(s,{variant:"body-01",children:Y.subscriptionNumber})}),D(B,{title:D(c,{id:"plus_confirmation_payment_section"}),children:(me||he)&&D(f,{paymentMethod:he?{provider:"APPLE_PAY"===he.paymentType?"ApplePay":"PayPal",email:he.email}:{cardType:ge,numberTail:_e,expiryMonth:fe,expiryYear:be},hideExpiration:!0,cardNumberLeadMessage:"•••• •••• ••••"})}),Ce&&D(B,{title:D(c,me?{id:"plus_confirmation_date_purchased_section"}:{id:"plus_confirmation_start_date_section"}),children:D(s,{variant:"body-01",children:Ce})}),Pe&&D(B,{title:D(c,{id:"plus_confirmation_date_renews_section"}),children:D(s,{variant:"body-01",children:Pe})})]}),D(m,{marginTop:"spacing-04",marginBottom:"spacing-05",children:Ie})]})},ee=({funnelKey:e,closeModal:i,hotelId:n})=>{var a=w(),r=t((()=>e||C()),[e]),l=null!==T(),s=o((()=>{i(),a({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:"Dismiss",locationId:n,isMemberSignedIn:l,servletName:J,funnelKey:r}}})}),[i,r,a,l,n]);return D(p,{onClose:s,backgroundColor:"beige",children:D(Q,{funnelKey:r,hotelId:n,closeModal:i})})};return[()=>{B=H,F=L,O=R,W=V,j=Y,K=z,S=U,e({IsConfirmationModalOpen:n(!1),SubscriptionConfirmation:Q,default:ee})},[e=>(n=e.createContext,t=e.useMemo,a=e.useEffect,r=e.useState,l=e.useRef,o=e.useCallback),e=>s=e.default,e=>(c=e.default,d=e.useIntlFormatter),e=>u=e.default,e=>p=e.ModalContainer,e=>m=e.Box,e=>h=e.useViewportCategory,e=>_=e.default,e=>g=e.useSensitiveFlowState,e=>f=e.default,e=>b=e.useDefaultPaymentData,e=>v=e.useOnVisible,e=>y=e.useImpressionLogger,e=>w=e.useInteractionLogger,e=>x=e.usePixelCallback,e=>M=e.usePageviewUid,e=>T=e.useUserId,e=>C=e.uuid,e=>P=e.useOptimusSubscription,e=>I=e.useDiscountCodePersistance,e=>(D=e.jsx,N=e.jsxs,k=e.Fragment),e=>(A=e.default,E=e.BorderlessButton)]]},["cDcdfi","VP50Wc","0DsHEV","ohJPzG","E1X9WP","SzaY02","oVKaZR","Xi-2HZ","rSObt2","1jVxH0","bk1Dsb","PUj9cw","30t50h","fsml46","jb_4W2","F8raOV","ukkKxE","O-HcBE","BWm3Dg","P89JOf","F5FCuN","7yGKf-"]]);
