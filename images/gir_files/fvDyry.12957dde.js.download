(this.$WP=this.$WP||[]).push(["fvDyry",(e,l)=>{"use strict";var t,i,r,a,n,o,d,c,u,s,v,h,p,f,g,y,m,I,S,w,C,T,k,_,x,P,b,B,A,D,N,L,M,E,R,F,V,z="shelfItemClick",q=e=>({subType:z,customData:{productCode:e}}),G=e=>({subType:z,customData:{activityId:e}}),j=(e,l,t,i)=>{if(!(null==e||e<=0||null==l)){var r={price:new Intl.NumberFormat(i,{style:"currency",currency:l}).format(e)};return m(n,"UNIT"===t?{id:"phoenix_list_attractions_from_price_per_group_txt_v2",args:r}:{id:"cx_feed_attraction_price",args:r})}},Y=({activityData:e,position:l,showSaveButton:t=!1})=>{var i,r,a=o(),{trackInteraction:n}=v();if(null!=e.activityId&&null!=(null==(i=e.title)?void 0:i.text)&&null!=(null==(r=e.route)?void 0:r.url)){var d,c,u,s,p,y,I,S=t&&e.activityId>0?m(f,{position:"static",id:e.activityId,flowOrigin:"login"}):null;return m(h,{scope:{scopeType:"shelfCard",cardType:"attractionProduct",cardId:e.activityId,cardIndex:l+1},children:m(g,{name:e.title.text,rating:null==(d=e.reviewSummary)?void 0:d.aggregateAvgRating,reviewCount:null==(c=e.reviewSummary)?void 0:c.tripAdvisorRatingCount,url:e.route.url,imageActionOverlay:S,thumbnail:null==(u=e.photos)||null==(s=u[0])?void 0:s.sizes,price:j(null==(p=e.pricingInfo)?void 0:p.fromPrice,null==(y=e.pricingInfo)?void 0:y.currency,null==(I=e.pricingInfo)?void 0:I.pricingType,a),linkTarget:"_blank",onClick:()=>n(G(e.activityId))})},e.activityId)}return null},O=({product:e,productCode:l,position:t,showSaveButton:i=!1})=>{var r,a,n,d,c,u,s,p,y,{trackInteraction:I}=v(),S=o(),w=e.activityId||0,C=i&&w>0?m(f,{position:"static",id:w,flowOrigin:"login"}):null;return null!=(null==(r=e.route)?void 0:r.url)&&null!=(null==(a=e.title)?void 0:a.text)&&e.activityId?m(h,{scope:{scopeType:"shelfCard",cardType:"attractionProduct",cardId:e.activityId,cardIndex:t+1},children:m(g,{name:e.title.text,rating:null==(n=e.reviewSummary)?void 0:n.aggregateAvgRating,reviewCount:null==(d=e.reviewSummary)?void 0:d.tripAdvisorRatingCount,url:e.route.url,thumbnail:null==(c=e.photos)||null==(u=c[0])?void 0:u.sizes,imageActionOverlay:C,price:j(null==(s=e.pricingInfo)?void 0:s.fromPrice,null==(p=e.pricingInfo)?void 0:p.currency,null==(y=e.pricingInfo)?void 0:y.pricingType,S),linkTarget:"_blank",onClick:()=>I(q(l))})},e.activityId):null},U=({product:e,productCode:l,position:t})=>{var i,r,a,n,o,d,c,{trackInteraction:u}=v();return e&&null!=(null==(i=e.route)?void 0:i.url)&&null!=(null==(r=e.title)?void 0:r.text)&&e.activityId?m(h,{scope:{scopeType:"shelfCard",cardType:"attractionProduct",cardId:e.activityId,cardIndex:t+1},children:m(y,{onClick:()=>u(q(l)),variant:"minimal",title:null==(a=e.title)?void 0:a.text,rating:(null==(n=e.reviewSummary)?void 0:n.aggregateAvgRating)||void 0,reviewCount:(null==(o=e.reviewSummary)?void 0:o.tripAdvisorRatingCount)||void 0,distance:null,href:e.route.url,image:null==(d=e.photos)||null==(c=d[0])?void 0:c.sizes})},e.activityId):null},W=({activityData:e,position:l})=>{var t,i,r,a,n,o,{trackInteraction:d}=v();return null!=e.activityId&&null!=(null==(t=e.title)?void 0:t.text)&&null!=(null==(i=e.route)?void 0:i.url)?m(h,{scope:{scopeType:"shelfCard",cardType:"attractionActivity",cardId:e.activityId,cardIndex:l+1},children:m(y,{onClick:()=>d(G(e.activityId)),variant:"minimal",title:e.title.text,rating:(null==(r=e.reviewSummary)?void 0:r.aggregateAvgRating)||void 0,reviewCount:(null==(a=e.reviewSummary)?void 0:a.tripAdvisorRatingCount)||void 0,distance:null,href:e.route.url,image:null==(n=e.photos)||null==(o=n[0])?void 0:o.sizes})},e.activityId):null},H="jpVnb Z1 S",J="lPnwX",K=({children:e,onScrolled:l})=>{var{localize:t}=d(),[a,{canGoBack:n,canGoForward:o,goBack:c,goForward:u}]=i({waypointSelector:"[data-carousel-waypoint]"}),s=o||n,v=S(!1),h=w((()=>{v.current||null==l||(v.current=!0,l())}),[l]);return I("div",{className:k("FqvuX"),children:[s&&m("div",{className:k(H,"rfMYU"),children:m("div",{className:J,children:m(r,{icon:_,label:t.string("common_Previous"),disabled:!n,onClick:c,lowerScrollButton:!1})})}),m("div",{className:"KdblT",children:m("div",{className:"ahmWP",ref:a,onScroll:h,children:m("ul",{className:"Ohqgr",children:C.map(e,(e=>I("li",{className:"IqYJP Fg I",children:[e,m("div",{"data-carousel-waypoint":!0})]},e.key)))})})}),s&&m("div",{className:k(H,"Ygety"),children:m("div",{className:J,children:m(r,{icon:x,label:t.string("common_Next"),disabled:!o,onClick:u,lowerScrollButton:!1})})})]})},X=({shelf:e,activityItemMapping:l,scrollContainer:i="design-system",showSeeAllLink:r=!1,titleTypography:o="title-03",titleMargin:d={marginY:"spacing-03"},cardType:c="Vertical",showSaveButton:u=!1,...h})=>{var f,{trackInteraction:g}=v(),y=((e,l,t,i)=>{var r;return null==(r=e.shelfItems)?void 0:r.filter(Boolean).map(((e,r)=>{if("ExpShelves_ProductShelfItem"===e.__typename&&null!=e&&e.fullProductDetails)return"Vertical"===t?m(O,{product:e.fullProductDetails,productCode:e.productCode,showSaveButton:i,position:r},e.productCode):m(U,{product:e.fullProductDetails,productCode:e.productCode,position:r},e.productCode);if("ExpShelves_ActivityShelfItem"===e.__typename&&e.activityId){var a=l.get(e.activityId);return a?"Vertical"===t?m(Y,{activityData:a,position:r,showSaveButton:i},e.activityId):m(W,{activityData:a,position:r},e.activityId):null}return null})).filter(Boolean)})(e,l,c,u);return y&&null!=e.shelfTitleLocalized?I("div",{className:p(h),children:[I("div",{className:"f u k",children:[m(t,{variant:o,...d,children:e.shelfTitleLocalized}),r&&null!=(null==e||null==(f=e.seeAllLink)?void 0:f.url)&&m(s,{href:e.seeAllLink.url,theme:"standalone",display:"block",onClick:()=>g({subType:"shelfSeeAll"}),children:m(n,{id:"airm_see_all"})})]}),m("design-system"===i?a:L,{onScrolled:()=>g({subType:"shelfScrolled"}),children:y})]}):null},Q={__key:0xb81bc8ea8019,id:"b81bc8ea80197054110d26472f78130a",loc:{},definitions:[]},Z=({detailId:e,geoId:l,shelfGroup:t,minItems:i,maxItems:r})=>{var a=c(),n=u(),o=b(),d=A(),s=B(),v=e,h=l;if(null==h||0===h||null==v||0===v){var{detailId:p=0,geoId:f=0}=s.params;null!=p&&null!=f||console.error("[Exp Shelf Service] could not obtain geoId and detailId from route or input"),h=f,v=p}var[{data:g,fetching:y,error:m}]=P({query:Q,variables:{currency:a,geoId:h||0,detailId:v||0,locale:n,maxItems:r,minItems:i,shelfGroup:t,usePds:!0,userContext:{taUnique:o,userId:d}},pause:null==h||null==v});return{data:g&&g.ExpShelves_getShelfGroups||void 0,fetching:y,error:m}},$={__key:0x88606dd32b29,id:"88606dd32b29d7fa5727da7ff6c86485",loc:{},definitions:[]},ee=({detailId:e,geoId:l,shelfTypes:t})=>{var i=c(),r=u(),a=b(),n=A(),o=t.map((e=>({shelfType:e}))),[{data:d,fetching:s,error:v}]=P({query:$,variables:{currency:i,geoId:l,detailId:e,locale:r,userContext:{taUnique:a,userId:n},shelfTypes:o},pause:null==l});return{data:d&&d.ExpShelves_getShelvesV2||void 0,fetching:s,error:v}},le={__key:6403655583438,id:"05d2f79dc6ce1900cafeaa79601f968a",loc:{},definitions:[]},te=({activityIds:e})=>{var l=c(),[{data:t,fetching:i,error:r}]=P({query:le,variables:{currency:l,activityIds:e},pause:0===e.length}),a=[];return t&&t.ExpPresentationService_getFullProductDetailsBulk&&(a=t.ExpPresentationService_getFullProductDetailsBulk.filter(Boolean)),{data:a,fetching:i,error:r}},ie=e=>{var l=(e=>{var l=e.flatMap((e=>null!=e&&e.shelfItems?e.shelfItems.filter(Boolean).map((e=>"ExpShelves_ActivityShelfItem"===e.__typename?e.activityId:null)).filter(Boolean):[]));return Array.from(new Set(l))})(e),{data:t,fetching:i}=F({activityIds:l});return T((()=>{var e=new Map;return null==t||t.filter(Boolean).forEach((l=>null!=l.activityId&&e.set(l.activityId,l))),{fetching:i,data:e}}),[t,i])},re=({shelfData:e,fetchingShelves:l,activityIdProductMapping:t,fetchingProducts:i,showLoading:r=!0,shelfSlotName:a,shelfSource:n,showShelfDivider:o=!1,dividerMargin:c={marginY:"spacing-03"},scrollContainer:u,showSeeAllLink:s,titleTypography:v,titleMargin:f,cardType:g,showSaveButton:y,...S})=>{var{localize:w}=d(),C=null==e?void 0:e.filter(Boolean).map(((l,i)=>I(h,{scope:{scopeType:"shelf",shelfType:n,shelfId:l.shelfType||"Shelf",shelfSlot:a,shelfSlotIndex:i+1},children:[m(M,{shelf:l,activityItemMapping:t,scrollContainer:u,showSeeAllLink:s,titleTypography:v,titleMargin:f,cardType:g,showSaveButton:y}),o&&i!==(null==e?void 0:e.length)-1&&m(N,{...c})]},i)));return C&&C.length>0?I("div",{className:p(S),children:[r&&(l||i)&&m("div",{className:"f u j Mk MJ",children:m(D,{variant:"large","aria-label":w.string("sng_results_loading")})}),!l&&!i&&C]}):null},ae=({detailId:e,geoId:l,shelfGroup:t,maxItems:i=10,minItems:r,showShelfDivider:a,dividerMargin:n,scrollContainer:o,showSeeAllLink:d,titleTypography:c,titleMargin:u,cardType:s,showSaveButton:v,...h})=>{var p,{data:f,fetching:g}=E({detailId:e,geoId:l,shelfGroup:t,maxItems:i,minItems:r}),{data:y,fetching:I}=ie(null!=(p=null==f?void 0:f.shelves)?p:[]);return m(V,{shelfData:null==f?void 0:f.shelves,fetchingShelves:g,activityIdProductMapping:y,fetchingProducts:I,shelfSlotName:t,shelfSource:"ShelvesByShelfGroup",showShelfDivider:a,dividerMargin:n,scrollContainer:o,showSeeAllLink:d,titleTypography:c,titleMargin:u,cardType:s,showSaveButton:v,...h})},ne=({detailId:e,geoId:l,shelfTypes:t,shelfSlotName:i,showLoading:r,...a})=>{var n,{data:o,fetching:d}=R({detailId:e,geoId:l,shelfTypes:t}),{data:c,fetching:u}=ie(null!=(n=null==o?void 0:o.shelves)?n:[]);return m(V,{shelfData:null==o?void 0:o.shelves,fetchingShelves:d,activityIdProductMapping:c,fetchingProducts:u,shelfSlotName:i,shelfSource:"ShelvesByShelfType",showLoading:r,...a})};return[()=>{L=K,E=Z,R=ee,F=te,V=re,e({Shelf:M=X,ShelvesByShelfGroup:ae,ShelvesByShelfType:ne})},[e=>t=e.default,e=>(i=e.useAutoscrollingList,r=e.CarouselScrollButton,a=e.Carousel),e=>(n=e.default,o=e.useLocale,d=e.useLocalize,c=e.useCurrency,u=e.useLanguage),e=>s=e.default,e=>(v=e.useTracking,h=e.TrackingScope),e=>p=e.margin,e=>f=e.default,e=>(g=e.VerticalCard,y=e.HorizontalCard),e=>(m=e.jsx,I=e.jsxs),e=>(S=e.useRef,w=e.useCallback,C=e.Children,T=e.useMemo),e=>k=e.default,e=>_=e.default,e=>x=e.default,e=>P=e.useQuery,e=>b=e.useSessionId,e=>B=e.useRoute,e=>A=e.useUserId,e=>D=e.Spinner,e=>N=e.default]]},["VP50Wc","1weFyZ","0DsHEV","5KqyYa","_0EljR","iekllc","wwtmHV","U1tcLB","F5FCuN","cDcdfi","jSLlaY","j6P7_e","9wf81N","5X2em-","VJ7DQx","F8raOV","ukkKxE","Ly5eaD","jPSRY1"]]);
