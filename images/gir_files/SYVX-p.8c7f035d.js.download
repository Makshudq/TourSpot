(this.$WP=this.$WP||[]).push(["SYVX-p",(e,n)=>{"use strict";var t,r,o,u,a,i,c,s,l,h,d,v,m,f,g,T,y,S,p,b=()=>null!=f&&f.matches?"DARK":"LIGHT",P=e=>{"removeEventListener"in f?f.removeEventListener("change",e):"removeListener"in f&&f.removeListener(e)},L={__key:0x5d38d9a2ef9c,id:"5d38d9a2ef9c32d279740ba2bd4b3201",loc:{},definitions:[]},w=()=>g,O=(e=!0)=>{var n=h(L);return[g,r((e=>n({themeStore:e})),[n])]},C={};function x(e){return new Promise((function(n,t){e.oncomplete=e.onsuccess=function(){return n(e.result)},e.onabort=e.onerror=function(){return t(e.error)}}))}function A(e,n){var t=indexedDB.open(e);t.onupgradeneeded=function(){return t.result.createObjectStore(n)};var r=x(t);return function(e,t){return r.then((function(r){return t(r.transaction(n,e).objectStore(n))}))}}function D(){return T||(T=A("keyval-store","keyval")),T}function I(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D();return n("readonly",(function(n){return x(n.get(e))}))}function k(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D();return t("readwrite",(function(t){return t.put(n,e),x(t.transaction)}))}function E(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D();return n("readwrite",(function(n){return e.forEach((function(e){return n.put(e[1],e[0])})),x(n.transaction)}))}function B(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D();return n("readonly",(function(n){return Promise.all(e.map((function(e){return x(n.get(e))})))}))}function M(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D();return t("readwrite",(function(t){return new Promise((function(r,o){t.get(e).onsuccess=function(){try{t.put(n(this.result),e),r(x(t.transaction))}catch(e){o(e)}}}))}))}function R(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D();return n("readwrite",(function(n){return n.delete(e),x(n.transaction)}))}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return e("readwrite",(function(e){return e.clear(),x(e.transaction)}))}function W(e,n){return e("readonly",(function(e){return e.openCursor().onsuccess=function(){this.result&&(n(this.result),this.result.continue())},x(e.transaction)}))}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D(),n=[];return W(e,(function(e){return n.push(e.key)})).then((function(){return n}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D(),n=[];return W(e,(function(e){return n.push(e.value)})).then((function(){return n}))}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D(),n=[];return W(e,(function(e){return n.push([e.key,e.value])})).then((function(){return n}))}var N="theme",H=()=>y(N).then((e=>{if(null!=e&&"object"==typeof e&&"theme"in e&&"themePreferenceOrAuto"in e){var{theme:n,themePreferenceOrAuto:t}=e;return{theme:n,themePreferenceOrAuto:t}}})).catch((e=>{console.error("Error getting theme from IndexedDB",e)})),J=()=>{var{isWebview:e}=d();return v(),e?{enableTheming:!0,canChangeThemes:!0}:{enableTheming:!1,canChangeThemes:!1}},U="themeChanged",$=e=>null!=e?o[e]:void 0,q=({initialThemeStore:e,children:n})=>{var r,h,d,v,{canChangeThemes:g,enableTheming:T}=p(),[y,L]=O(T),[w,C]=t.useState(null!=(r=null==(h=null!=e?e:y)?void 0:h.theme)?r:c),[x,A]=t.useState(null!=(d=null==(v=null!=e?e:y)?void 0:v.themePreferenceOrAuto)?d:s),D=t.useRef((()=>{}));t.useEffect((()=>()=>P(D.current)),[]);var I=t.useCallback(((e,n)=>{var t=T?e:c;A(t);var r=document.body;if(null!=r){var u=$(t);r.classList.remove(...Object.values(o).map(String)),null!=u&&r.classList.add(u)}if(!1!==(null==n?void 0:n.syncToTabs))try{window.localStorage.setItem(U,t),window.localStorage.removeItem(U)}catch(e){}var a,i=e=>{C(e);var r={theme:e,themePreferenceOrAuto:t};!1!==(null==n?void 0:n.saveToService)&&L(r),!1!==(null==n?void 0:n.saveToIndexedDB)&&(e=>{S(N,e).catch((e=>console.error("Error saving theme to IndexedDB",e)))})(r)};"AUTO"===t?(i(b()),P(D.current),D.current=()=>{i(b())},a=D.current,"addEventListener"in f?f.addEventListener("change",a):"addListener"in f&&f.addListener(a)):(i(t),P(D.current))}),[L,T]),k=t.useCallback((e=>{I(e,{saveToService:!1,saveToIndexedDB:!1,syncToTabs:!1})}),[I]),{serviceWorker:E}=t.useContext(u);t.useEffect((()=>{null!=e?I(e.themePreferenceOrAuto,E?{saveToIndexedDB:!1}:{saveToService:!1}):E?I(s,{saveToIndexedDB:!1,saveToService:!1}):H().then((e=>{null!=e?I(e.themePreferenceOrAuto,{saveToIndexedDB:!1}):I(s,{saveToIndexedDB:!1,saveToService:!1})}))}),[I,E,e]),i("storage",(e=>{var n=e;n.key===U&&null!=n.newValue&&k(n.newValue)}));var B=a();t.useEffect((()=>{T&&B({itemType:"theme",customData:JSON.stringify({theme:w})})}),[T,B,w]);var M=t.useMemo((()=>T?{theme:w,themePreferenceOrAuto:x,canChangeThemes:g,setTheme:I,setThemeLocal:k}:{theme:c,themePreferenceOrAuto:c,canChangeThemes:!1,setTheme:()=>{},setThemeLocal:()=>{}}),[w,x,T,g,I,k]);return m(l,{value:M,children:n})};return[()=>{f=null==globalThis.matchMedia?void 0:globalThis.matchMedia("(prefers-color-scheme: dark)"),Object.defineProperty(C,"__esModule",{value:!0}),C.clear=j,C.createStore=A,C.del=R,C.entries=F,y=C.get=I,C.getMany=B,C.keys=V,C.promisifyRequest=x,S=C.set=k,C.setMany=E,C.update=M,C.values=_,p=J,e({LithiumThemeProvider:q,getBodyElementClassName:$,getInitialThemeStoreForServerSideRenderer:w,getInitialThemeStoreForServiceWorkerRenderer:H})},[e=>(t=e,r=e.useCallback),e=>o=e.themeClassNames,e=>u=e.LithiumBootstrapContext,e=>a=e.useImpressionV3Logger,e=>i=e.useWindow,e=>(c=e.defaultTheme,s=e.defaultThemePreferenceOrAuto,l=e.ThemeProvider),e=>h=e.useStatelessMutation,e=>d=e.useUserAgent,e=>v=e.useLanguage,e=>m=e.jsx]]},["cDcdfi","RH7wJe","2R4xv2","30t50h","Dg5_-9","d7tPMo","OnmvvE","slAn47","0DsHEV","F5FCuN"]]);
