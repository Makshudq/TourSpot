(this.$WP=this.$WP||[]).push(["BfEQXK",(e,t)=>{"use strict";var r,n,i,c,s,o,a,l,u,d,k,m,g,x,C,p=e=>!0===e?"User":!1===e?"Def":"UNKNOWN",v=e=>{e?o.set(m,e,18e5):o.remove(m)},f={trackingKey:"DEFAULT",trackingTitle:"DEFAULT"},y=(...e)=>e.map((e=>String(e))).join("-"),h=e=>null!=e&&""!==e&&"DEPRECATED"!==e.toUpperCase(),S=e=>t=>{var{context:r,type:n,forceImmediateCallbacks:i}=t,{trackingKey:c,trackingTitle:s,clientContext:o,clientParameter:a,scrollDirection:l,userState:u}=r,d={trackingKey:c,trackingTitle:s,clientParameter:a,clientContext:o,userState:u};if(h(r.trackingKey))switch(n){case"click":null!=i?e.logClickImmediate(d,i.onSuccess,i.onError):e.logClick(d);break;case"scroll":e.logScroll({...{...d,direction:l}});break;default:console.error("Unexpected event type",t.type,t)}},T=()=>{var e=(()=>{var e=n(),t=i(),l=r.useContext(a),u=r.useMemo((()=>l?(e=>{var t;if(e){var{hotelCommerce:r,attractionCommerce:n,restaurantCommerce:i}=e;if(!(r||n||i))return;var c=e.lastUpdated;r&&(t={...t,h:{ci:r.checkIn,co:r.checkOut,dt:p(null==r?void 0:r.setByUser),tt:c}}),n&&(t={...t,a:{ci:n.startDate,co:n.endDate,dt:p(null==n?void 0:n.setByUser),tt:c}}),i&&(t={...t,r:{ci:i.reservationTime?i.reservationTime.split("T")[0]:null,dt:p(null==i?void 0:i.setByUser),tt:c}})}return t})(l):void 0),[l]),d=c(),{path:k}=s(),g=o.get(m),C=r.useMemo((()=>({logClick:t=>(v(d),!x.exists(y("click",d,k,t.trackingKey,t.clientContext,t.clientParameter))&&(e({AppPresentation:{click:{...t,sessionId:d,dates:u}}}),!0)),logClickImmediate:(e,r,n)=>(v(d),x.exists(y("click",d,k,e.trackingKey,e.clientContext,e.clientParameter))?(r(),!1):(t({AppPresentation:{click:{...e,sessionId:d,dates:u}}}).then(r,n),!0)),logNewSession(t){v(d),e({AppPresentation:{newSession:{...t,sessionId:d,dates:u}}})},logScroll:t=>(v(d),!x.exists(y("scroll",d,k,t.trackingKey,t.clientContext,t.clientParameter))&&(e({AppPresentation:{sectionScroll:{...t,sessionId:d,dates:u}}}),!0))})),[d,k,e,t,u]);return r.useEffect((()=>{if(d){var e=o.get(m);e&&e===d||C.logNewSession({sessionId:d,deepLink:k}),v(d)}else v(null)}),[d,u,k,C,g]),C})(),t=r.useContext(C);return r.useCallback(t(e),[e,t])},I=e=>{var{context:t}=r.useContext(g),n=T();return r.useMemo((()=>({trackClick(r){n({type:"click",context:{...t,...e,...r}})},trackClickImmediate({details:r,callbacks:{onSuccess:i,onError:c}}){n({type:"click",context:{...t,...e,...r},forceImmediateCallbacks:{onSuccess:i,onError:c}})}})),[t,e,n])},P=({context:e,children:t})=>{var n=T(),i=function(e,t=k,n=l){var{timeout:i,threshold:c,rootMargin:s,onceOnly:o}={...k,...t},[a,u]=r.useState(!1),[d,m]=r.useState(!1);return r.useEffect((()=>{var t;return a&&(t=setTimeout((()=>{d&&o||(e(),m(!0))}),i)),()=>{clearTimeout(t)}}),[a,d,o,e,i]),n(u,s,c)}(r.useCallback((()=>{n({type:"scroll",context:e})}),[n,e]));return i&&u("span",{"data-ft":!0,ref:i,children:t})},E=e=>{var{trackingKey:t,trackingTitle:n,context:i,noVisibility:c=!1,scrollDirection:s=null,children:o}=e,a=r.useMemo((()=>({context:{scrollDirection:s,trackingKey:t,trackingTitle:n,...i}})),[i,s,t,n]);return h(t)?u(g.Provider,{value:a,children:c?o:u(P,{context:a.context,children:o})}):u(d,{children:o})},D=({context:e,impressions:t})=>r.useEffect((()=>{}),[e,t]);return[()=>{var t;k={rootMargin:0,threshold:0,timeout:500,onceOnly:!0},m="APS_SESSION_1.1",g=r.createContext({context:f}),t=new Set,x={exists(e){var r=t.has(e);return r||(t.add(e),setTimeout((()=>{t.delete(e)}),5e3)),r},reset(){t.clear()}},C=r.createContext(S),e({FusionTracking:E,isValidTrackingKey:h,useConsoleLogImpressions:D,useFusionTracking:I})},[e=>r=e,e=>(n=e.useInteractionLogger,i=e.useBlockingInteractionLogger),e=>c=e.useSessionId,e=>s=e.useRoute,e=>o=e.default,e=>a=e.default,e=>l=e.useVisibleEffect,e=>(u=e.jsx,d=e.Fragment)]]},["cDcdfi","fsml46","VJ7DQx","F8raOV","jaCyxS","i8dCG0","PUj9cw","F5FCuN"]]);
